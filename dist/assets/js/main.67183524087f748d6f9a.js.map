{"version":3,"file":"assets/js/main.67183524087f748d6f9a.js","mappings":"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","sources":["webpack://rush-dashboard/./src/services/apiService.js","webpack://rush-dashboard/./src/utils/excelParser.js","webpack://rush-dashboard/./src/components/ConfirmationDialog.js","webpack://rush-dashboard/./src/utils/formatter.js","webpack://rush-dashboard/./src/components/AgentCard.js","webpack://rush-dashboard/./src/components/AgentModal.js","webpack://rush-dashboard/./src/components/ModernAgentsPage.js","webpack://rush-dashboard/./src/components/ModernSMRanking.js","webpack://rush-dashboard/./src/components/ModernProductsAnalysis.js","webpack://rush-dashboard/./src/components/ModernNewClientsPage.js","webpack://rush-dashboard/./src/components/ModernFastwebPage.js","webpack://rush-dashboard/./src/components/ModernHistoricalAnalysis.js","webpack://rush-dashboard/./src/components/ModernSettingsPage.js","webpack://rush-dashboard/./src/components/TestPage.js","webpack://rush-dashboard/./src/components/ModernDashboard.js","webpack://rush-dashboard/./src/components/ModernSidebar.js","webpack://rush-dashboard/./src/components/ModernTopbar.js","webpack://rush-dashboard/./src/App.js","webpack://rush-dashboard/./src/reportWebVitals.js","webpack://rush-dashboard/./src/index.js"],"sourcesContent":["/**\n * API Service per RUSH Dashboard\n * Gestisce tutte le chiamate al backend PHP/MySQL\n */\n\n// ✅ SOLUZIONE: Usa sempre l'API di produzione per evitare problemi localhost\nconst DEFAULT_API_BASE_URL = 'https://rush.nicolaruotolo.it/api';\n\nconst resolveRuntimeEnv = () => {\n  try {\n    return import.meta.env ?? {};\n  } catch (error) {\n    if (typeof process !== 'undefined' && process.env) {\n      return {\n        MODE: process.env.NODE_ENV,\n        VITE_API_BASE_URL: process.env.VITE_API_BASE_URL ?? process.env.REACT_APP_API_BASE_URL,\n      };\n    }\n    return {};\n  }\n};\n\nconst runtimeEnv = resolveRuntimeEnv();\nconst mode = runtimeEnv.MODE || 'development';\nconst API_BASE_URL = runtimeEnv.VITE_API_BASE_URL ?? DEFAULT_API_BASE_URL;\n\n// 🔄 ALTERNATIVA: Se vuoi distinguere sviluppo/produzione\n// Imposta VITE_API_BASE_URL nello specifico file `.env` per l'ambiente desiderato.\n\nconst isProduction = mode === 'production';\n\nconst SENSITIVE_KEYS = new Set([\n  'token',\n  'authorization',\n  'password',\n  'sessiontoken',\n  'session_token',\n  'auth',\n]);\n\nconst sanitizeForLogging = (value, seen = new WeakSet(), depth = 0) => {\n  if (value === null || typeof value !== 'object') {\n    return value;\n  }\n\n  if (value instanceof Date) {\n    return value.toISOString();\n  }\n\n  if (value instanceof Error) {\n    return {\n      name: value.name,\n      message: value.message,\n      stack: isProduction ? undefined : value.stack,\n    };\n  }\n\n  if (seen.has(value)) {\n    return '[Circular]';\n  }\n\n  if (depth > 3) {\n    return '[Object]';\n  }\n\n  seen.add(value);\n\n  try {\n    if (Array.isArray(value)) {\n      return value.map((item) => sanitizeForLogging(item, seen, depth + 1));\n    }\n\n    return Object.entries(value).reduce((acc, [key, val]) => {\n      const normalizedKey = String(key).toLowerCase();\n\n      if (SENSITIVE_KEYS.has(normalizedKey)) {\n        acc[key] = '[REDACTED]';\n        return acc;\n      }\n\n      acc[key] = sanitizeForLogging(val, seen, depth + 1);\n      return acc;\n    }, {});\n  } finally {\n    seen.delete(value);\n  }\n};\n\nconst createLogger = (method) => (...args) => {\n  if (isProduction) {\n    return;\n  }\n\n  const sanitizedArgs = args.map((arg) => sanitizeForLogging(arg));\n  method(...sanitizedArgs);\n};\n\nconst logDebug = createLogger(console.log.bind(console));\nconst logError = createLogger(console.error.bind(console));\nconst logWarn = createLogger(console.warn.bind(console));\n\nconst SESSION_STORAGE_KEY = 'rush-dashboard:api-session';\n\nclass ApiError extends Error {\n  constructor(message, statusCode, details = null) {\n    super(message);\n    this.name = 'ApiError';\n    this.statusCode = statusCode;\n    this.details = details;\n  }\n}\n\nclass ApiService {\n  constructor() {\n    this.token = null;\n    this.currentUser = null;\n    this.expiresAt = null;\n    this.sessionActive = false;\n    this.baseURL = API_BASE_URL;\n\n    // 🐛 DEBUG: Mostra quale URL sta usando\n    logDebug(`🔗 API URL configurata: ${this.baseURL}`);\n    logDebug(`🌍 Environment: ${mode}`);\n\n    this.loadStoredSession();\n  }\n\n  /**\n   * Effettua una richiesta HTTP con gestione completa degli errori\n   */\n  async makeRequest(endpoint, options = {}) {\n    const url = `${this.baseURL}/${endpoint.replace(/^\\//, '')}`;\n\n    const {\n      skipAuthErrorHandling = false,\n      headers: customHeaders = {},\n      credentials: requestedCredentials,\n      ...fetchOptions\n    } = options;\n\n    const isFormData = fetchOptions.body instanceof FormData;\n\n    const headers = {\n      ...this.getAuthHeaders(),\n      ...customHeaders,\n    };\n\n    if (fetchOptions.body !== undefined && fetchOptions.body !== null && !isFormData && !('Content-Type' in headers)) {\n      headers['Content-Type'] = 'application/json';\n    }\n\n    let credentials = requestedCredentials;\n\n    if (credentials === undefined && typeof window !== 'undefined') {\n      try {\n        const baseOrigin = new URL(this.baseURL, window.location.href).origin;\n        if (baseOrigin === window.location.origin) {\n          credentials = 'include';\n        }\n      } catch (error) {\n        logWarn('Impossibile determinare l\\'origin dell\\'API:', error);\n      }\n    }\n\n    const config = {\n      ...fetchOptions,\n      headers,\n      ...(credentials !== undefined ? { credentials } : {}),\n    };\n\n    try {\n      logDebug(`🚀 API Request: ${config.method || 'GET'} ${url}`);\n\n      const response = await fetch(url, config);\n\n      // 🐛 DEBUG: Mostra la risposta\n      logDebug(`📡 Response Status: ${response.status} ${response.statusText}`);\n\n      const contentType = response.headers.get('Content-Type') || '';\n      const rawBody = await response.text();\n      const trimmedBody = rawBody.trim();\n      const shouldAttemptJsonParse =\n        trimmedBody.length > 0 &&\n        (contentType.toLowerCase().includes('application/json') ||\n          trimmedBody.startsWith('{') ||\n          trimmedBody.startsWith('['));\n\n      let data = null;\n\n      if (shouldAttemptJsonParse) {\n        try {\n          data = JSON.parse(trimmedBody);\n        } catch (parseError) {\n          logWarn('Impossibile analizzare la risposta JSON:', parseError);\n          logWarn('Risposta ricevuta:', trimmedBody);\n        }\n      }\n\n      if (!response.ok) {\n        // Se token non valido, logout automatico\n        if (response.status === 401) {\n          if (skipAuthErrorHandling) {\n            this.clearSession();\n          } else {\n            this.handleAuthError();\n          }\n        }\n\n        const errorMessage =\n          (data && (data.error || data.message)) ||\n          trimmedBody ||\n          response.statusText ||\n          `HTTP error ${response.status}`;\n\n        const errorDetails = data ?? (trimmedBody ? { raw: trimmedBody } : null);\n\n        throw new ApiError(errorMessage, response.status, errorDetails);\n      }\n\n      if (data !== null) {\n        logDebug(`✅ API Response (JSON): ${endpoint}`, data);\n        return data;\n      }\n\n      if (trimmedBody.length === 0) {\n        logDebug(`✅ API Response: ${endpoint} (nessun contenuto)`);\n        return null;\n      }\n\n      logDebug(`✅ API Response (testo): ${endpoint}`, trimmedBody);\n      return rawBody;\n\n    } catch (error) {\n      logError(`❌ API Error: ${endpoint}`, error);\n      \n      if (error instanceof ApiError) {\n        throw error;\n      }\n      \n      // Errori di rete o CORS\n      if (error instanceof TypeError && error.message.includes('fetch')) {\n        logError(`🌐 Network Error: Impossibile raggiungere ${url}`);\n        logError('📋 Possibili cause:');\n        logError('   - Server non raggiungibile');\n        logError('   - Problemi CORS');\n        logError('   - Connessione internet assente');\n        \n        throw new ApiError(\n          'Errore di connessione. Controlla la connessione internet.', \n          0\n        );\n      }\n      \n      throw new ApiError('Errore di comunicazione con il server', 0, error);\n    }\n  }\n\n  /**\n   * Gestisce errori di autenticazione\n   */\n  handleAuthError({ shouldReload = true } = {}) {\n    logWarn('🔒 Token non valido, logout automatico');\n    this.clearSession();\n    if (shouldReload) {\n      window.location.reload();\n    }\n  }\n\n  /**\n   * Headers per autenticazione\n   */\n  getAuthHeaders() {\n    return this.token ? { 'Authorization': `Bearer ${this.token}` } : {};\n  }\n\n  clearSession() {\n    this.token = null;\n    this.currentUser = null;\n    this.expiresAt = null;\n    this.sessionActive = false;\n\n    if (typeof window === 'undefined' || !window.localStorage) {\n      return;\n    }\n\n    try {\n      window.localStorage.removeItem(SESSION_STORAGE_KEY);\n    } catch (error) {\n      logWarn('Impossibile rimuovere la sessione dal localStorage:', error);\n    }\n  }\n\n  /**\n   * Salva il token di autenticazione\n   */\n  setToken(token) {\n    this.token = token || null;\n\n    if (this.token) {\n      this.saveSessionToStorage();\n    }\n  }\n\n  saveSessionToStorage() {\n    if (typeof window === 'undefined' || !window.localStorage) {\n      return;\n    }\n\n    try {\n      const sessionData = {\n        token: this.token,\n        currentUser: this.currentUser,\n        expiresAt: this.expiresAt,\n        sessionActive: this.sessionActive,\n      };\n\n      window.localStorage.setItem(SESSION_STORAGE_KEY, JSON.stringify(sessionData));\n    } catch (error) {\n      logWarn('Impossibile salvare la sessione nel localStorage:', error);\n    }\n  }\n\n  loadStoredSession() {\n    if (typeof window === 'undefined' || !window.localStorage) {\n      return;\n    }\n\n    try {\n      const storedData = window.localStorage.getItem(SESSION_STORAGE_KEY);\n\n      if (!storedData) {\n        return;\n      }\n\n      const sessionData = JSON.parse(storedData);\n\n      if (sessionData?.expiresAt && new Date(sessionData.expiresAt) <= new Date()) {\n        this.clearSession();\n        return;\n      }\n\n      this.token = sessionData?.token || null;\n      this.currentUser = sessionData?.currentUser || null;\n      this.expiresAt = sessionData?.expiresAt || null;\n      this.sessionActive = Boolean(sessionData?.sessionActive && sessionData?.token);\n    } catch (error) {\n      logWarn('Impossibile caricare la sessione dal localStorage:', error);\n\n      try {\n        window.localStorage.removeItem(SESSION_STORAGE_KEY);\n      } catch (removeError) {\n        logWarn('Impossibile ripulire la sessione corrotta dal localStorage:', removeError);\n      }\n    }\n  }\n\n  // ================================\n  // AUTHENTICATION METHODS\n  // ================================\n\n  /**\n   * Login utente\n   */\n  async login(username, password) {\n    try {\n      logDebug(`🔐 Tentativo login per: ${username}`);\n\n      const response = await this.makeRequest('login', {\n        method: 'POST',\n        body: JSON.stringify({ username, password }),\n      });\n\n      if (!response.success) {\n        throw new Error(response.error || 'Login fallito');\n      }\n\n      this.setToken(response.token || null);\n      this.currentUser = response.user || null;\n      this.expiresAt = response.expires_at || null;\n      this.sessionActive = true;\n\n      this.saveSessionToStorage();\n\n      logDebug('✅ Login successful for:', response.user?.username || 'utente sconosciuto');\n\n      return {\n        success: true,\n        user: this.currentUser,\n        token: this.token\n      };\n\n    } catch (error) {\n      logError('❌ Login failed:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Logout utente\n   */\n  async logout() {\n    try {\n      await this.makeRequest('logout', { method: 'POST', skipAuthErrorHandling: true });\n    } catch (error) {\n      logWarn('Errore durante logout:', error);\n    } finally {\n      this.clearSession();\n    }\n  }\n\n  /**\n   * Controlla se l'utente è autenticato\n   */\n  isAuthenticated() {\n    if (this.token) {\n      if (this.expiresAt && new Date(this.expiresAt) <= new Date()) {\n        this.clearSession();\n        return false;\n      }\n      return true;\n    }\n\n    if (this.sessionActive) {\n      if (this.expiresAt && new Date(this.expiresAt) <= new Date()) {\n        this.clearSession();\n        return false;\n      }\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Ottieni utente corrente\n   */\n  getCurrentUser() {\n    return this.currentUser;\n  }\n\n  /**\n   * Prova a ripristinare una sessione attiva utilizzando cookie/token\n   */\n  async restoreSession() {\n    try {\n      const response = await this.makeRequest('profile', {\n        skipAuthErrorHandling: true,\n      });\n\n      if (!response) {\n        this.clearSession();\n        return { success: false };\n      }\n\n      const user = response.user || response.profile || response.data || null;\n\n      if (!user) {\n        this.clearSession();\n        return { success: false };\n      }\n\n      this.currentUser = user;\n      this.sessionActive = true;\n\n      if (response.token) {\n        this.setToken(response.token);\n      }\n\n      if (response.expires_at) {\n        this.expiresAt = response.expires_at;\n      }\n\n      this.saveSessionToStorage();\n\n      return { success: true, user };\n\n    } catch (error) {\n      if (error instanceof ApiError && error.statusCode === 401) {\n        this.clearSession();\n        return { success: false };\n      }\n\n      throw error;\n    }\n  }\n\n  /**\n   * Cambia password\n   */\n  async changePassword(currentPassword, newPassword) {\n    return await this.makeRequest('change-password', {\n      method: 'POST',\n      body: JSON.stringify({\n        current_password: currentPassword,\n        new_password: newPassword\n      }),\n    });\n  }\n\n  // ================================\n  // FILE MANAGEMENT METHODS\n  // ================================\n\n  /**\n   * Carica tutti i file dal server\n   */\n  async loadFiles() {\n    try {\n      const response = await this.makeRequest('uploads');\n      logDebug('📁 Files loaded from server:', response.files?.length || 0);\n      return response.files || [];\n    } catch (error) {\n      logError('❌ Error loading files:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Carica dati completi di un file specifico\n   */\n  async getFileData(fileDate) {\n    try {\n      const response = await this.makeRequest(`file-data/${fileDate}`);\n      logDebug(`📊 File data loaded for ${fileDate}:`, response);\n      return response;\n    } catch (error) {\n      logError(`❌ Error loading file data for ${fileDate}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Salva/aggiorna un file sul server\n   */\n  async saveFile(fileData) {\n    try {\n      logDebug('💾 Saving file:', fileData.name, fileData.date);\n      \n      const response = await this.makeRequest('uploads', {\n        method: 'POST',\n        body: JSON.stringify({ fileData }),\n      });\n\n      const success = response?.success === true;\n      const action = response?.action ?? (success ? 'created' : undefined);\n\n      if (!success) {\n        const errorMessage = response?.error || 'Impossibile salvare il file';\n        throw new ApiError(errorMessage, response?.statusCode ?? 500, response);\n      }\n\n      const result = { success, action };\n\n      logDebug('✅ File saved successfully:', result);\n      return result;\n    } catch (error) {\n      logError('❌ Error saving file:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Elimina un file dal server\n   */\n  async deleteFile(fileDate) {\n    try {\n      logDebug(`🗑️ Deleting file: ${fileDate}`);\n      \n      const response = await this.makeRequest(`uploads/${fileDate}`, {\n        method: 'DELETE',\n      });\n      \n      logDebug('✅ File deleted successfully:', response);\n      return response;\n    } catch (error) {\n      logError(`❌ Error deleting file ${fileDate}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Carica un file Excel con FormData (per upload con file binario)\n   */\n  async uploadFile(file, parsedData) {\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('data', JSON.stringify(parsedData));\n      \n      logDebug('📤 Uploading file:', file.name);\n      \n      const response = await this.makeRequest('upload-file', {\n        method: 'POST',\n        body: formData,\n        headers: {\n          // Non impostare Content-Type per FormData - il browser lo fa automaticamente\n          ...this.getAuthHeaders()\n        }\n      });\n      \n      logDebug('✅ File uploaded successfully:', response);\n      return response;\n    } catch (error) {\n      logError('❌ Error uploading file:', error);\n      throw error;\n    }\n  }\n\n  // ================================\n  // DASHBOARD METHODS\n  // ================================\n\n  /**\n   * Ottieni statistiche dashboard generali\n   */\n  async getDashboardStats() {\n    try {\n      const response = await this.makeRequest('dashboard/stats');\n      logDebug('📈 Dashboard stats loaded:', response);\n      return response;\n    } catch (error) {\n      logError('❌ Error loading dashboard stats:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Ottieni statistiche per un periodo specifico\n   */\n  async getStatsForPeriod(startDate, endDate) {\n    try {\n      const response = await this.makeRequest(`stats/period?start=${startDate}&end=${endDate}`);\n      logDebug(`📊 Period stats loaded (${startDate} - ${endDate}):`, response);\n      return response;\n    } catch (error) {\n      logError('❌ Error loading period stats:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Ottieni ranking SM\n   */\n  async getSMRanking(fileDate = null) {\n    try {\n      const endpoint = fileDate ? `sm-ranking/${fileDate}` : 'sm-ranking';\n      const response = await this.makeRequest(endpoint);\n      logDebug('🏅 SM ranking loaded:', response);\n      return response;\n    } catch (error) {\n      logError('❌ Error loading SM ranking:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Ottieni dettagli agenti\n   */\n  async getAgentsDetails(fileDate = null) {\n    try {\n      const endpoint = fileDate ? `agents/${fileDate}` : 'agents';\n      const response = await this.makeRequest(endpoint);\n      logDebug('👥 Agents details loaded:', response);\n      return response;\n    } catch (error) {\n      logError('❌ Error loading agents details:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Ottieni analisi prodotti\n   */\n  async getProductsAnalysis(fileDate = null) {\n    try {\n      const endpoint = fileDate ? `products/${fileDate}` : 'products';\n      const response = await this.makeRequest(endpoint);\n      logDebug('📦 Products analysis loaded:', response);\n      return response;\n    } catch (error) {\n      logError('❌ Error loading products analysis:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Ottieni dati nuovi clienti\n   */\n  async getNewClientsData(fileDate = null) {\n    try {\n      const endpoint = fileDate ? `new-clients/${fileDate}` : 'new-clients';\n      const response = await this.makeRequest(endpoint);\n      logDebug('🆕 New clients data loaded:', response);\n      return response;\n    } catch (error) {\n      logError('❌ Error loading new clients data:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Ottieni dati Fastweb Energia\n   */\n  async getFastwebData(fileDate = null) {\n    try {\n      const endpoint = fileDate ? `fastweb/${fileDate}` : 'fastweb';\n      const response = await this.makeRequest(endpoint);\n      logDebug('⚡ Fastweb data loaded:', response);\n      return response;\n    } catch (error) {\n      logError('❌ Error loading Fastweb data:', error);\n      throw error;\n    }\n  }\n\n  // ================================\n  // USER PROFILE METHODS\n  // ================================\n\n  /**\n   * Ottieni profilo utente\n   */\n  async getUserProfile() {\n    try {\n      const response = await this.makeRequest('profile');\n      logDebug('👤 User profile loaded:', response);\n      return response;\n    } catch (error) {\n      logError('❌ Error loading user profile:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Aggiorna profilo utente\n   */\n  async updateUserProfile(profileData) {\n    try {\n      const response = await this.makeRequest('profile', {\n        method: 'PUT',\n        body: JSON.stringify(profileData),\n      });\n      logDebug('✅ User profile updated:', response);\n      return response;\n    } catch (error) {\n      logError('❌ Error updating user profile:', error);\n      throw error;\n    }\n  }\n\n  // ================================\n  // UTILITY METHODS\n  // ================================\n\n  /**\n   * Test connessione API (health check)\n   */\n  async healthCheck() {\n    try {\n      const response = await this.makeRequest('health');\n      logDebug('💚 API health check passed:', response);\n      return response;\n    } catch (error) {\n      logError('❤️‍🩹 API health check failed:', error);\n      return { success: false, error: error.message };\n    }\n  }\n\n  /**\n   * Ottieni versione API e info sistema\n   */\n  async getSystemInfo() {\n    try {\n      const response = await this.makeRequest('system-info');\n      logDebug('ℹ️ System info loaded:', response);\n      return response;\n    } catch (error) {\n      logError('❌ Error loading system info:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Cleanup sistema (solo admin)\n   */\n  async cleanup() {\n    try {\n      const response = await this.makeRequest('cleanup', {\n        method: 'POST',\n      });\n      logDebug('🧹 System cleanup completed:', response);\n      return response;\n    } catch (error) {\n      logError('❌ Error during system cleanup:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Download backup dati completo (client-side)\n   */\n  async exportData() {\n    try {\n      logDebug('📥 Starting data export...');\n      \n      const files = await this.loadFiles();\n      const fullData = {};\n\n      // Carica dati completi per ogni file in parallelo\n      const filePromises = files.map(async (file) => {\n        try {\n          const fileData = await this.getFileData(file.file_date);\n          return {\n            key: file.file_date,\n            value: {\n              fileInfo: {\n                name: file.file_name,\n                displayDate: file.display_date,\n                uploadDate: file.upload_date,\n                size: file.file_size\n              },\n              ...fileData\n            }\n          };\n        } catch (error) {\n          logWarn(`⚠️ Errore caricamento file ${file.file_date}:`, error);\n          return null;\n        }\n      });\n\n      const fileResults = await Promise.all(filePromises);\n\n      for (const result of fileResults) {\n        if (result) {\n          fullData[result.key] = result.value;\n        }\n      }\n      \n      const exportData = {\n        exportDate: new Date().toISOString(),\n        version: '1.0.0',\n        files: fullData,\n        metadata: {\n          totalFiles: files.length,\n          exportedBy: this.getCurrentUser()?.username\n        }\n      };\n      \n      // Crea e scarica file JSON\n      const blob = new Blob([JSON.stringify(exportData, null, 2)], {\n        type: 'application/json'\n      });\n      \n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `rush-dashboard-backup-${new Date().toISOString().split('T')[0]}.json`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n      \n      logDebug('✅ Data export completed successfully');\n      return { success: true, message: 'Export completato con successo' };\n      \n    } catch (error) {\n      logError('❌ Error during data export:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Import dati da backup JSON\n   */\n  async importData(backupFile) {\n    try {\n      logDebug('📤 Starting data import...');\n      \n      const formData = new FormData();\n      formData.append('backup', backupFile);\n      \n      const response = await this.makeRequest('import', {\n        method: 'POST',\n        body: formData,\n        headers: {\n          ...this.getAuthHeaders()\n        }\n      });\n      \n      logDebug('✅ Data import completed:', response);\n      return response;\n      \n    } catch (error) {\n      logError('❌ Error during data import:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Ottieni logs attività (solo admin)\n   */\n  async getActivityLogs(limit = 100, offset = 0) {\n    try {\n      const response = await this.makeRequest(`logs?limit=${limit}&offset=${offset}`);\n      logDebug('📋 Activity logs loaded:', response);\n      return response;\n    } catch (error) {\n      logError('❌ Error loading activity logs:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Cerca nei dati\n   */\n  async search(query, filters = {}) {\n    try {\n      const response = await this.makeRequest('search', {\n        method: 'POST',\n        body: JSON.stringify({ query, filters }),\n      });\n      logDebug('🔍 Search completed:', response);\n      return response;\n    } catch (error) {\n      logError('❌ Error during search:', error);\n      throw error;\n    }\n  }\n\n  // ================================\n  // ADMIN METHODS\n  // ================================\n\n  /**\n   * Ottieni tutti gli utenti (solo admin)\n   */\n  async getUsers() {\n    const response = await this.makeRequest('users');\n    // Il backend ora restituisce correttamente un oggetto con una chiave 'users'.\n    if (response && Array.isArray(response.users)) {\n      return response.users;\n    }\n    // Fallback per risposte non valide o vuote.\n    return [];\n  }\n\n  /**\n   * Aggiorna il ruolo di un utente (solo admin)\n   */\n  async updateUserRole(userId, role) {\n    return await this.makeRequest(`users/${userId}/role`, {\n      method: 'PUT',\n      body: JSON.stringify({ role }),\n    });\n  }\n\n  /**\n   * Aggiorna la password di un utente (solo admin)\n   */\n  async adminUpdateUserPassword(userId, newPassword) {\n    return await this.makeRequest(`users/${userId}/password`, {\n      method: 'PUT',\n      body: JSON.stringify({ new_password: newPassword }),\n    });\n  }\n\n  /**\n   * Crea un nuovo utente (solo admin)\n   */\n  async createUser(userData) {\n    return await this.makeRequest('users', {\n      method: 'POST',\n      body: JSON.stringify(userData),\n    });\n  }\n\n  /**\n   * Elimina un utente (solo admin)\n   */\n  async deleteUser(userId) {\n    return await this.makeRequest(`users/${userId}`, {\n      method: 'DELETE',\n    });\n  }\n\n\n  // ================================\n  // BATCH OPERATIONS\n  // ================================\n\n  /**\n   * Operazioni batch su più file\n   */\n  async batchOperation(operation, fileIds, options = {}) {\n    try {\n      const response = await this.makeRequest('batch', {\n        method: 'POST',\n        body: JSON.stringify({\n          operation,\n          fileIds,\n          options\n        }),\n      });\n      logDebug(`✅ Batch operation '${operation}' completed:`, response);\n      return response;\n    } catch (error) {\n      logError(`❌ Error during batch operation '${operation}':`, error);\n      throw error;\n    }\n  }\n}\n\n// Crea istanza singleton\nexport const apiService = new ApiService();\n","// src/utils/excelParser.js - PARSER COMPLETAMENTE DINAMICO E ROBUSTO\n\nimport * as XLSX from 'xlsx';\n\n/**\n * 🎯 MAPPATURA DINAMICA BASATA SUI NOMI DEGLI HEADER\n * Questo sistema cerca le colonne in base al CONTENUTO dell'header, non alla posizione\n */\nconst DYNAMIC_FIELD_PATTERNS = {\n  // Identificatori agente (OBBLIGATORI)\n  'AGENTE': {\n    patterns: ['nome agente', 'agente', 'nome', 'cognome agente', 'consulente'],\n    required: true,\n    description: 'Nome/Cognome dell\\'agente'\n  },\n  'SM': {\n    patterns: ['sm', 'sales manager', 'coordinatore', 'coord', 'manager'],\n    required: true,\n    description: 'Sales Manager / Coordinatore'\n  },\n  'DISTRETTO': {\n    patterns: ['distretto'],\n    required: false,\n    description: 'Distretto di appartenenza'\n  },\n  \n  // Metriche finanziarie (OBBLIGATORIE)\n  'FATTURATO_RUSH': {\n    patterns: ['fatturato rush', 'rush fatturato', 'fat rush'], // Rimosso 'fatturato' generico\n    required: true,\n    description: 'Fatturato Rush dell\\'agente'\n  },\n  'FATTURATO_COMPLESSIVO': {\n    patterns: ['fatturato complessivo', 'fatturato totale', 'totale fatturato'], // Rimosso 'fatturato agente'\n    required: true,\n    description: 'Fatturato Complessivo dell\\'agente'\n  },\n  'BONUS_RISULTATI': {\n    patterns: ['importo totale'],\n    required: false,\n    description: 'Bonus economico per risultati'\n  },\n  \n  // Prodotti voce (opzionali ma importanti)\n  'SIM_VOCE': {\n    patterns: ['sim voce totali', 'sim voce'],\n    required: false,\n    description: 'Contratti SIM Voce'\n  },\n  'SIM_DATI': {\n    patterns: ['sim dati totali', 'sim dati'],\n    required: false,\n    description: 'Contratti SIM Dati'\n  },\n  'MNP': {\n    patterns: ['sim mnp voce', 'mnp'],\n    required: false,\n    description: 'Contratti MNP'\n  },\n\n  // Nuovi campi prodotti e fatturati specifici\n  'EASY_RENT': { patterns: ['easy rent'], required: false, description: 'Contratti Easy Rent' },\n  'LINK_OU': { patterns: ['link ou'], required: false, description: 'Contratti Link OU' },\n  'LINK_OA': { patterns: ['link oa'], required: false, description: 'Contratti Link OA' },\n  'LINK_OA_START': { patterns: ['link oa start'], required: false, description: 'Contratti Link OA Start' },\n  'INTERNI_OA': { patterns: ['interni oa'], required: false, description: 'Contratti Interni OA' },\n  'FATTURATO_VOCE': { patterns: ['fatturato voce'], required: false, description: 'Fatturato Voce' },\n  'FATTURATO_DATI': { patterns: ['fatturato dati'], required: false, description: 'Fatturato Dati' },\n  'FATTURATO_EASY_RENT': { patterns: ['fatturato easy rent'], required: false, description: 'Fatturato Easy Rent' },\n  'FATTURATO_OU': { patterns: ['fatturato ou'], required: false, description: 'Fatturato OU' },\n  'FATTURATO_OA': { patterns: ['fatturato oa'], required: false, description: 'Fatturato OA' },\n  'FATTURATO_EASY_DEAL': { patterns: ['fatturato easy e complex deal'], required: false, description: 'Fatturato Easy & Complex Deal' },\n  'FATTURATO_ALTRO': { patterns: ['fatturato altro'], required: false, description: 'Fatturato Altro' },\n  'FATTURATO_SERVIZI_DIGITALI': { patterns: ['fatturato servizi digitali'], required: false, description: 'Fatturato Servizi Digitali' },\n  'FATTURATO_CUSTOM': { patterns: ['fatturato custom'], required: false, description: 'Fatturato Custom' },\n  'SDM': { patterns: ['sdm'], required: false, description: 'Contratti SDM' },\n  'FATTURATO_SDM': { patterns: ['fatturato sdm'], required: false, description: 'Fatturato SDM' },\n  'SSC': { patterns: ['ssc'], required: false, description: 'Contratti SSC' },\n  'FATTURATO_SSC': { patterns: ['fatturato ssc'], required: false, description: 'Fatturato SSC' },\n  'YOUR_BACKUP': { patterns: ['your backup'], required: false, description: 'Contratti Your Backup' },\n  'FATTURATO_YOUR_BACKUP': { patterns: ['inflow your backup'], required: false, description: 'Fatturato Your Backup' },\n  'CLOUD_NAS': { patterns: ['cloud nas'], required: false, description: 'Contratti Cloud NAS' },\n  'FATTURATO_CLOUD_NAS': { patterns: ['inflow cloud nas'], required: false, description: 'Fatturato Cloud NAS' },\n  'EASY_GDPR': { patterns: ['easy gdpr'], required: false, description: 'Contratti Easy GDPR' },\n  'FATTURATO_EASY_GDPR': { patterns: ['fatturato easy gdpr'], required: false, description: 'Fatturato Easy GDPR' },\n  'MIIA': { patterns: ['miia'], required: false, description: 'Contratti MIIA' },\n  'FATTURATO_MIIA': { patterns: ['inflow miia'], required: false, description: 'Fatturato MIIA' },\n  'FATTURATO_NUOVO_CLIENTE': { patterns: ['fatturato nuovo cliente'], required: false, description: 'Fatturato Nuovo Cliente' },\n  'BSALES_MOBILE': { patterns: ['bsales mobile'], required: false, description: 'Contratti Bsales Mobile' },\n  'PDA_DIGITALE': { patterns: ['pda digitale'], required: false, description: 'Contratti PDA Digitale' },\n  \n  // Prodotti dati\n  'ADSL': {\n    patterns: ['adsl', 'adsl casa', 'internet casa'],\n    required: false,\n    description: 'Contratti ADSL'\n  },\n  'FIBRA': {\n    patterns: ['fibra', 'ftth', 'fibra ottica', 'fibra casa'],\n    required: false,\n    description: 'Contratti Fibra'\n  },\n  'FIBRA_BUSINESS': {\n    patterns: ['fibra business', 'fibra aziendale', 'ftth business'],\n    required: false,\n    description: 'Contratti Fibra Business'\n  },\n  \n  // Prodotti energia\n  \n  // Nuovi clienti e station\n  'NUOVO_CLIENTE': {\n    patterns: ['nuovo cliente', 'nuovi clienti', 'nc', 'new customers', 'clienti nuovi'],\n    required: false,\n    description: 'Nuovi Clienti acquisiti'\n  },\n  'STATION': {\n    patterns: ['station', 'tim station', 'negozi'],\n    required: false,\n    description: 'Contratti via Station'\n  },\n  \n  // Fastweb\n  'FASTWEB_ENERGIA': {\n    patterns: ['fastweb energia', 'fw energia', 'fastweb luce gas'],\n    required: false,\n    description: 'Contratti Fastweb Energia'\n  },\n  \n  // Altri campi utili\n  'TOTALE_PEZZI': {\n    patterns: ['totale pezzi', 'pezzi totali', 'tot pezzi', 'pieces'],\n    required: false,\n    description: 'Totale contratti/pezzi'\n  },\n  'NUMERO': {\n    patterns: ['n.', 'numero', 'n', '#', 'id'],\n    required: false,\n    description: 'Numero identificativo'\n  }\n};\n\n/**\n * 🔍 TROVA LA RIGA HEADER AUTOMATICAMENTE\n * Cerca la riga che contiene più keywords tipiche degli header\n */\nfunction findHeaderRow(worksheet) {\n  const range = XLSX.utils.decode_range(worksheet['!ref'] || 'A1:A1');\n  const headerKeywords = ['agente', 'nome', 'fatturato', 'rush', 'sm', 'coordinatore', 'inflow'];\n  \n  let bestRow = -1;\n  let bestScore = 0;\n  \n  // Controlla le prime 15 righe per trovare gli header\n  for (let row = 0; row <= Math.min(15, range.e.r); row++) {\n    let score = 0;\n    let cellCount = 0;\n    \n    for (let col = 0; col <= Math.min(50, range.e.c); col++) {\n      const cellRef = XLSX.utils.encode_cell({r: row, c: col});\n      const cell = worksheet[cellRef];\n      \n      if (cell && cell.v !== undefined && cell.v !== '') {\n        cellCount++;\n        const cellText = cell.v.toString().toLowerCase();\n        \n        // Conta quante keywords header sono presenti\n        for (const keyword of headerKeywords) {\n          if (cellText.includes(keyword)) {\n            score += 10;\n          }\n        }\n        \n        // Bonus se la cella sembra un header tipico\n        if (cellText.length > 2 && cellText.length < 35) {\n          score += 1;\n        }\n      }\n    }\n    \n    // Normalizza il punteggio e considera solo righe con almeno 5 header\n    if (cellCount > 5) {\n      const normalizedScore = score + cellCount;\n      if (normalizedScore > bestScore) {\n        bestScore = normalizedScore;\n        bestRow = row;\n      }\n    }\n  }\n  \n  if (bestRow === -1) {\n    throw new Error('Impossibile trovare una riga di header valida nel file.');\n  }\n\n  console.log(`✅ Riga header selezionata dinamicamente: ${bestRow + 1} (punteggio: ${bestScore})`);\n  return bestRow;\n}\n\n/**\n * 🎯 MAPPATURA INTELLIGENTE CON FUZZY MATCHING\n * Trova le colonne anche con piccole variazioni nei nomi\n */\nfunction createIntelligentMapping(worksheet, headerRow) {\n  const range = XLSX.utils.decode_range(worksheet['!ref'] || 'A1:A1');\n  const mapping = {};\n  const availableColumns = [];\n  const missingColumns = [];\n  const warnings = [];\n  \n  // Estrai tutti gli header disponibili\n  const headers = [];\n  for (let col = 0; col <= range.e.c; col++) {\n    const cellRef = XLSX.utils.encode_cell({r: headerRow, c: col});\n    const cell = worksheet[cellRef];\n    if (cell && cell.v !== undefined && cell.v !== '') {\n      const colLetter = XLSX.utils.encode_col(col);\n      const headerText = cell.v.toString().trim();\n      headers.push({ col: colLetter, name: headerText, normalized: headerText.toLowerCase() });\n      availableColumns.push(`${colLetter}: ${headerText}`);\n    }\n  }\n  \n  console.log(`📋 Trovati ${headers.length} header nel file`);\n  \n  const mappedHeaders = new Set();\n\n  // Fase 1: Cerca corrispondenze esatte per la massima precisione\n  for (const [fieldKey, fieldConfig] of Object.entries(DYNAMIC_FIELD_PATTERNS)) {\n    for (const header of headers) {\n      if (mappedHeaders.has(header.col)) continue; // Salta header già mappato\n\n      for (const pattern of fieldConfig.patterns) {\n        if (header.normalized === pattern.toLowerCase()) {\n          mapping[fieldKey] = header.col;\n          mappedHeaders.add(header.col);\n          console.log(`✅ [EXACT] ${fieldKey} → ${header.col} (\"${header.name}\")`);\n          break; // Trovato, passa al campo successivo\n        }\n      }\n      if (mapping[fieldKey]) break; // Trovato, passa al campo successivo\n    }\n  }\n\n  // Fase 2: Cerca corrispondenze parziali per i campi non ancora mappati\n  for (const [fieldKey, fieldConfig] of Object.entries(DYNAMIC_FIELD_PATTERNS)) {\n    if (mapping[fieldKey]) continue; // Salta i campi già mappati\n\n    let bestMatch = null;\n    let bestScore = 0;\n\n    for (const header of headers) {\n      if (mappedHeaders.has(header.col)) continue;\n\n      for (const pattern of fieldConfig.patterns) {\n        let score = 0;\n        const normalizedPattern = pattern.toLowerCase();\n\n        // Evita che \"fatturato\" matchi \"fatturato complessivo\"\n        if (fieldKey === 'FATTURATO_RUSH' && header.normalized.includes('complessivo')) {\n            continue;\n        }\n\n        if (header.normalized.includes(normalizedPattern)) {\n          // Privilegia i match più lunghi e specifici\n          score = 80 + normalizedPattern.length;\n        } else if (normalizedPattern.includes(header.normalized)) {\n          score = 60 + header.normalized.length;\n        }\n\n        if (score > bestScore) {\n          bestScore = score;\n          bestMatch = header;\n        }\n      }\n    }\n\n    if (bestMatch) {\n      mapping[fieldKey] = bestMatch.col;\n      mappedHeaders.add(bestMatch.col);\n      console.log(`✅ [PARTIAL] ${fieldKey} → ${bestMatch.col} (\"${bestMatch.name}\") [score: ${bestScore}]`);\n    } else {\n      if (fieldConfig.required) {\n        missingColumns.push({\n          field: fieldKey,\n          patterns: fieldConfig.patterns,\n          required: true,\n          description: fieldConfig.description\n        });\n        console.warn(`❌ OBBLIGATORIO MANCANTE: ${fieldKey}`);\n      } else {\n        warnings.push({\n          field: fieldKey,\n          patterns: fieldConfig.patterns,\n          required: false,\n          description: fieldConfig.description\n        });\n        console.log(`⚠️ Opzionale mancante: ${fieldKey} (sarà 0)`);\n      }\n    }\n  }\n  \n  return { \n    mapping, \n    missingColumns, \n    warnings, \n    availableColumns,\n    totalColumns: headers.length \n  };\n}\n\n/**\n * 📊 PARSING DINAMICO DI UNA RIGA AGENTE\n */\nfunction parseAgentRow(worksheet, row, mapping) {\n  const getColumnValue = (fieldKey, expectedType = 'auto') => {\n    const column = mapping[fieldKey];\n    if (!column) return expectedType === 'number' ? 0 : '';\n    \n    const cellRef = `${column}${row + 1}`;\n    const cell = worksheet[cellRef];\n    return cleanCellValue(cell, expectedType);\n  };\n  \n  const agent = {};\n  \n  // Campi base (obbligatori)\n  agent.nome = getColumnValue('AGENTE', 'string');\n  agent.sm = getColumnValue('SM', 'string');\n  agent.distretto = getColumnValue('DISTRETTO', 'string');\n  \n  // 🔧 FIX: Metriche finanziarie con calcolo corretto\n  agent.fatturatoRush = getColumnValue('FATTURATO_RUSH', 'number');\n  agent.bonusRisultati = getColumnValue('BONUS_RISULTATI', 'number');\n  \n  // ⭐️ NUOVA STRUTTURA DATI PER IL FRONTEND (basata sui requisiti)\n  agent.fatturato = {\n    complessivo: getColumnValue('FATTURATO_COMPLESSIVO', 'number')\n  };\n\n  // Prodotti voce\n  agent.simVoce = getColumnValue('SIM_VOCE', 'number');\n  \n  // Prodotti dati\n  agent.adsl = getColumnValue('ADSL', 'number');\n  agent.simDati = getColumnValue('SIM_DATI', 'number');\n  agent.fibra = getColumnValue('FIBRA', 'number');\n  agent.fibraBusiness = getColumnValue('FIBRA_BUSINESS', 'number');\n  \n  // Prodotti energia\n  agent.fastwebEnergia = getColumnValue('FASTWEB_ENERGIA', 'number');\n  \n  // Altri\n  agent.nuovoCliente = getColumnValue('NUOVO_CLIENTE', 'number');\n  agent.station = getColumnValue('STATION', 'number');\n  agent.mnp = getColumnValue('MNP', 'number');\n  \n  // Altri campi opzionali\n  agent.totalePezzi = getColumnValue('TOTALE_PEZZI', 'number');\n  agent.numero = getColumnValue('NUMERO', 'string');\n\n  // Nuovi campi aggiunti\n  agent.easyRent = getColumnValue('EASY_RENT', 'number');\n  agent.linkOu = getColumnValue('LINK_OU', 'number');\n  agent.linkOa = getColumnValue('LINK_OA', 'number');\n  agent.linkOaStart = getColumnValue('LINK_OA_START', 'number');\n  agent.interniOa = getColumnValue('INTERNI_OA', 'number');\n  agent.fatturatoVoce = getColumnValue('FATTURATO_VOCE', 'number');\n  agent.fatturatoDati = getColumnValue('FATTURATO_DATI', 'number');\n  agent.fatturatoEasyRent = getColumnValue('FATTURATO_EASY_RENT', 'number');\n  agent.fatturatoOu = getColumnValue('FATTURATO_OU', 'number');\n  agent.fatturatoOa = getColumnValue('FATTURATO_OA', 'number');\n  agent.fatturatoEasyDeal = getColumnValue('FATTURATO_EASY_DEAL', 'number');\n  agent.fatturatoAltro = getColumnValue('FATTURATO_ALTRO', 'number');\n  agent.fatturatoServiziDigitali = getColumnValue('FATTURATO_SERVIZI_DIGITALI', 'number');\n  agent.fatturatoCustom = getColumnValue('FATTURATO_CUSTOM', 'number');\n  agent.sdm = getColumnValue('SDM', 'number');\n  agent.fatturatoSdm = getColumnValue('FATTURATO_SDM', 'number');\n  agent.ssc = getColumnValue('SSC', 'number');\n  agent.fatturatoSsc = getColumnValue('FATTURATO_SSC', 'number');\n  agent.yourBackup = getColumnValue('YOUR_BACKUP', 'number');\n  agent.fatturatoYourBackup = getColumnValue('FATTURATO_YOUR_BACKUP', 'number');\n  agent.cloudNas = getColumnValue('CLOUD_NAS', 'number');\n  agent.fatturatoCloudNas = getColumnValue('FATTURATO_CLOUD_NAS', 'number');\n  agent.easyGdpr = getColumnValue('EASY_GDPR', 'number');\n  agent.fatturatoEasyGdpr = getColumnValue('FATTURATO_EASY_GDPR', 'number');\n  agent.miia = getColumnValue('MIIA', 'number');\n  agent.fatturatoMiia = getColumnValue('FATTURATO_MIIA', 'number');\n  agent.fatturatoNuovoCliente = getColumnValue('FATTURATO_NUOVO_CLIENTE', 'number');\n  agent.bsalesMobile = getColumnValue('BSALES_MOBILE', 'number');\n  agent.pdaDigitale = getColumnValue('PDA_DIGITALE', 'number');\n  \n  // 🔧 FIX: Calcoli derivati corretti\n  agent.totaleVoce = agent.simVoce; // Aggiornato dopo rimozione di casa e business\n  agent.totaleDati = agent.adsl + agent.fibra + agent.fibraBusiness + agent.simDati;\n  agent.totaleFastweb = agent.fastwebEnergia; // Aggiornato dopo rimozione di altri campi fastweb\n\n  // Calcolo aggregato di tutti i nuovi fatturati per prodotto/servizio\n  agent.fatturatoProdotti =\n    agent.fatturatoVoce +\n    agent.fatturatoDati +\n    agent.fatturatoEasyRent +\n    agent.fatturatoOu +\n    agent.fatturatoOa +\n    agent.fatturatoEasyDeal +\n    agent.fatturatoAltro +\n    agent.fatturatoServiziDigitali +\n    agent.fatturatoCustom +\n    agent.fatturatoSdm +\n    agent.fatturatoSsc +\n    agent.fatturatoYourBackup +\n    agent.fatturatoCloudNas +\n    agent.fatturatoEasyGdpr +\n    agent.fatturatoMiia +\n    agent.fatturatoNuovoCliente;\n  \n  return agent;\n}\n\n/**\n * 🛠️ UTILITY FUNCTIONS\n */\nfunction columnToIndex(column) {\n  let result = 0;\n  for (let i = 0; i < column.length; i++) {\n    result = result * 26 + (column.charCodeAt(i) - 'A'.charCodeAt(0) + 1);\n  }\n  return result - 1;\n}\n\nfunction extractDateFromFilename(filename) {\n  // Pattern per data nel formato YYYY.MM.DD\n  const dateMatch = filename.match(/(\\d{4})\\.(\\d{2})\\.(\\d{2})/);\n  if (!dateMatch) {\n    throw new Error('Nome file non valido. Formato atteso: YYYY.MM.DD');\n  }\n  \n  const year = parseInt(dateMatch[1]);\n  const month = parseInt(dateMatch[2]);\n  const day = parseInt(dateMatch[3]);\n  \n  return {\n    year,\n    month,\n    day,\n    dateString: `${dateMatch[1]}-${dateMatch[2]}-${dateMatch[3]}`,\n    displayDate: `${month}/${year}`\n  };\n}\n\nfunction cleanCellValue(cell, expectedType = 'auto') {\n  if (!cell || cell.v === undefined || cell.v === null || cell.v === '') {\n    return expectedType === 'number' ? 0 : '';\n  }\n  \n  let value = cell.v;\n  \n  if (expectedType === 'number') {\n    if (typeof value === 'number') return value;\n    if (typeof value === 'string') {\n      // Rimuovi simboli di valuta e separatori, mantenendo la virgola per i decimali\n      value = value.toString().replace(/[€$.\\s]/g, '').replace(',', '.');\n      const parsed = parseFloat(value);\n      return isNaN(parsed) ? 0 : parsed;\n    }\n    return 0;\n  }\n  \n  if (expectedType === 'string') {\n    return value.toString().trim();\n  }\n  \n  // Auto-detect\n  if (typeof value === 'number') return value;\n  return value.toString().trim();\n}\n\n/**\n * 💰 UTILITY FUNCTIONS - Formattazione e Ordinamento\n */\nexport function formatCurrency(value) {\n  if (!value || isNaN(value)) return '€0';\n  return new Intl.NumberFormat('it-IT', {\n    style: 'currency',\n    currency: 'EUR',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0\n  }).format(value);\n}\n\nexport function formatNumber(value) {\n  if (!value || isNaN(value)) return '0';\n  return new Intl.NumberFormat('it-IT', {\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0\n  }).format(value);\n}\n\n/**\n * 📅 ORDINAMENTO FILE PER DATA NEL NOME (non data upload)\n */\nexport function sortFilesByDate(files) {\n  return [...files].sort((a, b) => {\n    try {\n      // Estrai la data dal nome del file o usa la proprietà date\n      const dateA = a.date || extractDateFromFilename(a.name).dateString;\n      const dateB = b.date || extractDateFromFilename(b.name).dateString;\n      \n      // Ordina dal più recente al più vecchio\n      return new Date(dateB) - new Date(dateA);\n    } catch (error) {\n      console.warn('Errore nell\\'ordinamento dei file:', error);\n      // Fallback: ordina per nome\n      return b.name.localeCompare(a.name);\n    }\n  });\n}\n\n/**\n * 🚀 PARSING PRINCIPALE - DINAMICO E INTELLIGENTE\n */\nexport async function parseExcelFile(file, userMapping = null) {\n  try {\n    console.log('🔄 Inizio parsing dinamico:', file.name);\n    \n    // Estrai data dal nome file\n    const dateInfo = extractDateFromFilename(file.name);\n    console.log('📅 Data estratta:', dateInfo);\n    \n    // Leggi il file Excel\n    const arrayBuffer = await file.arrayBuffer();\n    const workbook = XLSX.read(arrayBuffer, { type: 'array' });\n    \n    if (!workbook.SheetNames.length) {\n      throw new Error('Il file Excel non contiene fogli di lavoro');\n    }\n    \n    const worksheet = workbook.Sheets[workbook.SheetNames[0]];\n    console.log('📊 Foglio selezionato:', workbook.SheetNames[0]);\n    \n    // 🔍 Trova automaticamente la riga header\n    const headerRow = findHeaderRow(worksheet);\n    \n    // 🧠 Crea mappatura intelligente\n    const { mapping, missingColumns, warnings, availableColumns, totalColumns } = \n      createIntelligentMapping(worksheet, headerRow);\n    \n    console.log('🎯 Mappatura creata:', Object.keys(mapping).length, 'campi mappati');\n    console.log('⚠️ Campi mancanti obbligatori:', missingColumns.length);\n    console.log('💡 Campi opzionali mancanti:', warnings.length);\n    \n    // 🚨 CONTROLLO ERRORI CRITICI\n    if (missingColumns.length > 0) {\n      const criticalMissing = missingColumns.map(c => c.field).join(', ');\n      console.error('❌ CAMPI OBBLIGATORI MANCANTI:', criticalMissing);\n      \n      return {\n        success: false,\n        needsMapping: true,\n        error: `Campi obbligatori mancanti: ${criticalMissing}`,\n        missingColumns,\n        availableColumns,\n        totalColumns\n      };\n    }\n    \n    // Parsa i dati\n    const range = XLSX.utils.decode_range(worksheet['!ref'] || 'A1:A1');\n    const agents = [];\n    const smStats = new Map();\n    \n    console.log('🏁 Parsing righe da', headerRow + 1, 'a', range.e.r);\n    \n    for (let row = headerRow + 1; row <= range.e.r; row++) {\n      try {\n        // Controlla se la riga ha dati (colonna agente)\n        const agentCol = mapping['AGENTE'];\n        if (!agentCol) continue;\n        \n        const agentCell = worksheet[XLSX.utils.encode_cell({r: row, c: columnToIndex(agentCol)})];\n        if (!agentCell || !agentCell.v || agentCell.v.toString().trim() === '') {\n          continue;\n        }\n        \n        // Parsa la riga\n        const agent = parseAgentRow(worksheet, row, mapping);\n        \n        // Validazione\n        if (!agent.nome || agent.nome.trim() === '') continue;\n        if (!agent.sm || agent.sm.trim() === '') continue;\n        \n        agents.push(agent);\n        \n        // Accumula statistiche SM\n        if (!smStats.has(agent.sm)) {\n          smStats.set(agent.sm, {\n            nome: agent.sm,\n            agenti: [],\n            fatturatoTotale: 0,\n            fatturatoRush: 0,\n            nuovoCliente: 0,\n            totaleFastweb: 0\n          });\n        }\n        \n        const smData = smStats.get(agent.sm);\n        smData.agenti.push(agent);\n        smData.fatturatoTotale += agent.fatturato.complessivo;\n        smData.fatturatoRush += agent.fatturatoRush;\n        smData.nuovoCliente += agent.nuovoCliente;\n        smData.totaleFastweb += agent.totaleFastweb;\n        \n      } catch (error) {\n        console.warn(`Errore riga ${row + 1}:`, error);\n        continue;\n      }\n    }\n    \n    console.log(`✅ Parsing completato: ${agents.length} agenti trovati`);\n    \n    // 🔧 FIX: Calcola i totali CORRETTI\n    const totals = agents.reduce((acc, agent) => {\n      acc.totalRevenue += agent.fatturato.complessivo;\n      acc.totalRush += agent.fatturatoRush;\n      acc.totalNewClients += agent.nuovoCliente;\n      acc.totalFastweb += agent.totaleFastweb;\n      return acc;\n    }, {\n      totalRevenue: 0,\n      totalRush: 0,\n      totalNewClients: 0,\n      totalFastweb: 0\n    });\n    \n    console.log('💰 Totali calcolati:', {\n      fatturato: formatCurrency(totals.totalRevenue),\n      fatturatoRush: formatCurrency(totals.totalRush),\n      nuovoCliente: totals.totalNewClients,\n      fastweb: totals.totalFastweb\n    });\n    \n    // Struttura risultato\n    const result = {\n      success: true,\n      data: {\n        agents,\n        smData: Array.from(smStats.values()),\n        fileInfo: {\n          name: file.name,\n          dateInfo,\n          parsedRows: agents.length,\n          headerRow: headerRow + 1,\n          totalColumns\n        },\n        metadata: {\n          totalAgents: agents.length,\n          totalSMs: smStats.size,\n          totalRevenue: totals.totalRevenue,\n          totalRush: totals.totalRush,\n          totalNewClients: totals.totalNewClients,\n          totalFastweb: totals.totalFastweb,\n          dateInfo,\n          warnings: warnings.length > 0 ? warnings : null\n        }\n      }\n    };\n    \n    console.log('🎉 Parsing completato con successo!');\n    return result;\n    \n  } catch (error) {\n    console.error('❌ Errore parsing:', error);\n    return {\n      success: false,\n      error: error.message\n    };\n  }\n}","import React from 'react';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\n\nconst ConfirmationDialog = ({ open, onClose, onConfirm, title, message }) => {\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">\n          {message}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Annulla\n        </Button>\n        <Button onClick={onConfirm} color=\"primary\" autoFocus>\n          Conferma\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default ConfirmationDialog;\n","export const formatAgentName = (name) => {\n  if (typeof name !== 'string' || !name) {\n    return 'N/A';\n  }\n  return name\n    .split('.')\n    .map(part => part.charAt(0).toUpperCase() + part.slice(1))\n    .join(' ');\n};\n","import React from 'react';\nimport { formatCurrency } from '../utils/excelParser';\nimport { DollarSign, TrendingUp, Award, User, Package } from 'lucide-react';\nimport './AgentCard.css';\nimport { formatAgentName } from '../utils/formatter';\n\nconst AgentCard = ({ agent, onClick }) => {\n  // Determina la classe di performance basata sul fatturato rush\n  const getPerformanceClass = (fatturatoRush) => {\n    if (fatturatoRush > 1000) return 'performance-high';\n    if (fatturatoRush > 500) return 'performance-medium';\n    return 'performance-low';\n  };\n\n  // Trova i 2-3 prodotti con il maggior numero di pezzi\n  const getTopProducts = (agentData) => {\n    const productFields = ['simVoce', 'simDati', 'mnp', 'easyRent', 'adsl', 'linkOu', 'linkOa', 'sdm', 'ssc', 'yourBackup', 'cloudNas', 'miia', 'easyGdpr'];\n    return productFields\n      .map(key => ({ name: key, value: agentData[key] || 0 }))\n      .filter(p => p.value > 0)\n      .sort((a, b) => b.value - a.value)\n      .slice(0, 3)\n      .map(p => ({\n        name: p.name.replace(/([A-Z])/g, ' $1').replace(/^./, (str) => str.toUpperCase()),\n        value: p.value\n      }));\n  };\n\n  const topProducts = getTopProducts(agent);\n  const performanceClass = getPerformanceClass(agent.fatturatoRush);\n\n  const Stat = ({ icon, label, value }) => (\n    <div className=\"stat-item-modern\">\n      <div className=\"stat-icon-modern\">{icon}</div>\n      <div className=\"stat-content-modern\">\n        <span className=\"label\">{label}</span>\n        <span className=\"value\">{value}</span>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"agent-card-modern\" onClick={() => onClick(agent)}>\n      {/* Header Moderno */}\n      <div className={`card-header-modern ${performanceClass}`}>\n        <div className=\"avatar-modern\">\n          <User size={24} />\n        </div>\n        <div className=\"info-modern\">\n          <h3 className=\"name-modern\">{agent.nome}</h3>\n          <p className=\"sm-modern\">{agent.sm ? formatAgentName(agent.sm) : 'N/A'}</p>\n        </div>\n      </div>\n\n      {/* Corpo Moderno */}\n      <div className=\"card-body-modern\">\n        <div className=\"stats-grid-modern\">\n          <Stat \n            icon={<DollarSign size={20} />} \n            label=\"Fatturato\" \n            value={formatCurrency(agent.fatturato?.complessivo || 0)} \n          />\n          <Stat \n            icon={<TrendingUp size={20} />} \n            label=\"Rush\" \n            value={formatCurrency(agent.fatturatoRush || 0)} \n          />\n          <Stat \n            icon={<Award size={20} />} \n            label=\"Bonus\" \n            value={formatCurrency(agent.bonusRisultati || 0)} \n          />\n        </div>\n      </div>\n\n      {/* Footer Moderno */}\n      <div className=\"card-footer-modern\">\n        <h4 className=\"footer-title-modern\">\n          <Package size={16} />\n          Top Prodotti\n        </h4>\n        <div className=\"products-container-modern\">\n          {topProducts.length > 0 ? (\n            topProducts.map(p => (\n              <div key={p.name} className=\"product-badge-modern\">\n                {p.name}: <strong>{p.value}</strong>\n              </div>\n            ))\n          ) : (\n            <p className=\"no-products-modern\">Nessun prodotto di punta</p>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AgentCard;\n","import React, { useEffect, useMemo, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport { User, TrendingUp, DollarSign, Award, Phone, Smartphone, Globe, Shield, X, Calendar, MapPin, Zap, Package, ChevronDown, BarChart3 } from 'lucide-react';\nimport { formatCurrency, formatNumber } from '../utils/excelParser';\nimport { formatAgentName } from '../utils/formatter';\n\nconst EmptyState = ({ message }) => (\n  <div className=\"empty-state-compact\">\n    <Package size={32} className=\"empty-icon\" />\n    <p className=\"empty-message\">{message}</p>\n  </div>\n);\n\nconst StatItem = ({ label, value, isCurrency = false, icon: Icon }) => {\n  const formattedValue = isCurrency ? formatCurrency(value || 0) : formatNumber(value || 0);\n  if (value === 0 || value === undefined) return null;\n\n  return (\n    <div className=\"modern-stat-item group hover:scale-105 transition-all duration-300\">\n      <div className=\"stat-icon\">\n        {Icon && <Icon size={20} />}\n      </div>\n      <div className=\"stat-content\">\n        <span className=\"stat-label\">{label}</span>\n        <span className=\"stat-value\">{formattedValue}</span>\n      </div>\n    </div>\n  );\n};\n\nconst KpiTrend = ({ currentValue, historicalValues, dataKey }) => {\n  if (!historicalValues || historicalValues.length < 1) {\n    return <span className=\"kpi-trend neutral\">N/A</span>;\n  }\n\n  const lastMonthData = historicalValues[historicalValues.length - 1];\n  const previousValue = lastMonthData ? lastMonthData[dataKey] : 0;\n\n  if (currentValue > 0 && previousValue === 0) {\n    return <span className=\"kpi-trend positive\">In crescita</span>;\n  }\n\n  if (previousValue === 0) {\n    return <span className=\"kpi-trend neutral\">N/A</span>;\n  }\n\n  const percentageChange = ((currentValue - previousValue) / previousValue) * 100;\n\n  if (Math.abs(percentageChange) < 1) {\n    return <span className=\"kpi-trend neutral\">Stabile</span>;\n  }\n\n  if (percentageChange > 0) {\n    return <span className=\"kpi-trend positive\">+{percentageChange.toFixed(0)}%</span>;\n  } else {\n    return <span className=\"kpi-trend negative\">{percentageChange.toFixed(0)}%</span>;\n  }\n};\n\nconst AgentModal = ({ agent, allData, onClose }) => {\n  const [activeSection, setActiveSection] = useState(null);\n\n  const toggleSection = (sectionId) => {\n    setActiveSection(activeSection === sectionId ? null : sectionId);\n  };\n\n  useEffect(() => {\n    const handleEsc = (event) => {\n      if (event.keyCode === 27) onClose();\n    };\n    window.addEventListener('keydown', handleEsc);\n    return () => window.removeEventListener('keydown', handleEsc);\n  }, [onClose]);\n\n  const historicalData = useMemo(() => {\n    if (!agent || !allData || !allData.uploadedFiles) {\n      return [];\n    }\n    return allData.uploadedFiles\n      .map(file => {\n        const agentData = file.data?.agents?.find(a => a.nome === agent.originalNome);\n        return agentData ? {\n          name: file.displayDate, // Mappato da 'period' a 'name' per il grafico\n          rush: agentData.fatturatoRush || 0, // Mappato da 'fatturatoRush' a 'rush'\n          fatturato: agentData.fatturato?.complessivo || 0, // Mappato da 'revenue' a 'fatturato'\n        } : null;\n      })\n      .filter(Boolean)\n      .reverse(); // Ordine cronologico per il grafico\n  }, [agent, allData]);\n\n  if (!agent) return null;\n\n  const getAvatarColor = (name) => {\n    const colors = [\n      'bg-gradient-to-br from-blue-500 to-blue-600',\n      'bg-gradient-to-br from-green-500 to-green-600',\n      'bg-gradient-to-br from-purple-500 to-purple-600',\n      'bg-gradient-to-br from-orange-500 to-orange-600',\n      'bg-gradient-to-br from-pink-500 to-pink-600',\n      'bg-gradient-to-br from-indigo-500 to-indigo-600',\n    ];\n    const index = (name || '').length % colors.length;\n    return colors[index];\n  };\n\n  const getProductCount = (category) => {\n    switch (category) {\n      case 'fatturati':\n        return [\n          agent.fatturatoVoce, agent.fatturatoDati, agent.fatturatoEasyRent,\n          agent.fatturatoOu, agent.fatturatoOa, agent.fatturatoEasyDeal,\n          agent.fatturatoServiziDigitali, agent.fatturatoAltro, agent.fatturatoCustom,\n          agent.fatturatoSdm, agent.fatturatoSsc, agent.fatturatoYourBackup,\n          agent.fatturatoCloudNas, agent.fatturatoEasyGdpr, agent.fatturatoMiia,\n          agent.fatturatoNuovoCliente\n        ].filter(val => val && val > 0).length;\n\n      case 'digitali':\n        return [\n          agent.sdm, agent.ssc, agent.yourBackup, agent.cloudNas,\n          agent.miia, agent.easyGdpr\n        ].filter(val => val && val > 0).length;\n\n      case 'telefonia':\n        return [\n          agent.adsl, agent.linkOu, agent.linkOa, agent.simVoce,\n          agent.simDati, agent.mnp, agent.easyRent, agent.linkOaStart,\n          agent.interniOa\n        ].filter(val => val && val > 0).length;\n\n      case 'energia':\n        return [agent.fastwebEnergia].filter(val => val && val > 0).length;\n\n      default:\n        return 0;\n    }\n  };\n\n  return ReactDOM.createPortal(\n    <div className=\"modal-overlay-modern\" onClick={onClose}>\n      <div className=\"modal-content-modern\" onClick={(e) => e.stopPropagation()}>\n        {/* Header modernizzato */}\n        <div className=\"modal-header-modern\">\n          <div className=\"agent-profile\">\n            <div className={`avatar-modern ${getAvatarColor(agent.nome)}`}>\n              <User size={32} className=\"text-white\" />\n            </div>\n            <div className=\"agent-info\">\n              <h1 className=\"agent-name\">{agent.nome}</h1>\n              <div className=\"agent-details\">\n                <div className=\"detail-item\">\n                  <User size={16} />\n                  <span>{agent.sm ? formatAgentName(agent.sm) : ''}</span>\n                </div>\n                <div className=\"detail-item\">\n                  <MapPin size={16} />\n                  <span>{agent.distretto}</span>\n                </div>\n                <div className=\"detail-item\">\n                  <Calendar size={16} />\n                  <span>Ultimo aggiornamento: oggi</span>\n                </div>\n              </div>\n            </div>\n          </div>\n          <button className=\"close-button-modern\" onClick={onClose}>\n            <X size={24} />\n          </button>\n        </div>\n\n        {/* KPI Cards */}\n        <div className=\"kpi-section\">\n          <div className=\"kpi-card accent\">\n            <div className=\"kpi-icon\">\n              <TrendingUp size={28} />\n            </div>\n            <div className=\"kpi-content\">\n              <span className=\"kpi-label\">Fatturato Rush</span>\n              <span className=\"kpi-value\">{formatCurrency(agent.fatturatoRush || 0)}</span>\n              <KpiTrend currentValue={agent.fatturatoRush || 0} historicalValues={historicalData} dataKey=\"rush\" />\n            </div>\n          </div>\n\n          <div className=\"kpi-card primary\">\n            <div className=\"kpi-icon\">\n              <DollarSign size={28} />\n            </div>\n            <div className=\"kpi-content\">\n              <span className=\"kpi-label\">Fatturato Complessivo</span>\n              <span className=\"kpi-value\">{formatCurrency(agent.fatturato?.complessivo || 0)}</span>\n              <KpiTrend currentValue={agent.fatturato?.complessivo || 0} historicalValues={historicalData} dataKey=\"fatturato\" />\n            </div>\n          </div>\n\n          <div className=\"kpi-card success\">\n            <div className=\"kpi-icon\">\n              <Award size={28} />\n            </div>\n            <div className=\"kpi-content\">\n              <span className=\"kpi-label\">Bonus Risultati</span>\n              <span className=\"kpi-value\">{formatCurrency(agent.bonusRisultati || 0)}</span>\n            </div>\n          </div>\n\n          <div className=\"kpi-card info\">\n            <div className=\"kpi-icon\">\n              <User size={28} />\n            </div>\n            <div className=\"kpi-content\">\n              <span className=\"kpi-label\">Nuovi Clienti</span>\n              <span className=\"kpi-value\">{formatNumber(agent.nuovoCliente || 0)}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Performance Chart */}\n        <div className=\"chart-section\">\n          <h3 className=\"section-title\">\n            <TrendingUp size={20} />\n            Trend Performance Storico\n          </h3>\n          <div className=\"chart-container-modern\">\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <LineChart data={historicalData}>\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e2e8f0\" />\n                <XAxis dataKey=\"name\" stroke=\"#64748b\" />\n                <YAxis yAxisId=\"left\" stroke=\"#10b981\" />\n                <YAxis yAxisId=\"right\" orientation=\"right\" stroke=\"#3b82f6\" />\n                <Tooltip\n                  contentStyle={{\n                    backgroundColor: '#ffffff',\n                    border: '1px solid #e2e8f0',\n                    borderRadius: '8px',\n                    boxShadow: '0 10px 25px rgba(0,0,0,0.1)'\n                  }}\n                />\n                <Legend />\n                <Line\n                  yAxisId=\"left\"\n                  type=\"monotone\"\n                  dataKey=\"rush\"\n                  stroke=\"#10b981\"\n                  strokeWidth={3}\n                  name=\"Fatturato Rush\"\n                  dot={{ fill: '#10b981', strokeWidth: 2, r: 4 }}\n                />\n                <Line\n                  yAxisId=\"right\"\n                  type=\"monotone\"\n                  dataKey=\"fatturato\"\n                  stroke=\"#3b82f6\"\n                  strokeWidth={3}\n                  name=\"Fatturato Totale\"\n                  dot={{ fill: '#3b82f6', strokeWidth: 2, r: 4 }}\n                />\n              </LineChart>\n            </ResponsiveContainer>\n          </div>\n        </div>\n\n        {/* Accordion Section */}\n        <div className=\"accordion-section\">\n          <h3 className=\"section-title\">\n            <BarChart3 size={20} />\n            Dettaglio Performance Prodotti\n          </h3>\n\n          {/* Accordion Item 1 - Fatturati */}\n          <div className=\"accordion-item\">\n            <button\n              className={`accordion-header ${activeSection === 'fatturati' ? 'active' : ''}`}\n              onClick={() => toggleSection('fatturati')}\n            >\n              <div className=\"accordion-title\">\n                <DollarSign size={18} />\n                <span>Dettaglio Fatturati</span>\n              </div>\n              <div className=\"accordion-meta\">\n                <span className=\"count-badge\">{getProductCount('fatturati')}</span>\n                <ChevronDown size={16} className={`chevron ${activeSection === 'fatturati' ? 'rotated' : ''}`} />\n              </div>\n            </button>\n            {activeSection === 'fatturati' && (\n              <div className=\"accordion-content\">\n                {getProductCount('fatturati') > 0 ? (\n                  <div className=\"stats-grid-compact\">\n                    <StatItem label=\"Fatturato Voce\" value={agent.fatturatoVoce} isCurrency icon={Phone} />\n                    <StatItem label=\"Fatturato Dati\" value={agent.fatturatoDati} isCurrency icon={Globe} />\n                    <StatItem label=\"Fatturato Easy Rent\" value={agent.fatturatoEasyRent} isCurrency icon={Smartphone} />\n                    <StatItem label=\"Fatturato OU\" value={agent.fatturatoOu} isCurrency icon={DollarSign} />\n                    <StatItem label=\"Fatturato OA\" value={agent.fatturatoOa} isCurrency icon={DollarSign} />\n                    <StatItem label=\"Fatturato Easy Deal\" value={agent.fatturatoEasyDeal} isCurrency icon={Award} />\n                    <StatItem label=\"Fatturato Servizi Digitali\" value={agent.fatturatoServiziDigitali} isCurrency icon={Shield} />\n                    <StatItem label=\"Fatturato Altro\" value={agent.fatturatoAltro} isCurrency icon={DollarSign} />\n                    <StatItem label=\"Fatturato Custom\" value={agent.fatturatoCustom} isCurrency icon={DollarSign} />\n                    <StatItem label=\"Fatturato SDM\" value={agent.fatturatoSdm} isCurrency icon={Shield} />\n                    <StatItem label=\"Fatturato SSC\" value={agent.fatturatoSsc} isCurrency icon={Globe} />\n                    <StatItem label=\"Fatturato Your Backup\" value={agent.fatturatoYourBackup} isCurrency icon={Shield} />\n                    <StatItem label=\"Fatturato Cloud NAS\" value={agent.fatturatoCloudNas} isCurrency icon={Globe} />\n                    <StatItem label=\"Fatturato Easy GDPR\" value={agent.fatturatoEasyGdpr} isCurrency icon={Shield} />\n                    <StatItem label=\"Fatturato MIIA\" value={agent.fatturatoMiia} isCurrency icon={Shield} />\n                    <StatItem label=\"Fatturato Nuovo Cliente\" value={agent.fatturatoNuovoCliente} isCurrency icon={User} />\n                  </div>\n                ) : (\n                  <EmptyState message=\"Nessun dato fatturato disponibile\" />\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Accordion Item 2 - Servizi Digitali */}\n          <div className=\"accordion-item\">\n            <button\n              className={`accordion-header ${activeSection === 'digitali' ? 'active' : ''}`}\n              onClick={() => toggleSection('digitali')}\n            >\n              <div className=\"accordion-title\">\n                <Shield size={18} />\n                <span>Servizi Digitali</span>\n              </div>\n              <div className=\"accordion-meta\">\n                <span className=\"count-badge\">{getProductCount('digitali')}</span>\n                <ChevronDown size={16} className={`chevron ${activeSection === 'digitali' ? 'rotated' : ''}`} />\n              </div>\n            </button>\n            {activeSection === 'digitali' && (\n              <div className=\"accordion-content\">\n                {getProductCount('digitali') > 0 ? (\n                  <div className=\"stats-grid-compact\">\n                    <StatItem label=\"SDM\" value={agent.sdm} icon={Shield} />\n                    <StatItem label=\"SSC\" value={agent.ssc} icon={Globe} />\n                    <StatItem label=\"Your Backup\" value={agent.yourBackup} icon={Shield} />\n                    <StatItem label=\"Cloud NAS\" value={agent.cloudNas} icon={Globe} />\n                    <StatItem label=\"MIIA\" value={agent.miia} icon={Shield} />\n                    <StatItem label=\"Easy GDPR\" value={agent.easyGdpr} icon={Shield} />\n                  </div>\n                ) : (\n                  <EmptyState message=\"Nessun servizio digitale attivo\" />\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Accordion Item 3 - Telefonia */}\n          <div className=\"accordion-item\">\n            <button\n              className={`accordion-header ${activeSection === 'telefonia' ? 'active' : ''}`}\n              onClick={() => toggleSection('telefonia')}\n            >\n              <div className=\"accordion-title\">\n                <Phone size={18} />\n                <span>Telefonia</span>\n              </div>\n              <div className=\"accordion-meta\">\n                <span className=\"count-badge\">{getProductCount('telefonia')}</span>\n                <ChevronDown size={16} className={`chevron ${activeSection === 'telefonia' ? 'rotated' : ''}`} />\n              </div>\n            </button>\n            {activeSection === 'telefonia' && (\n              <div className=\"accordion-content\">\n                {getProductCount('telefonia') > 0 ? (\n                  <div className=\"stats-grid-compact\">\n                    <StatItem label=\"ADSL\" value={agent.adsl} icon={Globe} />\n                    <StatItem label=\"Link OU\" value={agent.linkOu} icon={Phone} />\n                    <StatItem label=\"Link OA\" value={agent.linkOa} icon={Phone} />\n                    <StatItem label=\"SIM Voce\" value={agent.simVoce} icon={Phone} />\n                    <StatItem label=\"SIM Dati\" value={agent.simDati} icon={Smartphone} />\n                    <StatItem label=\"MNP\" value={agent.mnp} icon={Smartphone} />\n                    <StatItem label=\"Easy Rent\" value={agent.easyRent} icon={Award} />\n                    <StatItem label=\"Link OA Start\" value={agent.linkOaStart} icon={Phone} />\n                    <StatItem label=\"Interni OA\" value={agent.interniOa} icon={Phone} />\n                  </div>\n                ) : (\n                  <EmptyState message=\"Nessun contratto telefonico attivo\" />\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Accordion Item 4 - Energia */}\n          <div className=\"accordion-item\">\n            <button\n              className={`accordion-header ${activeSection === 'energia' ? 'active' : ''}`}\n              onClick={() => toggleSection('energia')}\n            >\n              <div className=\"accordion-title\">\n                <Zap size={18} />\n                <span>Energia</span>\n              </div>\n              <div className=\"accordion-meta\">\n                <span className=\"count-badge\">{getProductCount('energia')}</span>\n                <ChevronDown size={16} className={`chevron ${activeSection === 'energia' ? 'rotated' : ''}`} />\n              </div>\n            </button>\n            {activeSection === 'energia' && (\n              <div className=\"accordion-content\">\n                {getProductCount('energia') > 0 ? (\n                  <div className=\"stats-grid-compact\">\n                    <StatItem label=\"Fastweb Energia\" value={agent.fastwebEnergia} icon={Zap} />\n                  </div>\n                ) : (\n                  <EmptyState message=\"Nessun contratto energia attivo\" />\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"modal-footer-modern\">\n          <div className=\"footer-info\">\n            <span>📊 Dati aggiornati al {new Date().toLocaleDateString('it-IT')}</span>\n          </div>\n        </div>\n      </div>\n\n      <style jsx>{`\n        .modal-overlay-modern {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.7);\n          backdrop-filter: blur(8px);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 1000;\n          animation: fadeIn 0.3s ease;\n        }\n\n        .modal-content-modern {\n          background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);\n          border-radius: 24px;\n          width: 95%;\n          max-width: 1200px;\n          max-height: 95vh;\n          overflow-y: auto;\n          position: relative;\n          box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);\n          animation: slideInUp 0.4s ease;\n          border: 1px solid rgba(255, 255, 255, 0.2);\n        }\n\n        .modal-header-modern {\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n          padding: 32px;\n          border-radius: 24px 24px 0 0;\n          color: white;\n          position: relative;\n          overflow: hidden;\n        }\n\n        .modal-header-modern::before {\n          content: '';\n          position: absolute;\n          top: -50%;\n          right: -50%;\n          width: 200%;\n          height: 200%;\n          background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);\n          animation: float 6s ease-in-out infinite;\n        }\n\n        .agent-profile {\n          display: flex;\n          align-items: center;\n          position: relative;\n          z-index: 2;\n        }\n\n        .avatar-modern {\n          width: 80px;\n          height: 80px;\n          border-radius: 20px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin-right: 24px;\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n          border: 3px solid rgba(255, 255, 255, 0.3);\n        }\n\n        .agent-info {\n          flex: 1;\n        }\n\n        .agent-name {\n          font-size: 2.5rem;\n          font-weight: 700;\n          margin: 0 0 16px 0;\n          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n        }\n\n        .agent-details {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 20px;\n          opacity: 0.9;\n        }\n\n        .detail-item {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          font-size: 0.95rem;\n        }\n\n        .close-button-modern {\n          position: absolute;\n          top: 24px;\n          right: 24px;\n          background: rgba(255, 255, 255, 0.2);\n          border: none;\n          width: 48px;\n          height: 48px;\n          border-radius: 12px;\n          color: white;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          transition: all 0.2s ease;\n          backdrop-filter: blur(10px);\n          z-index: 3;\n        }\n\n        .close-button-modern:hover {\n          background: rgba(255, 255, 255, 0.3);\n          transform: scale(1.05);\n        }\n\n        .kpi-section {\n          padding: 32px;\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n          gap: 20px;\n        }\n\n        .kpi-card {\n          background: white;\n          border-radius: 16px;\n          padding: 24px;\n          display: flex;\n          align-items: center;\n          gap: 20px;\n          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n          border: 1px solid rgba(0, 0, 0, 0.05);\n          transition: all 0.3s ease;\n          position: relative;\n          overflow: hidden;\n        }\n\n        .kpi-card::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 4px;\n          background: var(--accent-color);\n        }\n\n        .kpi-card:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);\n        }\n\n        .kpi-card.primary { --accent-color: linear-gradient(135deg, #3b82f6, #1d4ed8); }\n        .kpi-card.accent { --accent-color: linear-gradient(135deg, #10b981, #047857); }\n        .kpi-card.success { --accent-color: linear-gradient(135deg, #f59e0b, #d97706); }\n        .kpi-card.info { --accent-color: linear-gradient(135deg, #8b5cf6, #7c3aed); }\n\n        .kpi-icon {\n          width: 60px;\n          height: 60px;\n          border-radius: 16px;\n          background: var(--accent-color);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          flex-shrink: 0;\n        }\n\n        .kpi-content {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          gap: 4px;\n        }\n\n        .kpi-label {\n          font-size: 0.9rem;\n          color: #64748b;\n          font-weight: 500;\n        }\n\n        .kpi-value {\n          font-size: 1.8rem;\n          font-weight: 700;\n          color: #1e293b;\n        }\n\n        .kpi-trend {\n          font-size: 0.8rem;\n          font-weight: 600;\n        }\n\n        .kpi-trend.positive { color: #10b981; }\n        .kpi-trend.negative { color: #ef4444; }\n        .kpi-trend.neutral { color: #64748b; }\n\n        .chart-section {\n          padding: 0 32px 32px;\n        }\n\n        .section-title {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          font-size: 18px;\n          font-weight: 600;\n          color: #1e293b;\n          margin-bottom: 20px;\n          padding-bottom: 12px;\n          border-bottom: 2px solid #f1f5f9;\n        }\n\n        .chart-container-modern {\n          background: white;\n          border-radius: 16px;\n          padding: 24px;\n          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n          border: 1px solid rgba(0, 0, 0, 0.05);\n        }\n\n        .accordion-section {\n          padding: 24px;\n          background: white;\n          border-radius: 16px;\n          margin: 16px 0;\n          border: 1px solid #e2e8f0;\n        }\n\n        .accordion-item {\n          border: 1px solid #e2e8f0;\n          border-radius: 12px;\n          margin-bottom: 8px;\n          overflow: hidden;\n          transition: all 0.2s ease;\n        }\n\n        .accordion-item:hover {\n          border-color: #cbd5e1;\n        }\n\n        .accordion-header {\n          width: 100%;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 16px 20px;\n          background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n          border: none;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          font-size: 15px;\n          font-weight: 500;\n        }\n\n        .accordion-header:hover {\n          background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);\n        }\n\n        .accordion-header.active {\n          background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);\n          color: #1d4ed8;\n        }\n\n        .accordion-title {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n\n        .accordion-meta {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n        }\n\n        .count-badge {\n          background: rgba(59, 130, 246, 0.1);\n          color: #1d4ed8;\n          font-size: 12px;\n          font-weight: 600;\n          padding: 4px 8px;\n          border-radius: 8px;\n          min-width: 24px;\n          text-align: center;\n        }\n\n        .accordion-header.active .count-badge {\n          background: rgba(255, 255, 255, 0.8);\n          color: #1d4ed8;\n        }\n\n        .chevron {\n          transition: transform 0.2s ease;\n          color: #64748b;\n        }\n\n        .chevron.rotated {\n          transform: rotate(180deg);\n        }\n\n        .accordion-content {\n          padding: 20px;\n          background: white;\n          border-top: 1px solid #e2e8f0;\n          animation: slideDown 0.3s ease;\n        }\n\n        @keyframes slideDown {\n          from {\n            opacity: 0;\n            transform: translateY(-10px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        .stats-grid-compact {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n          gap: 12px;\n        }\n\n        .empty-state-compact {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          padding: 32px 16px;\n          color: #64748b;\n          text-align: center;\n        }\n\n        .empty-icon {\n          opacity: 0.4;\n          margin-bottom: 8px;\n        }\n\n        .empty-message {\n          font-size: 14px;\n          opacity: 0.8;\n        }\n\n        .modern-stat-item {\n          background: #f8fafc;\n          border: 1px solid #e2e8f0;\n          border-radius: 12px;\n          padding: 20px;\n          display: flex;\n          align-items: center;\n          gap: 16px;\n          transition: all 0.2s ease;\n        }\n\n        .modern-stat-item:hover {\n          background: #f1f5f9;\n          border-color: #3b82f6;\n          transform: translateY(-1px);\n        }\n\n        .stat-icon {\n          width: 40px;\n          height: 40px;\n          border-radius: 10px;\n          background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          flex-shrink: 0;\n        }\n\n        .stat-content {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          gap: 4px;\n        }\n\n        .stat-label {\n          font-size: 0.9rem;\n          color: #64748b;\n          font-weight: 500;\n        }\n\n        .stat-value {\n          font-size: 1.3rem;\n          font-weight: 700;\n          color: #1e293b;\n        }\n\n        .modal-footer-modern {\n          background: #f8fafc;\n          padding: 24px 32px;\n          border-radius: 0 0 24px 24px;\n          border-top: 1px solid #e2e8f0;\n          text-align: center;\n        }\n\n        .footer-info {\n          color: #64748b;\n          font-size: 0.9rem;\n          font-weight: 500;\n        }\n\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n            transform: translateY(10px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        @keyframes slideInUp {\n          from { transform: translateY(30px); opacity: 0; }\n          to { transform: translateY(0); opacity: 1; }\n        }\n\n        @keyframes float {\n          0%, 100% { transform: translateY(0px); }\n          50% { transform: translateY(-20px); }\n        }\n\n        @media (max-width: 768px) {\n          .modal-content-modern {\n            width: 98%;\n            margin: 1%;\n            max-height: 98vh;\n          }\n\n          .agent-name {\n            font-size: 2rem;\n          }\n\n          .kpi-section {\n            grid-template-columns: 1fr;\n            padding: 24px;\n          }\n\n          .accordion-header {\n            padding: 14px 16px;\n            font-size: 14px;\n          }\n\n          .accordion-content {\n            padding: 16px;\n          }\n\n          .agent-profile {\n            flex-direction: column;\n            text-align: center;\n          }\n\n          .avatar-modern {\n            margin-right: 0;\n            margin-bottom: 16px;\n          }\n\n          .agent-details {\n            justify-content: center;\n          }\n\n          .stats-grid-compact {\n            grid-template-columns: 1fr;\n          }\n        }\n      `}</style>\n    </div>,\n    document.getElementById('modal-root') || document.body\n  );\n};\n\nexport default AgentModal;\n","import React, { useState, useMemo, useEffect } from 'react';\nimport { useData } from '../App'; // Importa il context\nimport { formatAgentName } from '../utils/formatter';\nimport AgentCard from './AgentCard'; // Importa la VERA AgentCard\nimport AgentModal from './AgentModal'; // Importa la VERA AgentModal\nimport './ModernAgentsPage.css';\nimport { Search, Filter, Users, TrendingUp, Award, BarChart3, RefreshCw } from 'lucide-react';\nimport { Slider } from '@mui/material';\n\nconst SLIDER_DISPLAY_MAX = 3000; // Limite visuale per lo slider\n\nconst ModernAgentsPage = () => {\n  const { data, selectedFileDate, loadFiles, globalLoading } = useData(); // Usa i dati reali\n  const [selectedAgent, setSelectedAgent] = useState(null);\n  const [refreshing, setRefreshing] = useState(false);\n\n  // Gestione stato filtri\n  const [filters, setFilters] = useState({\n    searchTerm: '',\n    selectedSm: '',\n    fatturatoRushRange: [0, 10000],\n    activePreset: null,\n  });\n\n  // Sincronizzazione filtri con URL (dal vecchio componente Agents.js)\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const newFilters = {\n      searchTerm: params.get('search') || '',\n      selectedSm: params.get('sm') || '',\n      fatturatoRushRange: [\n        Number(params.get('minFatturatoRush')) || 0,\n        Number(params.get('maxFatturatoRush')) || 10000,\n      ],\n      activePreset: params.get('preset') || null,\n    };\n    setFilters(newFilters);\n  }, []);\n\n  useEffect(() => {\n    const params = new URLSearchParams();\n    if (filters.searchTerm) params.set('search', filters.searchTerm);\n    if (filters.selectedSm) params.set('sm', filters.selectedSm);\n    if (filters.fatturatoRushRange[0] > 0) params.set('minFatturatoRush', filters.fatturatoRushRange[0]);\n    if (filters.fatturatoRushRange[1] < 10000) params.set('maxFatturatoRush', filters.fatturatoRushRange[1]);\n    if (filters.activePreset) params.set('preset', filters.activePreset);\n    window.history.replaceState({}, '', `${window.location.pathname}?${params.toString()}`);\n  }, [filters]);\n\n  // Logica per processare i dati reali\n  const { agents, smList, maxFatturatoRush, allAgentsInPeriod } = useMemo(() => {\n    if (!selectedFileDate || !data.uploadedFiles || data.uploadedFiles.length === 0) {\n      return { agents: [], smList: [], maxFatturatoRush: SLIDER_DISPLAY_MAX, allAgentsInPeriod: [] };\n    }\n    const file = data.uploadedFiles.find(f => f.date === selectedFileDate);\n    if (!file || !file.data || !file.data.agents) {\n      return { agents: [], smList: [], maxFatturatoRush: SLIDER_DISPLAY_MAX, allAgentsInPeriod: [] };\n    }\n\n    const agentsWithId = file.data.agents.map((agent, index) => ({\n      ...agent,\n      id: `${file.date}-${agent.nome}-${index}`,\n      originalNome: agent.nome,\n      nome: formatAgentName(agent.nome),\n    }));\n\n    const uniqueSmList = [...new Set(agentsWithId.map(a => a.sm).filter(Boolean))].sort();\n    const trueMaxRush = Math.max(...agentsWithId.map(a => a.fatturatoRush || 0));\n\n    let filteredAgents = agentsWithId.filter(agent =>\n      (agent.nome.toLowerCase().includes(filters.searchTerm.toLowerCase()) ||\n      (agent.originalNome && agent.originalNome.toLowerCase().includes(filters.searchTerm.toLowerCase()))) &&\n      (filters.selectedSm === '' || agent.sm === filters.selectedSm) &&\n      (agent.fatturatoRush || 0) >= filters.fatturatoRushRange[0] &&\n      (agent.fatturatoRush || 0) <= filters.fatturatoRushRange[1]\n    );\n\n    return { agents: filteredAgents, smList: uniqueSmList, maxFatturatoRush: trueMaxRush, allAgentsInPeriod: agentsWithId };\n  }, [data.uploadedFiles, selectedFileDate, filters]);\n\n  const handleFilterChange = (name, value) => {\n    if (name === 'fatturatoRushRange') {\n      const [min, max] = value;\n      setFilters(prev => ({ ...prev, fatturatoRushRange: [min, max], activePreset: null }));\n    } else {\n      setFilters(prev => ({ ...prev, [name]: value, activePreset: null }));\n    }\n  };\n\n  const handlePresetFilter = (preset) => {\n    let newFilters = { ...filters, searchTerm: '', selectedSm: '', activePreset: preset };\n    switch (preset) {\n      case 'top':\n        newFilters.fatturatoRushRange = [1000, maxFatturatoRush];\n        break;\n      case 'underperforming':\n        newFilters.fatturatoRushRange = [0, 500];\n        break;\n      case 'average':\n        newFilters.fatturatoRushRange = [500, 1000];\n        break;\n      default:\n        newFilters.fatturatoRushRange = [0, maxFatturatoRush];\n        newFilters.activePreset = null;\n    }\n    setFilters(newFilters);\n  };\n\n  const handleRefresh = async () => {\n    setRefreshing(true);\n    await loadFiles();\n    setRefreshing(false);\n  };\n\n  // Statistiche calcolate sui dati filtrati reali\n  const stats = useMemo(() => {\n    const totalAgents = agents.length;\n    const avgRush = totalAgents > 0 ? agents.reduce((sum, agent) => sum + (agent.fatturatoRush || 0), 0) / totalAgents : 0;\n    const topPerformer = agents.reduce((max, agent) =>\n      (agent.fatturatoRush || 0) > (max?.fatturatoRush || 0) ? agent : max, null);\n    const totalRevenue = agents.reduce((sum, agent) => sum + (agent.fatturato?.complessivo || 0), 0);\n\n    return { totalAgents, avgRush, topPerformer, totalRevenue };\n  }, [agents]);\n\n  const marks = [\n    { value: 0, label: '0€' },\n    { value: 500, label: '500€' },\n    { value: 1000, label: '1k€' },\n    { value: SLIDER_DISPLAY_MAX, label: `${SLIDER_DISPLAY_MAX / 1000}k€+` }\n  ];\n\n  return (\n    <div className=\"modern-agents-container\">\n      <div className=\"page-header\">\n        <div className=\"header-content\">\n          <div className=\"header-text\">\n            <h1 className=\"page-title\"><Users size={32} /> Dashboard Agenti</h1>\n            <p className=\"page-subtitle\">Gestisci e monitora le performance del tuo team commerciale</p>\n          </div>\n          <button className={`refresh-btn ${refreshing || globalLoading ? 'refreshing' : ''}`} onClick={handleRefresh} disabled={refreshing || globalLoading}>\n            <RefreshCw size={20} />\n            {refreshing || globalLoading ? 'Aggiornamento...' : 'Aggiorna Dati'}\n          </button>\n        </div>\n        <div className=\"header-stats\">\n           <div className=\"stat-card primary\">\n            <div className=\"stat-icon\"><Users size={24} /></div>\n            <div className=\"stat-content\">\n              <span className=\"stat-value\">{stats.totalAgents}</span>\n              <span className=\"stat-label\">Agenti Visualizzati</span>\n            </div>\n          </div>\n          <div className=\"stat-card success\">\n            <div className=\"stat-icon\"><TrendingUp size={24} /></div>\n            <div className=\"stat-content\">\n              <span className=\"stat-value\">€{stats.avgRush.toLocaleString('it-IT', { maximumFractionDigits: 0 })}</span>\n              <span className=\"stat-label\">Rush Medio</span>\n            </div>\n          </div>\n          <div className=\"stat-card accent\">\n            <div className=\"stat-icon\"><Award size={24} /></div>\n            <div className=\"stat-content\">\n              <span className=\"stat-value\">{stats.topPerformer?.nome?.split(' ')[0] || 'N/A'}</span>\n              <span className=\"stat-label\">Top Performer</span>\n            </div>\n          </div>\n          <div className=\"stat-card info\">\n            <div className=\"stat-icon\"><BarChart3 size={24} /></div>\n            <div className=\"stat-content\">\n              <span className=\"stat-value\">€{(stats.totalRevenue / 1000).toFixed(0)}K</span>\n              <span className=\"stat-label\">Fatturato Totale</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"filters-modern\">\n        <div className=\"filters-header\">\n          <div className=\"filters-title\"><Filter size={20} /><span>Filtri Avanzati</span></div>\n          <div className=\"results-count\">{agents.length} di {allAgentsInPeriod.length} agenti</div>\n        </div>\n        <div className=\"filters-grid\">\n          <div className=\"filter-group search-group\">\n            <label className=\"filter-label\"><Search size={16} /> Ricerca Agente</label>\n            <div className=\"search-input-wrapper\">\n              <input type=\"text\" placeholder=\"Cerca per nome...\" value={filters.searchTerm} onChange={(e) => handleFilterChange('searchTerm', e.target.value)} className=\"modern-search-input\" />\n            </div>\n          </div>\n          <div className=\"filter-group\">\n            <label className=\"filter-label\"><Users size={16} /> Coordinatore</label>\n            <select value={filters.selectedSm} onChange={(e) => handleFilterChange('selectedSm', e.target.value)} className=\"modern-select\">\n              <option value=\"\">Tutti i Coordinatori</option>\n              {smList.map(sm => <option key={sm} value={sm}>{formatAgentName(sm)}</option>)}\n            </select>\n          </div>\n          <div className=\"filter-group range-group\">\n            <label className=\"filter-label\"><TrendingUp size={16} /> Range Fatturato Rush</label>\n            <Slider\n              value={filters.fatturatoRushRange.map(v => Math.min(v, SLIDER_DISPLAY_MAX))}\n              onChange={(e, newValue) => handleFilterChange('fatturatoRushRange', newValue)}\n              valueLabelDisplay=\"auto\"\n              min={0}\n              max={SLIDER_DISPLAY_MAX}\n              step={100}\n              marks={marks}\n              valueLabelFormat={(value) => value === SLIDER_DISPLAY_MAX ? `${value.toLocaleString('it-IT')}€+` : `${value.toLocaleString('it-IT')}€`}\n              sx={{ mt: 2 }}\n            />\n          </div>\n          <div className=\"filter-group preset-group\">\n            <label className=\"filter-label\">Filtri Rapidi</label>\n            <div className=\"preset-buttons\">\n              <button onClick={() => handlePresetFilter('top')} className={`preset-btn ${filters.activePreset === 'top' ? 'active' : ''}`}>🏆 Top Performers</button>\n              <button onClick={() => handlePresetFilter('average')} className={`preset-btn ${filters.activePreset === 'average' ? 'active' : ''}`}>📊 Performance Media</button>\n              <button onClick={() => handlePresetFilter('underperforming')} className={`preset-btn ${filters.activePreset === 'underperforming' ? 'active' : ''}`}>🔄 In Crescita</button>\n              <button onClick={() => handlePresetFilter(null)} className=\"preset-btn reset\">✨ Reset Filtri</button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className={`agents-grid-modern ${globalLoading ? 'loading' : ''}`}>\n        {agents.length > 0 ? (\n          agents.map(agent => (\n            <AgentCard key={agent.id} agent={agent} onClick={setSelectedAgent} />\n          ))\n        ) : (\n          <div className=\"no-results-modern\">\n            <div className=\"no-results-icon\"><Search size={48} /></div>\n            <h3>Nessun agente trovato</h3>\n            <p>Prova a modificare i filtri di ricerca per visualizzare più risultati.</p>\n            <button className=\"reset-filters-btn\" onClick={() => setFilters({ searchTerm: '', selectedSm: '', fatturatoRushRange: [0, maxFatturatoRush], activePreset: null })}>Ripristina Tutti i Filtri</button>\n          </div>\n        )}\n      </div>\n\n      {globalLoading && (\n        <div className=\"loading-overlay\">\n          <div className=\"loading-spinner\"><RefreshCw size={32} className=\"animate-spin\" /><p>Caricamento agenti...</p></div>\n        </div>\n      )}\n\n      {/* MODALE REALE */}\n      {selectedAgent && <AgentModal agent={selectedAgent} allData={data} onClose={() => setSelectedAgent(null)} />}\n    </div>\n  );\n};\n\nexport default ModernAgentsPage;\n","import React, { useState, useMemo } from 'react';\nimport { useData } from '../App';\nimport { formatAgentName } from '../utils/formatter';\nimport {\n  Trophy, Crown, Medal, Target, Users, TrendingUp,\n  DollarSign, Filter,\n  ChevronDown, ChevronUp, Star, BarChart3\n} from 'lucide-react';\nimport './ModernSMRanking.css';\n\n// Simulazione delle funzioni di utilità\nconst formatCurrency = (value) => {\n  return new Intl.NumberFormat('it-IT', {\n    style: 'currency',\n    currency: 'EUR'\n  }).format(value || 0);\n};\n\nconst formatNumber = (value) => {\n  return new Intl.NumberFormat('it-IT').format(value || 0);\n};\n\nconst ModernSMRanking = () => {\n  const { data, selectedFileDate } = useData();\n  const [sortBy, setSortBy] = useState('totalRush');\n  const [sortOrder, setSortOrder] = useState('desc');\n  const [selectedMetric, setSelectedMetric] = useState('rush');\n  const [expandedSM, setExpandedSM] = useState(null);\n\n  // Processa i dati degli SM dai file caricati\n  const smData = useMemo(() => {\n    if (!selectedFileDate || !data.uploadedFiles?.length) {\n      return [];\n    }\n\n    const file = data.uploadedFiles.find(f => f.date === selectedFileDate);\n    if (!file?.data?.agents) return [];\n\n    // Processa i dati reali\n    const agentsBySM = {};\n\n    file.data.agents.forEach(agent => {\n      const smName = agent.sm || 'Senza SM';\n      if (!agentsBySM[smName]) {\n        agentsBySM[smName] = {\n          name: smName,\n          team: [],\n          totalAgents: 0,\n          totalRush: 0,\n          totalRevenue: 0,\n          totalNewClients: 0,\n          avgRush: 0\n        };\n      }\n\n      agentsBySM[smName].team.push(agent);\n      agentsBySM[smName].totalAgents++;\n      agentsBySM[smName].totalRush += agent.fatturatoRush || 0;\n      agentsBySM[smName].totalRevenue += agent.fatturato?.complessivo || 0;\n      agentsBySM[smName].totalNewClients += agent.nuovoCliente || 0;\n    });\n\n    // Calcola medie e ordina team\n    Object.values(agentsBySM).forEach(sm => {\n      sm.avgRush = sm.totalAgents > 0 ? sm.totalRush / sm.totalAgents : 0;\n      sm.team.sort((a, b) => (b.fatturatoRush || 0) - (a.fatturatoRush || 0));\n    });\n\n    return Object.values(agentsBySM);\n  }, [data, selectedFileDate]);\n\n  // Ordina gli SM\n  const sortedSMData = useMemo(() => {\n    return [...smData].sort((a, b) => {\n      let aVal = a[sortBy] || 0;\n      let bVal = b[sortBy] || 0;\n\n      if (sortOrder === 'desc') {\n        return bVal - aVal;\n      } else {\n        return aVal - bVal;\n      }\n    });\n  }, [smData, sortBy, sortOrder]);\n\n  const handleSort = (field) => {\n    if (sortBy === field) {\n      setSortOrder(sortOrder === 'desc' ? 'asc' : 'desc');\n    } else {\n      setSortBy(field);\n      setSortOrder('desc');\n    }\n  };\n\n  const handleMetricChange = (metric) => {\n    setSelectedMetric(metric);\n    if (metric === 'rush') {\n      setSortBy('totalRush');\n    } else if (metric === 'revenue') {\n      setSortBy('totalRevenue');\n    } else if (metric === 'team') {\n      setSortBy('totalAgents');\n    }\n    setSortOrder('desc');\n  };\n\n  const getRankIcon = (index) => {\n    switch (index) {\n      case 0: return <Crown size={24} className=\"text-yellow-500\" />;\n      case 1: return <Trophy size={24} className=\"text-gray-400\" />;\n      case 2: return <Medal size={24} className=\"text-amber-600\" />;\n      default: return <span className=\"rank-number\">{index + 1}</span>;\n    }\n  };\n\n  const getPerformanceLevel = (avgRush) => {\n    if (avgRush >= 8000) return 'excellent';\n    if (avgRush >= 6000) return 'good';\n    if (avgRush >= 4000) return 'average';\n    return 'needs-improvement';\n  };\n\n  const getMetricColor = (value, type) => {\n    switch (type) {\n      case 'rush':\n        if (value >= 8000) return 'text-green-600';\n        if (value >= 6000) return 'text-blue-600';\n        if (value >= 4000) return 'text-yellow-600';\n        return 'text-red-600';\n      case 'revenue':\n        if (value >= 25000) return 'text-green-600';\n        if (value >= 20000) return 'text-blue-600';\n        if (value >= 15000) return 'text-yellow-600';\n        return 'text-red-600';\n      default:\n        return 'text-gray-600';\n    }\n  };\n\n  // Statistiche generali\n  const totalStats = useMemo(() => {\n    return {\n      totalSMs: sortedSMData.length,\n      totalAgents: sortedSMData.reduce((sum, sm) => sum + sm.totalAgents, 0),\n      totalRush: sortedSMData.reduce((sum, sm) => sum + sm.totalRush, 0),\n      totalRevenue: sortedSMData.reduce((sum, sm) => sum + sm.totalRevenue, 0),\n      avgTeamSize: sortedSMData.length > 0 ?\n        sortedSMData.reduce((sum, sm) => sum + sm.totalAgents, 0) / sortedSMData.length : 0\n    };\n  }, [sortedSMData]);\n\n  return (\n    <div className=\"modern-sm-ranking\">\n      {/* Header con statistiche */}\n      <div className=\"ranking-header\">\n        <div className=\"header-content\">\n          <div className=\"title-section\">\n            <h1 className=\"page-title\">\n              <Trophy size={32} />\n              Classifica Sales Manager\n            </h1>\n            <p className=\"page-subtitle\">\n              Performance e ranking dei coordinatori commerciali\n            </p>\n          </div>\n\n          <div className=\"metrics-selector\">\n            <label className=\"metric-label\">Vista:</label>\n            <div className=\"metric-buttons\">\n              <button\n                className={`metric-btn ${selectedMetric === 'rush' ? 'active' : ''}`}\n                onClick={() => handleMetricChange('rush')}\n              >\n                <TrendingUp size={16} />\n                Rush Focus\n              </button>\n              <button\n                className={`metric-btn ${selectedMetric === 'revenue' ? 'active' : ''}`}\n                onClick={() => handleMetricChange('revenue')}\n              >\n                <DollarSign size={16} />\n                Fatturato\n              </button>\n              <button\n                className={`metric-btn ${selectedMetric === 'team' ? 'active' : ''}`}\n                onClick={() => handleMetricChange('team')}\n              >\n                <Users size={16} />\n                Team\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Statistiche globali */}\n        <div className=\"global-stats\">\n          <div className=\"stat-card primary\">\n            <div className=\"stat-icon\">\n              <Users size={28} />\n            </div>\n            <div className=\"stat-content\">\n              <span className=\"stat-value\">{totalStats.totalSMs}</span>\n              <span className=\"stat-label\">Sales Manager</span>\n            </div>\n          </div>\n\n          <div className=\"stat-card success\">\n            <div className=\"stat-icon\">\n              <Target size={28} />\n            </div>\n            <div className=\"stat-content\">\n              <span className=\"stat-value\">{totalStats.totalAgents}</span>\n              <span className=\"stat-label\">Agenti Totali</span>\n            </div>\n          </div>\n\n          <div className=\"stat-card accent\">\n            <div className=\"stat-icon\">\n              <TrendingUp size={28} />\n            </div>\n            <div className=\"stat-content\">\n              <span className=\"stat-value\">{formatCurrency(totalStats.totalRush)}</span>\n              <span className=\"stat-label\">Rush Totale</span>\n            </div>\n          </div>\n\n          <div className=\"stat-card info\">\n            <div className=\"stat-icon\">\n              <BarChart3 size={28} />\n            </div>\n            <div className=\"stat-content\">\n              <span className=\"stat-value\">{totalStats.avgTeamSize.toFixed(1)}</span>\n              <span className=\"stat-label\">Agenti/SM Medio</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Controlli di ordinamento */}\n      <div className=\"controls-section\">\n        <div className=\"sort-controls\">\n          <span className=\"sort-label\">\n            <Filter size={16} />\n            Ordina per:\n          </span>\n          <div className=\"sort-buttons\">\n            <button\n              className={`sort-btn ${sortBy === 'totalRush' ? 'active' : ''}`}\n              onClick={() => handleSort('totalRush')}\n            >\n              Rush Totale\n              {sortBy === 'totalRush' && (sortOrder === 'desc' ? <ChevronDown size={16} /> : <ChevronUp size={16} />)}\n            </button>\n            <button\n              className={`sort-btn ${sortBy === 'avgRush' ? 'active' : ''}`}\n              onClick={() => handleSort('avgRush')}\n            >\n              Rush Medio\n              {sortBy === 'avgRush' && (sortOrder === 'desc' ? <ChevronDown size={16} /> : <ChevronUp size={16} />)}\n            </button>\n            <button\n              className={`sort-btn ${sortBy === 'totalRevenue' ? 'active' : ''}`}\n              onClick={() => handleSort('totalRevenue')}\n            >\n              Fatturato\n              {sortBy === 'totalRevenue' && (sortOrder === 'desc' ? <ChevronDown size={16} /> : <ChevronUp size={16} />)}\n            </button>\n            <button\n              className={`sort-btn ${sortBy === 'totalAgents' ? 'active' : ''}`}\n              onClick={() => handleSort('totalAgents')}\n            >\n              Team Size\n              {sortBy === 'totalAgents' && (sortOrder === 'desc' ? <ChevronDown size={16} /> : <ChevronUp size={16} />)}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Lista SM */}\n      <div className=\"sm-list\">\n        {sortedSMData.length > 0 ? (\n          sortedSMData.map((sm, index) => (\n            <div\n              key={sm.name}\n              className={`sm-card ${getPerformanceLevel(sm.avgRush)}`}\n            >\n              <div className=\"sm-header\" onClick={() => setExpandedSM(expandedSM === sm.name ? null : sm.name)}>\n                <div className=\"rank-section\">\n                  {getRankIcon(index)}\n                </div>\n\n                <div className=\"sm-info\">\n                  <h3 className=\"sm-name\">{formatAgentName(sm.name)}</h3>\n                  <div className=\"sm-meta\">\n                    <span className=\"team-count\">\n                      <Users size={14} />\n                      {sm.totalAgents} agenti\n                    </span>\n                    <span className=\"avg-indicator\">\n                      <Target size={14} />\n                      Avg: {formatCurrency(sm.avgRush)}\n                    </span>\n                  </div>\n                </div>\n\n                <div className=\"sm-metrics\">\n                  {selectedMetric === 'rush' && (\n                    <>\n                      <div className=\"metric-item primary\">\n                        <span className=\"metric-label\">Rush Totale</span>\n                        <span className={`metric-value ${getMetricColor(sm.totalRush, 'rush')}`}>\n                          {formatCurrency(sm.totalRush)}\n                        </span>\n                      </div>\n                      <div className=\"metric-item secondary\">\n                        <span className=\"metric-label\">Fatturato</span>\n                        <span className={`metric-value ${getMetricColor(sm.totalRevenue, 'revenue')}`}>\n                          {formatCurrency(sm.totalRevenue)}\n                        </span>\n                      </div>\n                    </>\n                  )}\n                  {selectedMetric === 'revenue' && (\n                    <>\n                      <div className=\"metric-item primary\">\n                        <span className=\"metric-label\">Fatturato</span>\n                        <span className={`metric-value ${getMetricColor(sm.totalRevenue, 'revenue')}`}>\n                          {formatCurrency(sm.totalRevenue)}\n                        </span>\n                      </div>\n                      <div className=\"metric-item secondary\">\n                        <span className=\"metric-label\">Rush Totale</span>\n                        <span className={`metric-value ${getMetricColor(sm.totalRush, 'rush')}`}>\n                          {formatCurrency(sm.totalRush)}\n                        </span>\n                      </div>\n                    </>\n                  )}\n                  {selectedMetric === 'team' && (\n                    <>\n                      <div className=\"metric-item primary\">\n                        <span className=\"metric-label\">Agenti</span>\n                        <span className=\"metric-value\">\n                          {formatNumber(sm.totalAgents)}\n                        </span>\n                      </div>\n                      <div className=\"metric-item secondary\">\n                        <span className=\"metric-label\">Rush Medio</span>\n                        <span className=\"metric-value\">\n                          {formatCurrency(sm.avgRush)}\n                        </span>\n                      </div>\n                    </>\n                  )}\n                  <div className=\"metric-item tertiary\">\n                    <span className=\"metric-label\">Nuovi Clienti</span>\n                    <span className=\"metric-value text-purple-600\">\n                      {formatNumber(sm.totalNewClients)}\n                    </span>\n                  </div>\n                </div>\n\n                <div className=\"expand-indicator\">\n                  {expandedSM === sm.name ? <ChevronUp size={20} /> : <ChevronDown size={20} />}\n                </div>\n              </div>\n\n              {/* Team espanso */}\n              {expandedSM === sm.name && (\n                <div className=\"team-details\">\n                  <div className=\"team-header\">\n                    <h4>\n                      <Star size={16} />\n                      Team di {formatAgentName(sm.name)}\n                    </h4>\n                  </div>\n\n                  <div className=\"agents-grid\">\n                    {sm.team.map((agent, agentIndex) => (\n                      <div key={agent.nome} className=\"agent-mini-card\">\n                        <div className=\"agent-rank\">\n                          #{agentIndex + 1}\n                        </div>\n                        <div className=\"agent-info\">\n                          <h5 className=\"agent-name\">{formatAgentName(agent.nome)}</h5>\n                          <div className=\"agent-metrics\">\n                            <div className=\"agent-metric\">\n                              <span className=\"label\">Rush:</span>\n                              <span className=\"value rush\">\n                                {formatCurrency(agent.fatturatoRush || 0)}\n                              </span>\n                            </div>\n                            <div className=\"agent-metric\">\n                              <span className=\"label\">Fatturato:</span>\n                              <span className=\"value revenue\">\n                                {formatCurrency(agent.fatturato?.complessivo || 0)}\n                              </span>\n                            </div>\n                            <div className=\"agent-metric\">\n                              <span className=\"label\">Clienti:</span>\n                              <span className=\"value clients\">\n                                {formatNumber(agent.nuovoCliente || 0)}\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          ))\n        ) : (\n          <div className=\"no-data\">\n            <Trophy size={48} className=\"opacity-30\" />\n            <h3>Nessun dato disponibile</h3>\n            <p>Carica un file Excel per visualizzare la classifica SM</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ModernSMRanking;\n","import React, { useState, useMemo, useCallback } from 'react';\nimport { useData } from '../App';\nimport { formatAgentName } from '../utils/formatter';\nimport './ModernProductsAnalysis.css';\n\n// Import per i grafici Recharts\nimport {\n  PieChart as RechartsPieChart,\n  Pie,\n  Cell,\n  ResponsiveContainer,\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  LineChart,\n  Line,\n  AreaChart,\n  Area,\n  LabelList\n} from 'recharts';\n\n// Import icone esistenti + nuove\nimport {\n  Package, Smartphone, Globe, Zap, Phone, Award,\n  TrendingUp, BarChart3, PieChart, Users, Target,\n  Filter,\n  Wifi, Shield, Star, Activity\n} from 'lucide-react';\n\n// Simulazione delle funzioni di utilità\nconst formatCurrency = (value) => {\n  return new Intl.NumberFormat('it-IT', {\n    style: 'currency',\n    currency: 'EUR'\n  }).format(value || 0);\n};\n\nconst formatNumber = (value) => {\n  return new Intl.NumberFormat('it-IT').format(value || 0);\n};\n\nconst formatCount = (value, { includeUnit = false } = {}) => {\n  const numericValue = Number(value) || 0;\n  const formatted = formatNumber(numericValue);\n  if (!includeUnit) {\n    return formatted;\n  }\n  const unit = numericValue === 1 ? 'agente' : 'agenti';\n  return `${formatted} ${unit}`;\n};\n\nconst ModernProductsAnalysis = () => {\n  const { data, selectedFileDate } = useData();\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [sortBy, setSortBy] = useState('volume');\n  const [viewMode, setViewMode] = useState('cards'); // cards, table, chart\n\n  // Aggiungi questi stati al componente\n  const [chartType, setChartType] = useState('pie'); // pie, bar, line, area\n  const [chartMetric, setChartMetric] = useState('fatturato'); // fatturato, volume, agents\n\n  // Colori per i grafici\n  const CHART_COLORS = [\n    '#8b5cf6', '#06b6d4', '#10b981', '#f59e0b', '#ef4444',\n    '#6366f1', '#84cc16', '#f97316', '#ec4899', '#14b8a6'\n  ];\n\n  // Definizione categorie prodotti con icone e colori\n  const productCategories = useMemo(() => ({\n    'mobile': {\n      name: 'Telefonia Mobile',\n      icon: Smartphone,\n      color: 'from-blue-500 to-blue-600',\n      products: ['simVoce', 'simDati', 'mnp', 'easyRent']\n    },\n    'fixed': {\n      name: 'Telefonia Fissa',\n      icon: Phone,\n      color: 'from-green-500 to-green-600',\n      products: ['adsl', 'linkOu', 'linkOa', 'linkOaStart', 'interniOa']\n    },\n    'digital': {\n      name: 'Servizi Digitali',\n      icon: Shield,\n      color: 'from-purple-500 to-purple-600',\n      products: ['sdm', 'ssc', 'yourBackup', 'cloudNas', 'miia', 'easyGdpr']\n    },\n    'energy': {\n      name: 'Energia',\n      icon: Zap,\n      color: 'from-orange-500 to-orange-600',\n      products: ['fastwebEnergia']\n    },\n    'special': {\n      name: 'Prodotti Speciali',\n      icon: Award,\n      color: 'from-pink-500 to-pink-600',\n      products: ['station']\n    }\n  }), []);\n\n  // Processamento dati prodotti\n  const productsData = useMemo(() => {\n    if (!selectedFileDate || !data.uploadedFiles?.length) {\n      return {};\n    }\n    let agents = null;\n    const file = data.uploadedFiles.find(f => f.date === selectedFileDate);\n    if (file?.data?.agents) {\n      agents = file.data.agents;\n    }\n    else if (data.processedData && data.processedData[selectedFileDate]?.agents) {\n      agents = data.processedData[selectedFileDate].agents;\n    }\n    if (!agents || !Array.isArray(agents) || agents.length === 0) {\n      return {};\n    }\n    const products = {};\n    const productMapping = {\n      simVoce: 'SIM Voce', simDati: 'SIM Dati', mnp: 'MNP', easyRent: 'Easy Rent', adsl: 'ADSL', linkOu: 'Link OU', linkOa: 'Link OA', linkOaStart: 'Link OA Start', interniOa: 'Interni OA', sdm: 'SDM', ssc: 'SSC', yourBackup: 'Your Backup', cloudNas: 'Cloud NAS', miia: 'MIIA', easyGdpr: 'Easy GDPR', fastwebEnergia: 'Fastweb Energia', station: 'Station'\n    };\n    const revenueKeyMapping = {\n      simVoce: 'fatturatoVoce', simDati: 'fatturatoDati', easyRent: 'fatturatoEasyRent', linkOu: 'fatturatoOu', linkOa: 'fatturatoOa', easyDeal: 'fatturatoEasyDeal', altro: 'fatturatoAltro', serviziDigitali: 'fatturatoServiziDigitali', custom: 'fatturatoCustom', sdm: 'fatturatoSdm', ssc: 'fatturatoSsc', yourBackup: 'fatturatoYourBackup', cloudNas: 'fatturatoCloudNas', easyGdpr: 'fatturatoEasyGdpr', miia: 'fatturatoMiia', nuovoCliente: 'fatturatoNuovoCliente'\n    };\n    Object.keys(productMapping).forEach(key => {\n      const revenueKey = revenueKeyMapping[key] || `fatturato${key.charAt(0).toUpperCase() + key.slice(1)}`;\n      const agentsWithProduct = agents\n        .filter(agent => agent && typeof agent === 'object')\n        .map(agent => ({\n          nome: agent.nome || 'N/A',\n          volume: Number(agent[key]) || 0,\n          fatturato: Number(agent[revenueKey]) || 0\n        }))\n        .filter(item => item.volume > 0)\n        .sort((a, b) => b.volume - a.volume);\n      if (agentsWithProduct.length > 0) {\n        products[key] = {\n          displayName: productMapping[key],\n          volume: agentsWithProduct.reduce((sum, item) => sum + item.volume, 0),\n          fatturato: agentsWithProduct.reduce((sum, item) => sum + item.fatturato, 0),\n          agents: agentsWithProduct.length,\n          topAgents: agentsWithProduct.slice(0, 3).map(item => formatAgentName(item.nome))\n        };\n      }\n    });\n    return products;\n  }, [data, selectedFileDate]);\n\n  // Filtra prodotti per categoria\n  const filteredProducts = useMemo(() => {\n    if (selectedCategory === 'all') return productsData;\n    const categoryProducts = productCategories[selectedCategory]?.products || [];\n    return Object.fromEntries(\n      Object.entries(productsData).filter(([key]) => categoryProducts.includes(key))\n    );\n  }, [productsData, selectedCategory, productCategories]);\n\n  // Ordina prodotti\n  const sortedProducts = useMemo(() => {\n    const entries = Object.entries(filteredProducts);\n    return entries.sort(([, a], [, b]) => {\n      switch (sortBy) {\n        case 'volume': return b.volume - a.volume;\n        case 'fatturato': return b.fatturato - a.fatturato;\n        case 'agents': return b.agents - a.agents;\n        default: return 0;\n      }\n    });\n  }, [filteredProducts, sortBy]);\n\n  // Calcola statistiche totali\n  const totalStats = useMemo(() => {\n    const products = Object.values(filteredProducts);\n    return {\n      totalVolume: products.reduce((sum, p) => sum + p.volume, 0),\n      totalRevenue: products.reduce((sum, p) => sum + p.fatturato, 0),\n      totalProducts: products.length\n    };\n  }, [filteredProducts]);\n\n  // Helper functions\n  const getProductIcon = (productName) => {\n    const iconMap = {\n      simVoce: Smartphone, simDati: Globe, mnp: Zap, easyRent: Phone, adsl: Wifi, linkOu: Shield, linkOa: Star,\n    };\n    return iconMap[productName] || Package;\n  };\n\n  const getProductColor = (productName) => {\n    const colorMap = {\n      simVoce: 'linear-gradient(135deg, #3b82f6, #1d4ed8)', simDati: 'linear-gradient(135deg, #06b6d4, #0891b2)', mnp: 'linear-gradient(135deg, #8b5cf6, #7c3aed)', easyRent: 'linear-gradient(135deg, #10b981, #059669)', adsl: 'linear-gradient(135deg, #f59e0b, #d97706)', linkOu: 'linear-gradient(135deg, #ef4444, #dc2626)', linkOa: 'linear-gradient(135deg, #6366f1, #4f46e5)',\n    };\n    return colorMap[productName] || 'linear-gradient(135deg, #64748b, #475569)';\n  };\n\n  const getProductDisplayName = (productName) => {\n    const nameMap = {\n      simVoce: 'SIM Voce', simDati: 'SIM Dati', mnp: 'Portabilità', easyRent: 'Easy Rent', adsl: 'ADSL', linkOu: 'Link OU', linkOa: 'Link OA', linkOaStart: 'Link OA Start', interniOa: 'Interni OA',\n    };\n    return nameMap[productName] || productName;\n  };\n\n  const filteredProductsArray = useMemo(() => {\n    return Object.entries(filteredProducts).map(([name, productData]) => ({\n      name,\n      ...productData\n    }));\n  }, [filteredProducts]);\n\n  const formatChartValue = useCallback(\n    (value, options = {}) => {\n      const numericValue = Number(value) || 0;\n      switch (chartMetric) {\n        case 'fatturato':\n          return formatCurrency(numericValue);\n        case 'agents':\n          return formatCount(numericValue, options);\n        case 'volume':\n        default:\n          return formatNumber(numericValue);\n      }\n    },\n    [chartMetric]\n  );\n\n  const chartData = useMemo(() => {\n    if (!filteredProductsArray || !Array.isArray(filteredProductsArray) || filteredProductsArray.length === 0) return [];\n    try {\n      return filteredProductsArray\n        .filter(product => product && product.name && typeof product === 'object' && product.name !== null && product.name !== undefined && product.name !== '')\n        .map(product => {\n          try {\n            let value = 0;\n            if (chartMetric === 'fatturato') value = Number(product.fatturato) || 0;\n            else if (chartMetric === 'volume') value = Number(product.volume) || 0;\n            else if (chartMetric === 'agents') value = Number(product.agents) || 0;\n            const displayName = getProductDisplayName(product.name);\n            if (!displayName) return null;\n            return {\n              name: String(displayName),\n              value: Math.max(0, Number(value) || 0),\n              originalName: product.name\n            };\n          } catch (error) { return null; }\n        })\n        .filter(item => item && item.value > 0 && typeof item.name === 'string' && typeof item.value === 'number' && !isNaN(item.value))\n        .sort((a, b) => (b.value || 0) - (a.value || 0));\n    } catch (error) { return []; }\n  }, [filteredProductsArray, chartMetric]);\n\n  return (\n    <div className=\"modern-products-analysis\">\n      {/* Header, Stats, Filters, Cards, and Table views remain the same */}\n      <div className=\"products-header\">\n        <div className=\"header-content\">\n          <div className=\"title-section\">\n            <h1 className=\"page-title\"><Package size={32} />Analisi Prodotti</h1>\n            <p className=\"page-subtitle\">Performance e trends dei prodotti commerciali</p>\n          </div>\n          <div className=\"view-controls\">\n            <div className=\"view-mode-selector\">\n              <button className={`view-btn ${viewMode === 'cards' ? 'active' : ''}`} onClick={() => setViewMode('cards')}><BarChart3 size={16} />Cards</button>\n              <button className={`view-btn ${viewMode === 'table' ? 'active' : ''}`} onClick={() => setViewMode('table')}><Activity size={16} />Tabella</button>\n              <button className={`view-btn ${viewMode === 'chart' ? 'active' : ''}`} onClick={() => setViewMode('chart')}><PieChart size={16} />Grafici</button>\n            </div>\n          </div>\n        </div>\n        <div className=\"global-stats\">\n          <div className=\"stat-card primary\"><div className=\"stat-icon\"><Package size={28} /></div><div className=\"stat-content\"><span className=\"stat-value\">{totalStats.totalProducts}</span><span className=\"stat-label\">Prodotti Attivi</span></div></div>\n          <div className=\"stat-card success\"><div className=\"stat-icon\"><Target size={28} /></div><div className=\"stat-content\"><span className=\"stat-value\">{formatNumber(totalStats.totalVolume)}</span><span className=\"stat-label\">Volume Totale</span></div></div>\n          <div className=\"stat-card accent\"><div className=\"stat-icon\"><TrendingUp size={28} /></div><div className=\"stat-content\"><span className=\"stat-value\">{formatCurrency(totalStats.totalRevenue)}</span><span className=\"stat-label\">Fatturato Prodotti</span></div></div>\n        </div>\n      </div>\n      <div className=\"controls-section\">\n        <div className=\"category-filters\">\n          <span className=\"filter-label\"><Filter size={16} />Categorie:</span>\n          <div className=\"category-buttons\">\n            <button className={`category-btn ${selectedCategory === 'all' ? 'active' : ''}`} onClick={() => setSelectedCategory('all')}><Package size={16} />Tutti</button>\n            {Object.entries(productCategories).map(([key, category]) => {\n              const Icon = category.icon;\n              return (<button key={key} className={`category-btn ${selectedCategory === key ? 'active' : ''}`} onClick={() => setSelectedCategory(key)}><Icon size={16} />{category.name}</button>);\n            })}\n          </div>\n        </div>\n        <div className=\"sort-controls\">\n          <span className=\"sort-label\">Ordina per:</span>\n          <div className=\"sort-buttons\">\n            <button className={`sort-btn ${sortBy === 'volume' ? 'active' : ''}`} onClick={() => setSortBy('volume')}>Volume</button>\n            <button className={`sort-btn ${sortBy === 'fatturato' ? 'active' : ''}`} onClick={() => setSortBy('fatturato')}>Fatturato</button>\n            <button className={`sort-btn ${sortBy === 'agents' ? 'active' : ''}`} onClick={() => setSortBy('agents')}>Agenti</button>\n          </div>\n        </div>\n      </div>\n      {viewMode === 'cards' && (\n        <div className=\"products-grid\">\n          {sortedProducts.length > 0 ? (\n            sortedProducts.map(([productKey, product]) => {\n              const Icon = getProductIcon(productKey);\n              return (\n                <div key={productKey} className=\"product-card\">\n                  <div className=\"product-header\"><div className=\"product-icon\" style={{ background: getProductColor(productKey) }}><Icon size={24} className=\"text-white\" /></div><div className=\"product-info\"><h3 className=\"product-name\">{product.displayName || productKey}</h3><div className=\"product-meta\"><span className=\"agents-count\"><Users size={14} />{product.agents} agenti</span></div></div></div>\n                  <div className=\"product-metrics\"><div className=\"metric-row\"><div className=\"metric-item\"><span className=\"metric-label\">Volume</span><span className=\"metric-value volume\">{formatNumber(product.volume)}</span></div>{product.fatturato > 0 && (<div className=\"metric-item\"><span className=\"metric-label\">Fatturato</span><span className=\"metric-value revenue\">{formatCurrency(product.fatturato)}</span></div>)}</div></div>\n                  <div className=\"top-agents\"><span className=\"top-agents-label\">Top Performer:</span><div className=\"agents-list\">{product.topAgents.slice(0, 2).map((agent, index) => (<span key={agent} className={`agent-badge ${index === 0 ? 'gold' : 'silver'}`}>{index === 0 && '🥇'} {agent.split(' ')[0]}</span>))}</div></div>\n                </div>);\n            })\n          ) : (<div className=\"no-products\"><Package size={48} className=\"opacity-30\" /><h3>Nessun prodotto trovato</h3><p>Modifica i filtri o carica nuovi dati per visualizzare i prodotti.</p></div>)}\n        </div>\n      )}\n      {viewMode === 'table' && (\n        <div className=\"products-table-container\">\n          <div className=\"table-wrapper\">\n            <table className=\"products-table\">\n              <thead><tr><th>Prodotto</th><th>Volume</th><th>Fatturato</th><th>Agenti</th><th>Top Performer</th></tr></thead>\n              <tbody>\n                {sortedProducts.map(([productKey, product], index) => {\n                  const Icon = getProductIcon(productKey);\n                  return (\n                    <tr key={productKey} className=\"product-row\">\n                      <td className=\"product-cell\"><div className=\"product-info-table\"><div className=\"product-icon-small\" style={{ background: getProductColor(productKey) }}><Icon size={16} className=\"text-white\" /></div><span className=\"product-name-table\">{product.displayName || productKey}</span></div></td>\n                      <td className=\"volume-cell\">{formatNumber(product.volume)}</td>\n                      <td className=\"revenue-cell\">{product.fatturato > 0 ? formatCurrency(product.fatturato) : '-'}</td>\n                      <td className=\"agents-cell\">{product.agents}</td>\n                      <td className=\"top-agent-cell\">{product.topAgents[0]?.split(' ')[0] || '-'}</td>\n                    </tr>);\n                })}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {/* Production-ready Chart View */}\n      {viewMode === 'chart' && (\n      <div className=\"charts-container-real\">\n        <div className=\"chart-controls\">\n          <div className=\"chart-type-selector\">\n            <label>Tipo Grafico:</label>\n            <select value={chartType} onChange={(e) => setChartType(e.target.value)}>\n              <option value=\"pie\">Grafico a Torta</option>\n              <option value=\"bar\">Grafico a Barre</option>\n              <option value=\"line\">Grafico Lineare</option>\n              <option value=\"area\">Grafico ad Area</option>\n            </select>\n          </div>\n          <div className=\"chart-metric-selector\">\n            <label>Metrica:</label>\n            <select value={chartMetric} onChange={(e) => setChartMetric(e.target.value)}>\n              <option value=\"fatturato\">Fatturato</option>\n              <option value=\"volume\">Volume</option>\n              <option value=\"agents\">N° Agenti</option>\n            </select>\n          </div>\n        </div>\n\n        {!chartData || chartData.length === 0 ? (\n          <div className=\"no-chart-data\">\n            <Package size={48} className=\"opacity-30\" />\n            <h3>⚠️ NESSUN DATO PER I GRAFICI</h3>\n            <p>Prova a cambiare file, filtri, o controlla che i dati siano stati caricati correttamente.</p>\n          </div>\n        ) : (\n          <div className=\"charts-grid\">\n            <div className=\"main-chart-card\">\n              <div className=\"chart-header\">\n                <h3>Distribuzione per {chartMetric}</h3>\n              </div>\n              <div className=\"chart-wrapper\" style={{ width: '100%', height: '400px' }}>\n                <ResponsiveContainer>\n                  { chartType === 'pie' ? (\n                    <RechartsPieChart>\n                      <Pie\n                        data={chartData}\n                        dataKey=\"value\"\n                        nameKey=\"name\"\n                        cx=\"50%\"\n                        cy=\"50%\"\n                        outerRadius={120}\n                        label={({ value }) => formatChartValue(value, { includeUnit: chartMetric === 'agents' })}\n                        labelLine={false}\n                      >\n                        {chartData.map((entry, index) => (<Cell key={`cell-${index}`} fill={CHART_COLORS[index % CHART_COLORS.length]} />))}\n                      </Pie>\n                      <Tooltip formatter={(value) => formatChartValue(value, { includeUnit: chartMetric === 'agents' })} />\n                      <Legend />\n                    </RechartsPieChart>\n                  ) : chartType === 'bar' ? (\n                    <BarChart data={chartData}>\n                      <CartesianGrid strokeDasharray=\"3 3\" />\n                      <XAxis dataKey=\"name\" angle={-25} textAnchor=\"end\" height={80} interval={0} fontSize={10} />\n                      <YAxis tickFormatter={(value) => formatChartValue(value)} />\n                      <Tooltip formatter={(value) => formatChartValue(value, { includeUnit: chartMetric === 'agents' })} />\n                      <Legend />\n                      <Bar dataKey=\"value\">\n                        <LabelList\n                          dataKey=\"value\"\n                          position=\"top\"\n                          formatter={(value) => formatChartValue(value, { includeUnit: chartMetric === 'agents' })}\n                        />\n                        {chartData.map((entry, index) => <Cell key={`cell-${index}`} fill={CHART_COLORS[index % CHART_COLORS.length]} />)}\n                      </Bar>\n                    </BarChart>\n                  ) : chartType === 'line' ? (\n                    <LineChart data={chartData}>\n                      <CartesianGrid strokeDasharray=\"3 3\" />\n                      <XAxis dataKey=\"name\" />\n                      <YAxis tickFormatter={(value) => formatChartValue(value)} />\n                      <Tooltip formatter={(value) => formatChartValue(value, { includeUnit: chartMetric === 'agents' })} />\n                      <Legend />\n                      <Line type=\"monotone\" dataKey=\"value\" stroke={CHART_COLORS[0]}>\n                        <LabelList\n                          dataKey=\"value\"\n                          position=\"top\"\n                          formatter={(value) => formatChartValue(value, { includeUnit: chartMetric === 'agents' })}\n                        />\n                      </Line>\n                    </LineChart>\n                  ) : ( // Area Chart\n                    <AreaChart data={chartData}>\n                      <CartesianGrid strokeDasharray=\"3 3\" />\n                      <XAxis dataKey=\"name\" />\n                      <YAxis tickFormatter={(value) => formatChartValue(value)} />\n                      <Tooltip formatter={(value) => formatChartValue(value, { includeUnit: chartMetric === 'agents' })} />\n                      <Legend />\n                      <Area type=\"monotone\" dataKey=\"value\" stroke={CHART_COLORS[0]} fill={CHART_COLORS[0]} fillOpacity={0.3}>\n                        <LabelList\n                          dataKey=\"value\"\n                          position=\"top\"\n                          formatter={(value) => formatChartValue(value, { includeUnit: chartMetric === 'agents' })}\n                        />\n                      </Area>\n                    </AreaChart>\n                  )}\n                </ResponsiveContainer>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    )}\n    </div>\n  );\n};\n\nexport default ModernProductsAnalysis;\n","import React, { useState, useMemo } from 'react';\nimport { useData } from '../App';\nimport { formatAgentName } from '../utils/formatter';\nimport { formatCurrency, formatNumber } from '../utils/excelParser';\nimport './ModernNewClientsPage.css';\nimport { UserPlus, RefreshCw, Search, Filter, Users, ArrowUp, ArrowDown, Trophy, BarChart, DollarSign, Briefcase, Building, Handshake, TrendingUp } from 'lucide-react';\n\nconst getPerformanceLevel = (clientCount) => {\n    if (clientCount >= 5) return 'high';\n    if (clientCount >= 2) return 'medium';\n    return 'low';\n};\n\nconst NewClientAgentCard = ({ agent }) => {\n    const performance = getPerformanceLevel(agent.nuovoCliente);\n    const avatarName = agent.nome.split(' ').map(n => n[0]).join('').substring(0, 2);\n\n    return (\n        <div className={`new-client-card ${performance}`}>\n            <div className={`card-header ${performance}`}>\n                <div className=\"avatar\">{avatarName}</div>\n                <div className=\"agent-info\">\n                    <h3 className=\"agent-name\">{agent.nome}</h3>\n                    <p className=\"agent-sm\">{agent.sm}</p>\n                </div>\n                <div className=\"performance-badge\">\n                    <span className=\"new-clients-count\">{formatNumber(agent.nuovoCliente)}</span>\n                    <UserPlus size={20} />\n                </div>\n            </div>\n            <div className=\"card-body\">\n                <div className=\"stats-grid\">\n                    <div className=\"stat-item highlight\">\n                        <div className=\"stat-icon\"><DollarSign size={20} /></div>\n                        <div className=\"stat-content\">\n                            <span className=\"stat-label\">Fatturato Nuovi Clienti</span>\n                            <span className=\"stat-value primary\">{formatCurrency(agent.fatturatoNuovoCliente)}</span>\n                        </div>\n                    </div>\n                    <div className=\"stat-item\">\n                        <div className=\"stat-icon\"><TrendingUp size={20} /></div>\n                        <div className=\"stat-content\">\n                            <span className=\"stat-label\">Fatturato Rush</span>\n                            <span className=\"stat-value\">{formatCurrency(agent.fatturatoRush)}</span>\n                        </div>\n                    </div>\n                </div>\n                {/* Placeholder for acquisition channels as data is not available */}\n                <div className=\"acquisition-channels\">\n                    <h5>Canali Acquisizione</h5>\n                    <div className=\"channels-grid\">\n                        <div className=\"channel-item\">\n                            <span className=\"channel-name\">Diretto</span>\n                            <span className=\"channel-value\">-</span>\n                        </div>\n                        <div className=\"channel-item\">\n                            <span className=\"channel-name\">Referral</span>\n                            <span className=\"channel-value\">-</span>\n                        </div>\n                         <div className=\"channel-item\">\n                            <span className=\"channel-name\">Altro</span>\n                            <span className=\"channel-value\">-</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className=\"card-footer\">\n                <div className=\"performance-indicator\">\n                    <div className={`indicator-dot ${performance}`}></div>\n                    <span className=\"performance-text\">Performance: {performance.charAt(0).toUpperCase() + performance.slice(1)}</span>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n\nconst PerformerCard = ({ agent, rank }) => {\n    const rankClass = `rank-${rank}`;\n    return (\n        <div className={`performer-card ${rankClass}`}>\n            <div className=\"performer-rank\">{rank}</div>\n            <div className=\"performer-info\">\n                <h4>{agent.nome}</h4>\n                <p className=\"performer-sm\">{agent.sm}</p>\n            </div>\n            <div className=\"performer-stats\">\n                <div className=\"stat-item\">\n                    <UserPlus size={16} /> <strong>{formatNumber(agent.nuovoCliente)}</strong> Clienti\n                </div>\n                <div className=\"stat-item primary\">\n                    <DollarSign size={16} /> <strong>{formatCurrency(agent.fatturatoNuovoCliente)}</strong> Fatturato\n                </div>\n            </div>\n        </div>\n    );\n};\n\n\nconst ModernNewClientsPage = () => {\n    const { data, selectedFileDate, loadFiles, globalLoading } = useData();\n    const [refreshing, setRefreshing] = useState(false);\n    const [filters, setFilters] = useState({ searchTerm: '', selectedSm: '' });\n    const [sort, setSort] = useState({ by: 'nuovoCliente', order: 'desc' });\n\n    const { agents, smList, stats, topPerformers, allAgentsInPeriod } = useMemo(() => {\n        const emptyState = { agents: [], smList: [], stats: { totalClients: 0, totalRevenue: 0, avgClientsPerAgent: 0, topSm: { name: 'N/A', clients: 0 } }, topPerformers: [], allAgentsInPeriod: [] };\n        if (!selectedFileDate || !data.uploadedFiles || data.uploadedFiles.length === 0) return emptyState;\n\n        const file = data.uploadedFiles.find(f => f.date === selectedFileDate);\n        if (!file || !file.data || !file.data.agents) return emptyState;\n\n        const allAgents = file.data.agents.map((agent, index) => ({ ...agent, id: `${file.date}-${agent.nome}-${index}`, nome: formatAgentName(agent.nome) }));\n        const uniqueSmList = [...new Set(allAgents.map(a => a.sm).filter(Boolean))].sort();\n\n        let filteredAgents = allAgents.filter(agent =>\n            agent.nome.toLowerCase().includes(filters.searchTerm.toLowerCase()) &&\n            (filters.selectedSm === '' || agent.sm === filters.selectedSm)\n        );\n\n        filteredAgents.sort((a, b) => {\n            const valA = a[sort.by] || 0;\n            const valB = b[sort.by] || 0;\n            return sort.order === 'asc' ? valA - valB : valB - valA;\n        });\n\n        const totalClients = filteredAgents.reduce((sum, agent) => sum + (agent.nuovoCliente || 0), 0);\n        const totalRevenue = filteredAgents.reduce((sum, agent) => sum + (agent.fatturatoNuovoCliente || 0), 0);\n        const avgClientsPerAgent = filteredAgents.length > 0 ? totalClients / filteredAgents.length : 0;\n\n        const smPerformance = allAgents.reduce((acc, agent) => {\n            acc[agent.sm] = (acc[agent.sm] || 0) + (agent.nuovoCliente || 0);\n            return acc;\n        }, {});\n        const topSmEntry = Object.entries(smPerformance).sort((a, b) => b[1] - a[1])[0];\n        const topSm = topSmEntry ? { name: topSmEntry[0], clients: topSmEntry[1] } : { name: 'N/A', clients: 0 };\n\n        const topPerformers = [...allAgents].filter(a => a.nuovoCliente > 0).sort((a, b) => (b.nuovoCliente || 0) - (a.nuovoCliente || 0)).slice(0, 3);\n\n        return { agents: filteredAgents, smList: uniqueSmList, stats: { totalClients, totalRevenue, avgClientsPerAgent, topSm }, topPerformers, allAgentsInPeriod: allAgents };\n    }, [data.uploadedFiles, selectedFileDate, filters, sort]);\n\n    const handleFilterChange = (name, value) => setFilters(prev => ({ ...prev, [name]: value }));\n    const handleSortChange = (newSortBy) => setSort(prev => ({ ...prev, by: newSortBy, order: prev.by === newSortBy && prev.order === 'desc' ? 'asc' : 'desc' }));\n    const handleRefresh = async () => { setRefreshing(true); await loadFiles(); setRefreshing(false); };\n    const resetFilters = () => { setFilters({ searchTerm: '', selectedSm: '' }); setSort({ by: 'nuovoCliente', order: 'desc' }); };\n\n    if (globalLoading && !stats.totalClients) {\n        return <div className=\"modern-new-clients-loading\"><div className=\"loading-spinner\"></div><p>Analizzando i dati di acquisizione...</p></div>;\n    }\n    if (!selectedFileDate || !data.processedData[selectedFileDate]) {\n        return <div className=\"modern-new-clients-loading\"><h3>Nessun file selezionato</h3><p>Per favore, vai alla sezione \"Gestione File\" e seleziona un periodo da analizzare.</p></div>;\n    }\n\n    return (\n        <div className=\"modern-new-clients-container\">\n            <div className=\"page-header\">\n                <div className=\"header-content\">\n                    <div className=\"header-text\">\n                        <h1 className=\"page-title\"><UserPlus size={32} /> Acquisizione Nuovi Clienti</h1>\n                        <p className=\"page-subtitle\">Analisi delle performance di acquisizione della rete vendita.</p>\n                    </div>\n                    <button className={`refresh-btn ${refreshing || globalLoading ? 'refreshing' : ''}`} onClick={handleRefresh} disabled={refreshing || globalLoading}>\n                        <RefreshCw size={20} /> {refreshing || globalLoading ? 'Aggiornamento...' : 'Aggiorna Dati'}\n                    </button>\n                </div>\n                <div className=\"header-stats\">\n                    <div className=\"stat-card primary\"><div className=\"stat-icon\"><Handshake size={24} /></div><div className=\"stat-content\"><span className=\"stat-value\">{formatNumber(stats.totalClients)}</span><span className=\"stat-label\">Clienti Acquisiti</span></div></div>\n                    <div className=\"stat-card success\"><div className=\"stat-icon\"><DollarSign size={24} /></div><div className=\"stat-content\"><span className=\"stat-value\">{formatCurrency(stats.totalRevenue)}</span><span className=\"stat-label\">Fatturato da Nuovi Clienti</span></div></div>\n                    <div className=\"stat-card accent\"><div className=\"stat-icon\"><BarChart size={24} /></div><div className=\"stat-content\"><span className=\"stat-value\">{stats.avgClientsPerAgent.toFixed(1)}</span><span className=\"stat-label\">Media Clienti / Agente</span></div></div>\n                    <div className=\"stat-card info\"><div className=\"stat-icon\"><Building size={24} /></div><div className=\"stat-content\"><span className=\"stat-value\">{formatAgentName(stats.topSm.name)}</span><span className=\"stat-label\">Top Coordinatore ({formatNumber(stats.topSm.clients)} clienti)</span></div></div>\n                </div>\n            </div>\n\n            {topPerformers.length > 0 && (\n                <div className=\"top-performers-section\">\n                    <h2 className=\"section-title\"><Trophy size={24}/> Top Performers</h2>\n                    <div className=\"performers-grid\">\n                        {topPerformers.map((agent, index) => <PerformerCard key={agent.id} agent={agent} rank={index + 1} />)}\n                    </div>\n                </div>\n            )}\n\n            <div className=\"filters-modern\">\n                <div className=\"filters-header\">\n                    <div className=\"filters-title\"><Filter size={20} />Filtri Agenti</div>\n                    <div className=\"results-count\">{agents.length} di {allAgentsInPeriod.length} agenti</div>\n                </div>\n                <div className=\"filters-grid\">\n                    <div className=\"filter-group\">\n                        <label className=\"filter-label\"><Search size={16} /> Cerca Agente</label>\n                        <input type=\"text\" placeholder=\"Nome agente...\" value={filters.searchTerm} onChange={(e) => handleFilterChange('searchTerm', e.target.value)} className=\"modern-search-input\" />\n                    </div>\n                    <div className=\"filter-group\">\n                        <label className=\"filter-label\"><Users size={16} /> Filtra per Coordinatore</label>\n                        <select value={filters.selectedSm} onChange={(e) => handleFilterChange('selectedSm', e.target.value)} className=\"modern-select\">\n                            <option value=\"\">Tutti i Coordinatori</option>\n                            {smList.map(sm => <option key={sm} value={sm}>{sm}</option>)}\n                        </select>\n                    </div>\n                    <div className=\"filter-group\">\n                        <label className=\"filter-label\">Ordina Per</label>\n                        <div className=\"sort-controls\">\n                            <select value={sort.by} onChange={(e) => handleSortChange(e.target.value)} className=\"modern-select\">\n                                <option value=\"nuovoCliente\">Nuovi Clienti</option>\n                                <option value=\"fatturatoNuovoCliente\">Fatturato NC</option>\n                                <option value=\"fatturatoRush\">Fatturato Rush</option>\n                            </select>\n                            <button className=\"sort-order-btn\" onClick={() => handleSortChange(sort.by)}>\n                                {sort.order === 'desc' ? <ArrowDown size={16} /> : <ArrowUp size={16} />}\n                            </button>\n                        </div>\n                    </div>\n                     <div className=\"filter-group\">\n                        <label className=\"filter-label\">&nbsp;</label>\n                        <button className=\"reset-filters-btn\" onClick={resetFilters}>Reset Filtri</button>\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"agents-section\">\n                 <h2 className=\"section-title\"><Briefcase size={24}/> Dettaglio Agenti</h2>\n                <div className={`agents-grid-modern ${globalLoading ? 'loading' : ''}`}>\n                    {agents.length > 0 ? (\n                        agents.map(agent => <NewClientAgentCard key={agent.id} agent={agent} />)\n                    ) : (\n                        <div className=\"no-results-modern\">\n                            <div className=\"no-results-icon\"><Search size={48} /></div>\n                            <h3>Nessun agente trovato</h3>\n                            <p>Prova a modificare i filtri per visualizzare più risultati.</p>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default ModernNewClientsPage;\n","import React, { useState, useMemo } from 'react';\nimport { useData } from '../App';\nimport './ModernFastwebPage.css';\nimport { formatAgentName } from '../utils/formatter';\nimport {\n  Zap,\n  Users,\n  Award,\n  TrendingUp,\n  BarChart,\n  Filter,\n  Search,\n  User,\n  FileText,\n  Star,\n  Shield,\n  Frown,\n  RefreshCw,\n  Eye,\n  UserCheck,\n  Building,\n  Crown\n} from 'lucide-react';\n\n// Helper to format numbers\nconst formatNumber = (value) => {\n  return new Intl.NumberFormat('it-IT').format(value || 0);\n};\n\nconst ModernFastwebPage = () => {\n  const { data, selectedFileDate, globalLoading, loadFiles } = useData();\n  const [activeView, setActiveView] = useState('overview');\n  const [isRefreshing, setIsRefreshing] = useState(false);\n\n  const handleRefresh = async () => {\n    setIsRefreshing(true);\n    await loadFiles();\n    // A little delay to give a feeling of loading\n    setTimeout(() => setIsRefreshing(false), 500);\n  };\n\n  const fastwebData = useMemo(() => {\n    if (!data.uploadedFiles || data.uploadedFiles.length === 0) {\n      return null;\n    }\n\n    const file = selectedFileDate\n      ? data.uploadedFiles.find(f => f.date === selectedFileDate)\n      : data.uploadedFiles[0];\n\n    if (!file?.data?.agents) {\n      return null;\n    }\n\n    const agents = file.data.agents;\n    const agentsWithFastweb = agents.filter(a => (a.fastwebEnergia || 0) > 0);\n\n    if (agentsWithFastweb.length === 0) {\n      return {\n        totalContracts: 0,\n        totalAgents: 0,\n        avgContracts: 0,\n        topAgent: null,\n        topSm: null,\n        agents: [],\n        smRanking: [],\n        period: file.displayDate\n      };\n    }\n\n    const totalContracts = agentsWithFastweb.reduce((sum, agent) => sum + agent.fastwebEnergia, 0);\n\n    const topAgent = agentsWithFastweb.reduce((max, agent) =>\n        agent.fastwebEnergia > max.fastwebEnergia ? agent : max, agentsWithFastweb[0]\n    );\n\n    // SM Ranking\n    const smMap = new Map();\n    agentsWithFastweb.forEach(agent => {\n      if (!agent.sm) return;\n      const smName = formatAgentName(agent.sm);\n      const current = smMap.get(smName) || { contracts: 0, agents: 0, agentList: [] };\n      current.contracts += agent.fastwebEnergia;\n      current.agents += 1;\n      current.agentList.push({ name: formatAgentName(agent.nome), contracts: agent.fastwebEnergia });\n      smMap.set(smName, current);\n    });\n\n    const smRanking = Array.from(smMap.entries())\n      .map(([name, data]) => ({ name, ...data }))\n      .sort((a, b) => b.contracts - a.contracts);\n\n    const topSm = smRanking.length > 0 ? smRanking[0] : null;\n\n    return {\n      totalContracts,\n      totalAgents: agentsWithFastweb.length,\n      avgContracts: totalContracts / agentsWithFastweb.length,\n      topAgent,\n      topSm,\n      agents: agentsWithFastweb.sort((a,b) => b.fastwebEnergia - a.fastwebEnergia),\n      smRanking,\n      period: file.displayDate\n    };\n  }, [data, selectedFileDate]);\n\n  if (globalLoading) {\n    return (\n      <div className=\"modern-fastweb-loading\">\n        <div className=\"loading-spinner\"></div>\n        <p>Caricamento dati Fastweb...</p>\n      </div>\n    );\n  }\n\n  if (!fastwebData) {\n    return (\n        <div className=\"modern-fastweb-container\">\n            <div className=\"no-results\" style={{ gridColumn: '1 / -1' }}>\n                <Frown size={64} />\n                <h3>Nessun dato Fastweb disponibile</h3>\n                <p>Carica un file per visualizzare le statistiche dei contratti Fastweb.</p>\n            </div>\n        </div>\n    );\n  }\n\n  const { totalContracts, totalAgents, avgContracts, topAgent, topSm, agents, smRanking, period } = fastwebData;\n\n  const renderOverview = () => (\n    <div className=\"overview-section\">\n        <div className=\"section-card\">\n            <div className=\"section-header\">\n                <h3><Crown size={20} /> Top Performers</h3>\n                <span className=\"badge-live\">Live</span>\n            </div>\n            <div className=\"performers-list\">\n                {topAgent ? (\n                    <div className=\"performer-item rank-1\">\n                        <div className=\"performer-rank\">1</div>\n                        <div className=\"performer-info\">\n                            <h4>{formatAgentName(topAgent.nome)}</h4>\n                            <p>Miglior Agente</p>\n                        </div>\n                        <div className=\"performer-stats\">\n                            <div className=\"stat-item primary\">\n                                <Zap size={14} />\n                                <strong>{formatNumber(topAgent.fastwebEnergia)}</strong> contratti\n                            </div>\n                        </div>\n                    </div>\n                ) : <p>Nessun agente con contratti Fastweb.</p>}\n\n                {topSm ? (\n                    <div className=\"performer-item rank-2\">\n                        <div className=\"performer-rank\">1</div>\n                        <div className=\"performer-info\">\n                            <h4>{topSm.name}</h4>\n                            <p>Miglior SM</p>\n                        </div>\n                         <div className=\"performer-stats\">\n                            <div className=\"stat-item primary\">\n                                <Zap size={14} />\n                                <strong>{formatNumber(topSm.contracts)}</strong> contratti\n                            </div>\n                        </div>\n                    </div>\n                ) : <p>Nessun SM con contratti Fastweb.</p>}\n            </div>\n        </div>\n        <div className=\"section-card\">\n            <div className=\"section-header\">\n                <h3><Building size={20} /> Classifica Sales Manager</h3>\n            </div>\n            <div className=\"sm-rankings-grid\">\n                {smRanking.slice(0, 4).map((sm, index) => (\n                    <div key={sm.name} className={`sm-card ${index === 0 ? 'rank-1' : ''}`}>\n                        {index === 0 && <div className=\"sm-rank\">🏆</div>}\n                        <div className=\"sm-info\">\n                            <h4>{sm.name}</h4>\n                        </div>\n                        <div className=\"sm-metrics\">\n                            <div className=\"metric\">\n                                <span className=\"metric-value\">{formatNumber(sm.contracts)}</span>\n                                <span className=\"metric-label\">Contratti</span>\n                            </div>\n                            <div className=\"metric\">\n                                <span className=\"metric-value\">{formatNumber(sm.agents)}</span>\n                                <span className=\"metric-label\">Agenti</span>\n                            </div>\n                        </div>\n                    </div>\n                ))}\n            </div>\n        </div>\n    </div>\n  );\n\n  const renderAgentsList = () => (\n     <div className=\"agents-section\">\n        <div className=\"agents-grid\">\n            {agents.length > 0 ? agents.map(agent => (\n                <div key={agent.id} className=\"fastweb-agent-card low\">\n                    <div className=\"card-header\">\n                        <div className=\"agent-avatar\">{formatAgentName(agent.nome).charAt(0)}</div>\n                        <div className=\"agent-info\">\n                            <h4>{formatAgentName(agent.nome)}</h4>\n                            <p>{formatAgentName(agent.sm)}</p>\n                        </div>\n                        <div className=\"contracts-badge\">\n                            <Zap size={16} />\n                            <span>{formatNumber(agent.fastwebEnergia)}</span>\n                        </div>\n                    </div>\n                </div>\n            )) : (\n                 <div className=\"no-results\">\n                    <Frown size={48} />\n                    <h3>Nessun agente trovato</h3>\n                    <p>Nessun agente ha contratti Fastweb in questo periodo.</p>\n                </div>\n            )}\n        </div>\n     </div>\n  );\n\n  return (\n    <div className=\"modern-fastweb-container\">\n      <header className=\"page-header fastweb-theme\">\n        <div className=\"header-content\">\n          <div className=\"header-text\">\n            <h1 className=\"page-title\"><Zap /> Analisi Fastweb</h1>\n            <p className=\"page-subtitle\">Dettaglio e performance dei contratti Fastweb Energia per il periodo: <strong>{period || 'N/A'}</strong></p>\n          </div>\n          <div className=\"header-actions\">\n            <button onClick={handleRefresh} disabled={isRefreshing} className={`refresh-btn ${isRefreshing ? 'refreshing' : ''}`}>\n              <RefreshCw size={18} />\n              <span>{isRefreshing ? 'Aggiornando...' : 'Aggiorna Dati'}</span>\n            </button>\n          </div>\n        </div>\n        <div className=\"kpi-grid\">\n            <div className=\"kpi-card primary\">\n                <div className=\"kpi-icon\"><Zap size={28}/></div>\n                <div className=\"kpi-content\">\n                    <div className=\"kpi-value\">{formatNumber(totalContracts)}</div>\n                    <div className=\"kpi-label\">Contratti Totali</div>\n                </div>\n            </div>\n            <div className=\"kpi-card success\">\n                <div className=\"kpi-icon\"><Users size={28}/></div>\n                <div className=\"kpi-content\">\n                    <div className=\"kpi-value\">{formatNumber(totalAgents)}</div>\n                    <div className=\"kpi-label\">Agenti con Contratti</div>\n                </div>\n            </div>\n            <div className=\"kpi-card accent\">\n                <div className=\"kpi-icon\"><BarChart size={28}/></div>\n                <div className=\"kpi-content\">\n                    <div className=\"kpi-value\">{formatNumber(avgContracts.toFixed(2))}</div>\n                    <div className=\"kpi-label\">Media Contratti/Agente</div>\n                </div>\n            </div>\n            <div className=\"kpi-card info\">\n                <div className=\"kpi-icon\"><Award size={28}/></div>\n                <div className=\"kpi-content\">\n                    <div className=\"kpi-value\">{topAgent ? formatAgentName(topAgent.nome) : 'N/A'}</div>\n                    <div className=\"kpi-label\">Top Performer</div>\n                </div>\n            </div>\n        </div>\n      </header>\n\n      <div className=\"view-tabs\">\n        <button className={`tab-btn ${activeView === 'overview' ? 'active' : ''}`} onClick={() => setActiveView('overview')}>\n          <Eye size={18} /> Overview\n        </button>\n        <button className={`tab-btn ${activeView === 'agents' ? 'active' : ''}`} onClick={() => setActiveView('agents')}>\n          <UserCheck size={18} /> Lista Agenti\n        </button>\n      </div>\n\n      {activeView === 'overview' ? renderOverview() : renderAgentsList()}\n    </div>\n  );\n};\n\nexport default ModernFastwebPage;\n","import React, { useState, useMemo } from 'react';\nimport { useData } from '../App';\nimport { History, RefreshCw, BarChart2, TrendingUp, TrendingDown, FileText, Lightbulb, CheckCircle, AlertTriangle, Info, Users, UserPlus } from 'lucide-react';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport './ModernHistoricalAnalysis.css';\n\n// Helper functions for formatting\nconst formatCurrency = (value) => new Intl.NumberFormat('it-IT', { style: 'currency', currency: 'EUR' }).format(value || 0);\nconst formatNumber = (value) => new Intl.NumberFormat('it-IT').format(value || 0);\nconst formatPercentage = (value) => `${value.toFixed(1)}%`;\n\nconst TrendIndicator = ({ value, text = \"vs. mese prec.\" }) => {\n  if (value === null || isNaN(value)) return null;\n  const isPositive = value > 0;\n  const isNegative = value < 0;\n\n  let trendClass = 'neutral';\n  if (isPositive) trendClass = 'positive';\n  if (isNegative) trendClass = 'negative';\n\n  return (\n    <span className={`kpi-trend ${trendClass}`}>\n      {isPositive && <TrendingUp size={14} />}\n      {isNegative && <TrendingDown size={14} />}\n      {formatPercentage(value)} {text}\n    </span>\n  );\n};\n\nconst InsightCard = ({ insight }) => {\n  const { icon: Icon, type, title, text } = insight;\n  return (\n    <div className={`insight-card ${type}`}>\n      <div className=\"insight-icon\">\n        <Icon size={24} />\n      </div>\n      <div className=\"insight-content\">\n        <h4>{title}</h4>\n        <p>{text}</p>\n      </div>\n    </div>\n  );\n};\n\nconst CustomTooltip = ({ active, payload, label }) => {\n  if (active && payload && payload.length) {\n    const data = payload[0];\n    return (\n      <div className=\"custom-chart-tooltip\">\n        <p className=\"tooltip-label\">{label}</p>\n        <p style={{ color: data.color }}>\n          {`${data.name}: ${formatCurrency(data.value)}`}\n        </p>\n      </div>\n    );\n  }\n  return null;\n};\n\nconst TrendCard = ({ title, value, icon: Icon }) => {\n  const isUp = value > 0;\n  const isDown = value < 0;\n  const cardClass = isUp ? 'up' : isDown ? 'down' : 'neutral';\n\n  return (\n    <div className={`trend-card ${cardClass}`}>\n      <div className=\"trend-header\">\n        <h4>{title}</h4>\n        <Icon size={20} />\n      </div>\n      <div className=\"trend-content\">\n        <div className=\"trend-percentage\">{formatPercentage(value)}</div>\n        <div className=\"trend-description\">Rispetto al mese precedente</div>\n      </div>\n    </div>\n  );\n};\n\nconst ModernHistoricalAnalysis = ({ setActiveSection }) => {\n  const { data } = useData();\n  const [loading, setLoading] = useState(false);\n  const hasData = data && data.uploadedFiles && data.uploadedFiles.length > 1;\n  const [activeView, setActiveView] = useState('overview');\n  const [chartMetric, setChartMetric] = useState('Fatturato Rush');\n\n  const historicalStats = useMemo(() => {\n    if (!hasData) return null;\n\n    // Use the last 6 files, and ensure they are in chronological order\n    const files = data.uploadedFiles.slice(0, 6).reverse();\n\n    const monthlyData = files.map(file => ({\n      name: file.displayDate,\n      'Fatturato Totale': file.metadata.totalRevenue,\n      'Fatturato Rush': file.metadata.totalRush,\n      'Nuovi Clienti': file.metadata.totalNewClients,\n      'Agenti Attivi': file.metadata.totalAgents,\n    }));\n\n    const latest = files[files.length - 1]?.metadata || {};\n    const previous = files[files.length - 2]?.metadata || {};\n\n    const calcTrend = (current, prev) => {\n      if (prev === 0) return current > 0 ? 100 : 0;\n      return ((current - prev) / prev) * 100;\n    };\n\n    const revenueTrend = calcTrend(latest.totalRevenue, previous.totalRevenue);\n\n    const totalRevenue = files.reduce((sum, f) => sum + f.metadata.totalRevenue, 0);\n    const averageRevenue = totalRevenue / files.length;\n\n    const clientTrend = calcTrend(latest.totalNewClients, previous.totalNewClients);\n\n    const bestMonth = files.reduce((best, current) =>\n      current.metadata.totalRevenue > best.metadata.totalRevenue ? current : best\n    );\n\n    const comparisonData = {\n      headers: files.map(f => f.displayDate),\n      rows: [\n        { metric: 'Fatturato Totale', values: files.map(f => formatCurrency(f.metadata.totalRevenue)) },\n        { metric: 'Fatturato Rush', values: files.map(f => formatCurrency(f.metadata.totalRush)) },\n        { metric: 'Nuovi Clienti', values: files.map(f => formatNumber(f.metadata.totalNewClients)) },\n        { metric: 'Agenti Attivi', values: files.map(f => formatNumber(f.metadata.totalAgents)) },\n      ]\n    };\n\n    const totalRevenuePeriod = files.reduce((sum, f) => sum + f.metadata.totalRevenue, 0);\n    const totalRushPeriod = files.reduce((sum, f) => sum + f.metadata.totalRush, 0);\n    const totalNewClientsPeriod = files.reduce((sum, f) => sum + f.metadata.totalNewClients, 0);\n    const averageAgentsPeriod = files.reduce((sum, f) => sum + f.metadata.totalAgents, 0) / files.length;\n\n    return {\n      monthlyData,\n      comparisonData,\n      kpis: {\n        revenueTrend,\n        averageRevenue,\n        clientTrend,\n        bestMonth: {\n          date: bestMonth.displayDate,\n          revenue: bestMonth.metadata.totalRevenue,\n        }\n      },\n      summary: {\n        totalRevenue: totalRevenuePeriod,\n        totalRush: totalRushPeriod,\n        totalNewClients: totalNewClientsPeriod,\n        averageAgents: averageAgentsPeriod,\n      },\n      trends: {\n        revenue: revenueTrend,\n        rush: calcTrend(latest.totalRush, previous.totalRush),\n        clients: clientTrend,\n        agents: calcTrend(latest.totalAgents, previous.totalAgents),\n      },\n      insights: [\n        {\n          type: 'success',\n          icon: TrendingUp,\n          title: 'Miglior Mese',\n          text: `Il mese con il fatturato più alto è stato ${bestMonth.displayDate} con un totale di ${formatCurrency(bestMonth.metadata.totalRevenue)}.`\n        },\n        {\n          type: 'info',\n          icon: BarChart2,\n          title: 'Performance Fatturato',\n          text: `Il fatturato totale dell'ultimo mese è in ${revenueTrend > 0 ? 'crescita' : 'calo'} del ${formatPercentage(Math.abs(revenueTrend))} rispetto al precedente.`\n        },\n        {\n          type: 'warning',\n          icon: Users,\n          title: 'Andamento Clienti',\n          text: `Nell'ultimo mese, il numero di nuovi clienti è in ${clientTrend > 0 ? 'crescita' : 'calo'} del ${formatPercentage(Math.abs(clientTrend))}.`\n        }\n      ]\n    };\n  }, [data, hasData]);\n\n  // Placeholder function for refreshing data\n  const handleRefresh = () => {\n    setLoading(true);\n    setTimeout(() => {\n      setLoading(false);\n    }, 2000);\n  };\n\n  // Component for loading state\n  const LoadingState = () => (\n    <div className=\"historical-loading\">\n      <div className=\"loading-spinner\"></div>\n      <p>Caricamento dati storici...</p>\n    </div>\n  );\n\n  // Component for no data state\n  const NoDataState = ({ setActiveSection }) => (\n    <div className=\"historical-no-data\">\n      <FileText size={64} />\n      <h2>Nessun Dato Storico Disponibile</h2>\n      <p>Non sono stati ancora caricati file sufficienti per un'analisi storica.</p>\n      <p>Carica i file mensili per abilitare questa funzionalità.</p>\n      <button className=\"upload-more-btn\" onClick={() => setActiveSection('files')}>\n        Vai a Gestione File\n      </button>\n    </div>\n  );\n\n  if (loading) {\n    return (\n      <div className=\"modern-historical-container\">\n        <LoadingState />\n      </div>\n    );\n  }\n\n  if (!hasData) {\n    return (\n      <div className=\"modern-historical-container\">\n        <NoDataState setActiveSection={setActiveSection} />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"modern-historical-container\">\n      {/* Header */}\n      <header className=\"page-header historical-theme\">\n        <div className=\"header-content\">\n          <div className=\"header-text\">\n            <h1 className=\"page-title\">\n              <History size={40} />\n              Analisi Storica\n            </h1>\n            <p className=\"page-subtitle\">\n              Confronta le performance e scopri i trend nel tempo.\n            </p>\n          </div>\n          <div className=\"header-actions\">\n            <div className=\"period-selector\">\n              <select className=\"period-select\">\n                <option>Ultimi 6 mesi</option>\n                <option>Ultimi 12 mesi</option>\n                <option>Anno Corrente</option>\n                <option>Anno Precedente</option>\n              </select>\n            </div>\n            <button className=\"refresh-btn\" onClick={handleRefresh} disabled={loading}>\n              <RefreshCw size={16} className={loading ? 'animate-spin' : ''} />\n              Aggiorna\n            </button>\n          </div>\n        </div>\n      </header>\n\n      {/* KPIs */}\n      <section className=\"historical-kpis\">\n        <div className=\"kpi-card trend-positive\">\n          <div className=\"kpi-icon\"><TrendingUp size={24} /></div>\n          <div className=\"kpi-content\">\n            <div className=\"kpi-value\">{formatPercentage(historicalStats.kpis.revenueTrend)}</div>\n            <div className=\"kpi-label\">Trend Fatturato</div>\n            <TrendIndicator value={historicalStats.kpis.revenueTrend} />\n          </div>\n        </div>\n        <div className=\"kpi-card trend-revenue\">\n          <div className=\"kpi-icon\"><BarChart2 size={24} /></div>\n          <div className=\"kpi-content\">\n            <div className=\"kpi-value\">{formatCurrency(historicalStats.kpis.averageRevenue)}</div>\n            <div className=\"kpi-label\">Fatturato Medio Mensile</div>\n          </div>\n        </div>\n        <div className=\"kpi-card trend-growth\">\n           <div className=\"kpi-icon\"><Users size={24} /></div>\n          <div className=\"kpi-content\">\n            <div className=\"kpi-value\">{formatPercentage(historicalStats.kpis.clientTrend)}</div>\n            <div className=\"kpi-label\">Trend Clienti</div>\n            <TrendIndicator value={historicalStats.kpis.clientTrend} />\n          </div>\n        </div>\n        <div className=\"kpi-card trend-insights\">\n           <div className=\"kpi-icon\"><Lightbulb size={24} /></div>\n          <div className=\"kpi-content\">\n            <div className=\"kpi-value\">{historicalStats.kpis.bestMonth.date}</div>\n            <div className=\"kpi-label\">Miglior Mese (Fatt.)</div>\n            <span className=\"kpi-trend\">{formatCurrency(historicalStats.kpis.bestMonth.revenue)}</span>\n          </div>\n        </div>\n      </section>\n\n      {/* View Tabs */}\n      <div className=\"view-tabs\">\n        <button className={`tab-btn ${activeView === 'overview' ? 'active' : ''}`} onClick={() => setActiveView('overview')}>\n          <BarChart2 size={18} />\n          Panoramica\n        </button>\n        <button className={`tab-btn ${activeView === 'trends' ? 'active' : ''}`} onClick={() => setActiveView('trends')}>\n          <TrendingUp size={18} />\n          Trends\n        </button>\n        <button className={`tab-btn ${activeView === 'comparison' ? 'active' : ''}`} onClick={() => setActiveView('comparison')}>\n          <FileText size={18} />\n          Confronto\n        </button>\n        <button className={`tab-btn ${activeView === 'insights' ? 'active' : ''}`} onClick={() => setActiveView('insights')}>\n          <Lightbulb size={18} />\n          Insights\n        </button>\n      </div>\n\n      {/* Content based on active tab */}\n      <main>\n        {activeView === 'overview' && (\n          <section className=\"overview-section\">\n            <div className=\"main-chart-container\">\n              <div className=\"chart-header\">\n                <h3>Andamento Mensile</h3>\n                <div className=\"metric-selector\">\n                  <select className=\"metric-select\" value={chartMetric} onChange={(e) => setChartMetric(e.target.value)}>\n                    <option value=\"Fatturato Rush\">Fatturato Rush</option>\n                    <option value=\"Fatturato Totale\">Fatturato Totale</option>\n                    <option value=\"Nuovi Clienti\">Nuovi Clienti</option>\n                    <option value=\"Agenti Attivi\">Agenti Attivi</option>\n                  </select>\n                </div>\n              </div>\n              <div className=\"chart-wrapper\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <LineChart data={historicalStats.monthlyData} margin={{ top: 5, right: 30, left: 50, bottom: 5 }}>\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(0,0,0,0.1)\" />\n                    <XAxis dataKey=\"name\" tick={{ fill: '#64748b' }} />\n                    <YAxis tickFormatter={(value) => chartMetric.includes('Fatturato') ? formatCurrency(value) : formatNumber(value)} tick={{ fill: '#64748b' }} />\n                    <Tooltip content={<CustomTooltip />} />\n                    <Legend />\n                    <Line type=\"monotone\" dataKey={chartMetric} stroke=\"#8b5cf6\" strokeWidth={2} activeDot={{ r: 8 }} />\n                  </LineChart>\n                </ResponsiveContainer>\n              </div>\n            </div>\n            <div className=\"summary-cards\">\n              <div className=\"summary-card\">\n                <div className=\"summary-header\">\n                  <h4>Riepilogo Periodo</h4>\n                  <TrendingUp size={20} />\n                </div>\n                <div className=\"summary-content\">\n                  <div className=\"metric-row\">\n                    <span>Fatturato Totale</span>\n                    <span className=\"metric-value\">{formatCurrency(historicalStats.summary.totalRevenue)}</span>\n                  </div>\n                  <div className=\"metric-row\">\n                    <span>Fatturato Rush</span>\n                    <span className=\"metric-value\">{formatCurrency(historicalStats.summary.totalRush)}</span>\n                  </div>\n                  <div className=\"metric-row\">\n                    <span>Nuovi Clienti Totali</span>\n                    <span className=\"metric-value\">{formatNumber(historicalStats.summary.totalNewClients)}</span>\n                  </div>\n                  <div className=\"metric-row\">\n                    <span>Media Agenti Attivi</span>\n                    <span className=\"metric-value\">{formatNumber(historicalStats.summary.averageAgents)}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </section>\n        )}\n        {activeView === 'trends' && (\n          <section className=\"trends-section\">\n            <div className=\"multi-chart-container\">\n              <div className=\"chart-header\">\n                <h3>Analisi dei Trend Mensili</h3>\n              </div>\n              <div className=\"trend-cards-grid\">\n                <TrendCard title=\"Fatturato Totale\" value={historicalStats.trends.revenue} icon={BarChart2} />\n                <TrendCard title=\"Fatturato Rush\" value={historicalStats.trends.rush} icon={TrendingUp} />\n                <TrendCard title=\"Nuovi Clienti\" value={historicalStats.trends.clients} icon={UserPlus} />\n                <TrendCard title=\"Agenti Attivi\" value={historicalStats.trends.agents} icon={Users} />\n              </div>\n            </div>\n          </section>\n        )}\n        {activeView === 'comparison' && (\n          <section className=\"comparison-section\">\n            <div className=\"comparison-controls\">\n              <h3>Confronto Periodi</h3>\n            </div>\n            <div className=\"comparison-table\">\n              <table>\n                <thead>\n                  <tr>\n                    <th>Metrica</th>\n                    {historicalStats.comparisonData.headers.map(header => (\n                      <th key={header}>{header}</th>\n                    ))}\n                  </tr>\n                </thead>\n                <tbody>\n                  {historicalStats.comparisonData.rows.map(row => (\n                    <tr key={row.metric}>\n                      <td className=\"period-cell\">{row.metric}</td>\n                      {row.values.map((value, index) => (\n                        <td key={index}>{value}</td>\n                      ))}\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </section>\n        )}\n        {activeView === 'insights' && (\n          <section className=\"insights-section\">\n            <div className=\"insights-header\">\n              <h3>Insights Automatici</h3>\n              <p>Analisi e suggerimenti basati sui dati storici.</p>\n            </div>\n            <div className=\"insights-grid\">\n              {historicalStats.insights.map((insight, index) => (\n                <InsightCard key={index} insight={insight} />\n              ))}\n            </div>\n          </section>\n        )}\n      </main>\n    </div>\n  );\n};\n\nexport default ModernHistoricalAnalysis;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { apiService } from '../services/apiService';\nimport './ModernSettingsPage.css';\nimport { Shield, KeyRound, Edit, UserPlus, X, RefreshCw, Trash } from 'lucide-react';\nimport toast from 'react-hot-toast';\nimport ConfirmationDialog from './ConfirmationDialog';\n\nconst UserModal = ({ user, mode, onClose, onSave }) => {\n    const [userData, setUserData] = useState({\n        username: user?.username || '',\n        full_name: user?.full_name || '',\n        role: user?.role || 'viewer',\n        password: '',\n        confirmPassword: ''\n    });\n\n    const handleChange = (e) => {\n        const { name, value } = e.target;\n        setUserData(prev => ({ ...prev, [name]: value }));\n    };\n\n    const handleSave = () => {\n        if (mode === 'create' || mode === 'password') {\n            if (userData.password !== userData.confirmPassword || !userData.password) {\n                toast.error('Le password non coincidono o sono vuote.');\n                return;\n            }\n        }\n        if (mode === 'create') {\n            onSave(userData);\n        } else if (mode === 'role') {\n            onSave(user.id, { role: userData.role });\n        } else if (mode === 'password') {\n            onSave(user.id, { password: userData.password });\n        }\n    };\n\n    const titles = {\n        create: 'Crea Nuovo Utente',\n        password: `Modifica Password per ${user?.username}`,\n        role: `Modifica Ruolo per ${user?.username}`\n    };\n\n    return (\n        <div className=\"modal-overlay\">\n            <div className=\"modal-content\">\n                <button className=\"modal-close\" onClick={onClose}><X size={24} /></button>\n                <h2>{titles[mode]}</h2>\n\n                {mode === 'create' && (\n                    <>\n                        <div className=\"form-group\">\n                            <label>Username</label>\n                            <input type=\"text\" name=\"username\" value={userData.username} onChange={handleChange} />\n                        </div>\n                        <div className=\"form-group\">\n                            <label>Nome Completo</label>\n                            <input type=\"text\" name=\"full_name\" value={userData.full_name} onChange={handleChange} />\n                        </div>\n                    </>\n                )}\n\n                {(mode === 'create' || mode === 'password') && (\n                    <>\n                        <div className=\"form-group\">\n                            <label>Nuova Password</label>\n                            <input type=\"password\" name=\"password\" value={userData.password} onChange={handleChange} />\n                        </div>\n                        <div className=\"form-group\">\n                            <label>Conferma Nuova Password</label>\n                            <input type=\"password\" name=\"confirmPassword\" value={userData.confirmPassword} onChange={handleChange} />\n                        </div>\n                    </>\n                )}\n\n                {(mode === 'create' || mode === 'role') && (\n                    <div className=\"form-group\">\n                        <label>Ruolo</label>\n                        <select name=\"role\" value={userData.role} onChange={handleChange}>\n                            <option value=\"viewer\">Viewer</option>\n                            <option value=\"admin\">Admin</option>\n                        </select>\n                    </div>\n                )}\n\n                <div className=\"modal-actions\">\n                    <button onClick={onClose} className=\"btn btn-secondary\">Annulla</button>\n                    <button onClick={handleSave} className=\"btn btn-primary\">{mode === 'create' ? 'Crea Utente' : 'Salva'}</button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n\nconst ModernSettingsPage = () => {\n    const [users, setUsers] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const [modalState, setModalState] = useState({ isOpen: false, mode: 'create', user: null });\n    const [dialog, setDialog] = useState({ isOpen: false, title: '', message: '', onConfirm: () => {} });\n\n    const fetchUsers = useCallback(async () => {\n        try {\n            setLoading(true);\n            const fetchedUsers = await apiService.getUsers();\n            setUsers(fetchedUsers);\n            setError(null);\n        } catch (err) {\n            setError('Impossibile caricare gli utenti.');\n            toast.error('Impossibile caricare gli utenti.');\n            console.error(err);\n        } finally {\n            setLoading(false);\n        }\n    }, []);\n\n    useEffect(() => {\n        fetchUsers();\n    }, [fetchUsers]);\n\n    const openModal = (mode, user = null) => {\n        setModalState({ isOpen: true, mode, user });\n    };\n\n    const closeModal = () => {\n        setModalState({ isOpen: false, mode: 'create', user: null });\n    };\n\n    const openDialog = (title, message, onConfirm) => {\n        setDialog({\n            isOpen: true,\n            title,\n            message,\n            onConfirm: () => {\n                onConfirm();\n                handleCloseDialog();\n            }\n        });\n    };\n\n    const handleCloseDialog = () => {\n        setDialog({ ...dialog, isOpen: false });\n    };\n\n    const handleUpdateRole = async (userId, { role }) => {\n        toast.loading('Aggiornamento ruolo...', { id: 'role-update' });\n        try {\n            await apiService.updateUserRole(userId, role);\n            toast.success('Ruolo aggiornato con successo!', { id: 'role-update' });\n            fetchUsers();\n            closeModal();\n        } catch (error) {\n            toast.error(`Errore: ${error.message}`, { id: 'role-update' });\n        }\n    };\n\n    const handleUpdatePassword = async (userId, { password }) => {\n        toast.loading('Aggiornamento password...', { id: 'password-update' });\n        try {\n            await apiService.adminUpdateUserPassword(userId, password);\n            toast.success('Password aggiornata con successo!', { id: 'password-update' });\n            closeModal();\n        } catch (error)\n        {\n            toast.error(`Errore: ${error.message}`, { id: 'password-update' });\n        }\n    };\n\n    const handleCreateUser = async (userData) => {\n        toast.loading('Creazione utente...', { id: 'create-user' });\n        try {\n            await apiService.createUser(userData);\n            toast.success('Utente creato con successo!', { id: 'create-user' });\n            fetchUsers();\n            closeModal();\n        } catch (error) {\n            toast.error(`Errore: ${error.message}`, { id: 'create-user' });\n        }\n    };\n\n    const handleDeleteUser = (user) => {\n        openDialog(\n            'Conferma Eliminazione',\n            `Sei sicuro di voler eliminare l'utente ${user.username}? Questa azione è irreversibile.`,\n            async () => {\n                toast.loading(`Eliminazione di ${user.username}...`, { id: 'delete-user' });\n                try {\n                    await apiService.deleteUser(user.id);\n                    toast.success(`Utente ${user.username} eliminato.`, { id: 'delete-user' });\n                    fetchUsers();\n                } catch (error) {\n                    toast.error(`Errore: ${error.message}`, { id: 'delete-user' });\n                }\n            }\n        );\n    };\n\n    return (\n        <div className=\"modern-settings-container\">\n            <div className=\"page-header\">\n                <div className=\"header-content\">\n                    <div className=\"header-text\">\n                        <h1 className=\"page-title\"><Shield size={32} /> Gestione Utenti</h1>\n                        <p className=\"page-subtitle\">Modifica ruoli e password degli utenti del sistema</p>\n                    </div>\n                    <div className=\"header-actions\">\n                        <button className={`refresh-btn ${loading ? 'refreshing' : ''}`} onClick={fetchUsers} disabled={loading}>\n                            <RefreshCw size={20} />\n                            {loading ? 'Aggiorna...' : 'Aggiorna'}\n                        </button>\n                        <button className=\"btn btn-primary\" onClick={() => openModal('create')}>\n                            <UserPlus size={18} /> Crea Utente\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"settings-content\">\n                <div className=\"user-list-container\">\n                    {loading && <p>Caricamento utenti...</p>}\n                    {error && <p className=\"error-message\">{error}</p>}\n                    {!loading && !error && (\n                        <table className=\"user-table\">\n                            <thead>\n                                <tr>\n                                    <th>Username</th>\n                                    <th>Nome Completo</th>\n                                    <th>Ruolo</th>\n                                    <th>Data Creazione</th>\n                                    <th>Azioni</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {users.map(user => (\n                                    <tr key={user.id}>\n                                        <td>{user.username}</td>\n                                        <td>{user.full_name}</td>\n                                        <td>\n                                            <span className={`role-badge ${user.role}`}>\n                                                {user.role}\n                                            </span>\n                                        </td>\n                                        <td>{new Date(user.created_at).toLocaleDateString()}</td>\n                                        <td className=\"actions-cell\">\n                                            <button className=\"action-btn\" title=\"Modifica Ruolo\" onClick={() => openModal('role', user)}>\n                                                <Edit size={18} />\n                                            </button>\n                                            <button className=\"action-btn\" title=\"Modifica Password\" onClick={() => openModal('password', user)}>\n                                                <KeyRound size={18} />\n                                            </button>\n                                            <button className=\"action-btn delete\" title=\"Elimina Utente\" onClick={() => handleDeleteUser(user)}>\n                                                <Trash size={18} />\n                                            </button>\n                                        </td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    )}\n                </div>\n            </div>\n\n            {modalState.isOpen && (\n                <UserModal\n                    user={modalState.user}\n                    mode={modalState.mode}\n                    onClose={closeModal}\n                    onSave={\n                        modalState.mode === 'create' ? handleCreateUser :\n                        modalState.mode === 'role' ? handleUpdateRole :\n                        handleUpdatePassword\n                    }\n                />\n            )}\n\n            <ConfirmationDialog\n                open={dialog.isOpen}\n                onClose={handleCloseDialog}\n                onConfirm={dialog.onConfirm}\n                title={dialog.title}\n                message={dialog.message}\n            />\n        </div>\n    );\n};\n\nexport default ModernSettingsPage;\n","import React, { useMemo } from 'react';\nimport { useData } from '../App';\nimport './TestPage.css';\n\nconst TestPage = () => {\n  const { data, selectedFileDate } = useData();\n\n  const { agents, agentKeys } = useMemo(() => {\n    if (!selectedFileDate || !data.processedData[selectedFileDate]) {\n      return { agents: [], agentKeys: [] };\n    }\n\n    const allAgents = data.processedData[selectedFileDate].agents;\n    const firstTenAgents = allAgents.slice(0, 10);\n\n    if (firstTenAgents.length === 0) {\n      return { agents: [], agentKeys: [] };\n    }\n\n    // Get all unique keys from the first 10 agents\n    const keys = new Set();\n    firstTenAgents.forEach(agent => {\n      Object.keys(agent).forEach(key => keys.add(key));\n    });\n    const sortedKeys = Array.from(keys).sort();\n\n\n    return { agents: firstTenAgents, agentKeys: sortedKeys };\n  }, [data, selectedFileDate]);\n\n  if (agents.length === 0) {\n    return (\n      <div className=\"test-page-container\">\n        <h2>Test Page - Dati Agenti</h2>\n        <p>Nessun dato disponibile per il file selezionato o nessun file caricato.</p>\n        <p>Vai su \"Gestione File\" per caricare un file.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"test-page-container\">\n      <h2>Test Page - Primi 10 Agenti</h2>\n      <p>Questa tabella mostra i dati grezzi dei primi 10 agenti importati dal file per il debug della mappatura.</p>\n      <div className=\"table-container\">\n        <table>\n          <thead>\n            <tr>\n              {agentKeys.map(key => (\n                <th key={key}>{key}</th>\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {agents.map((agent, index) => (\n              <tr key={index}>\n                {agentKeys.map(key => (\n                  <td key={key}>{typeof agent[key] === 'object' ? JSON.stringify(agent[key]) : agent[key]}</td>\n                ))}\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport default TestPage;\n","import React, { useMemo } from 'react';\nimport { useData } from '../App';\nimport { formatAgentName } from '../utils/formatter';\nimport './ModernDashboard.css';\nimport {\n  BarChart3, Users, Crown, Activity, TrendingUp,\n  DollarSign, Target, Calendar, Zap\n} from 'lucide-react';\n\n// Utility functions\nconst formatCurrency = (value) => {\n  return new Intl.NumberFormat('it-IT', {\n    style: 'currency',\n    currency: 'EUR'\n  }).format(value || 0);\n};\n\nconst formatNumber = (value) => {\n  return new Intl.NumberFormat('it-IT').format(value || 0);\n};\n\nconst ModernDashboard = () => {\n  const { data, selectedFileDate, setSelectedFileDate } = useData();\n\n  const stats = useMemo(() => {\n    if (!data.uploadedFiles || data.uploadedFiles.length === 0) {\n      return {\n        totalAgents: 0, totalSMs: 0, totalRevenue: 0, totalRush: 0,\n        totalNewClients: 0, totalFastweb: 0, avgRush: 0,\n        topAgent: null, topSM: null, recentFiles: []\n      };\n    }\n\n    const file = selectedFileDate ?\n      data.uploadedFiles.find(f => f.date === selectedFileDate) :\n      data.uploadedFiles[0];\n\n    if (!file?.data?.agents) {\n      return {\n        totalAgents: 0, totalSMs: 0, totalRevenue: 0, totalRush: 0,\n        totalNewClients: 0, totalFastweb: 0, avgRush: 0,\n        topAgent: null, topSM: null,\n        recentFiles: data.uploadedFiles.slice(-3).reverse()\n      };\n    }\n\n    const agents = file.data.agents;\n    const totalRevenue = agents.reduce((sum, agent) => sum + (agent.fatturato?.complessivo || 0), 0);\n    const totalRush = agents.reduce((sum, agent) => sum + (agent.fatturatoRush || 0), 0);\n    const totalNewClients = agents.reduce((sum, agent) => sum + (agent.nuovoCliente || 0), 0);\n    const totalFastweb = agents.reduce((sum, agent) => sum + (agent.fastwebEnergia || 0), 0);\n\n    const topAgent = agents.reduce((max, agent) =>\n      (agent.fatturatoRush || 0) > (max?.fatturatoRush || 0) ? agent : max, null);\n\n    return {\n      totalAgents: agents.length,\n      totalSMs: [...new Set(agents.map(a => a.sm).filter(Boolean))].length,\n      totalRevenue, totalRush, totalNewClients, totalFastweb,\n      avgRush: agents.length > 0 ? totalRush / agents.length : 0,\n      topAgent, recentFiles: data.uploadedFiles.slice(-3).reverse(),\n      currentPeriod: file.displayDate\n    };\n  }, [data, selectedFileDate]);\n\n  return (\n    <div className=\"integrated-dashboard\">\n      {/* Hero Section */}\n      <div className=\"dashboard-hero\">\n        <div className=\"hero-content\">\n          <div className=\"welcome-section\">\n            <h1 className=\"hero-title\">\n              <BarChart3 size={40} />\n              Dashboard RUSH\n            </h1>\n            <p className=\"hero-subtitle\">Panoramica performance commerciali</p>\n          </div>\n        </div>\n\n        <div className=\"performance-overview\">\n          <div className=\"perf-card agents\">\n            <div className=\"perf-icon\"><Users size={32} /></div>\n            <div className=\"perf-content\">\n              <span className=\"perf-value\">{formatNumber(stats.totalAgents)}</span>\n              <span className=\"perf-label\">Agenti Attivi</span>\n              <div className=\"perf-meta\">{stats.totalSMs} Sales Manager</div>\n            </div>\n          </div>\n\n          <div className=\"perf-card revenue\">\n            <div className=\"perf-icon\"><DollarSign size={32} /></div>\n            <div className=\"perf-content\">\n              <span className=\"perf-value\">{formatCurrency(stats.totalRevenue)}</span>\n              <span className=\"perf-label\">Fatturato Totale</span>\n            </div>\n          </div>\n\n          <div className=\"perf-card rush\">\n            <div className=\"perf-icon\"><TrendingUp size={32} /></div>\n            <div className=\"perf-content\">\n              <span className=\"perf-value\">{formatCurrency(stats.totalRush)}</span>\n              <span className=\"perf-label\">Rush Totale</span>\n            </div>\n          </div>\n\n          <div className=\"perf-card clients\">\n            <div className=\"perf-icon\"><Target size={32} /></div>\n            <div className=\"perf-content\">\n              <span className=\"perf-value\">{formatNumber(stats.totalNewClients)}</span>\n              <span className=\"perf-label\">Nuovi Clienti</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Content Grid */}\n      <div className=\"dashboard-grid\">\n        <div className=\"dashboard-card performers\">\n          <div className=\"card-header\">\n            <h3><Crown size={20} />Top Performers</h3>\n            <span className=\"card-badge\">Live</span>\n          </div>\n          <div className=\"performers-content\">\n            {stats.topAgent ? (\n              <div className=\"top-performer\">\n                <div className=\"performer-rank\">\n                  <Crown size={24} className=\"text-yellow-500\" />\n                </div>\n                <div className=\"performer-info\">\n                  <h4>{formatAgentName(stats.topAgent.nome)}</h4>\n                  <p>{formatAgentName(stats.topAgent.sm)}</p>\n                  <div className=\"performer-stats\">\n                    <span><TrendingUp size={14} />{formatCurrency(stats.topAgent.fatturatoRush || 0)}</span>\n                    <span><DollarSign size={14} />{formatCurrency(stats.topAgent.fatturato?.complessivo || 0)}</span>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div className=\"no-data-small\">\n                <Crown size={32} className=\"opacity-30\" />\n                <p>Carica i dati per visualizzare i top performer</p>\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className=\"dashboard-card metrics\">\n          <div className=\"card-header\">\n            <h3><Activity size={20} />Metriche Chiave</h3>\n          </div>\n          <div className=\"metrics-grid\">\n            <div className=\"metric-item\">\n              <div className=\"metric-icon avg\"><Target size={20} /></div>\n              <div className=\"metric-content\">\n                <span className=\"metric-value\">{formatCurrency(stats.avgRush)}</span>\n                <span className=\"metric-label\">Rush Medio</span>\n              </div>\n            </div>\n            <div className=\"metric-item\">\n              <div className=\"metric-icon fastweb\"><Zap size={20} /></div>\n              <div className=\"metric-content\">\n                <span className=\"metric-value\">{formatNumber(stats.totalFastweb)}</span>\n                <span className=\"metric-label\">Fastweb Energia</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ModernDashboard;\n","import React from 'react';\nimport {\n  BarChart3, Users, Trophy, Package, UserPlus, Zap, Upload, History,\n  Settings, LogOut, Moon, Sun, X, User, TrendingUp\n} from 'lucide-react';\n\nconst ModernSidebar = ({\n  activeSection, setActiveSection, currentUser, onLogout,\n  isMobile, isCollapsed, setIsCollapsed, isDarkMode, setIsDarkMode\n}) => {\n  const menuItems = [\n    { id: 'dashboard', label: 'Dashboard', icon: BarChart3, color: 'from-blue-500 to-blue-600', description: 'Panoramica generale' },\n    { id: 'sm-ranking', label: 'Classifica SM', icon: Trophy, color: 'from-yellow-500 to-yellow-600', description: 'Ranking coordinatori' },\n    { id: 'agents', label: 'Agenti', icon: Users, color: 'from-green-500 to-green-600', description: 'Gestione agenti' },\n    { id: 'products', label: 'Prodotti', icon: Package, color: 'from-purple-500 to-purple-600', description: 'Analisi prodotti' },\n    { id: 'new-clients', label: 'Nuovi Clienti', icon: UserPlus, color: 'from-pink-500 to-pink-600', description: 'Dashboard clienti' },\n    { id: 'fastweb', label: 'Fastweb', icon: Zap, color: 'from-orange-500 to-orange-600', description: 'Contratti Fastweb' },\n    { id: 'historical-analysis', label: 'Analisi Storica', icon: History, color: 'from-purple-500 to-purple-600', description: 'Analisi storica dei dati' },\n  ];\n\n  const settingsMenuItems = [\n    { id: 'files', label: 'Gestione File', icon: Upload, color: 'from-indigo-500 to-indigo-600', description: 'Upload e gestione' },\n    { id: 'settings', label: 'Gestione Utenti', icon: Settings, color: 'from-purple-500 to-purple-600', description: 'Gestisci gli utenti' }\n  ];\n\n  const handleItemClick = (itemId) => {\n    setActiveSection(itemId);\n    if (isMobile) setIsCollapsed(true);\n  };\n\n  return (\n    <>\n      {isMobile && !isCollapsed && (\n        <div className=\"sidebar-overlay\" onClick={() => setIsCollapsed(true)} />\n      )}\n\n      <div className={`modern-sidebar ${isCollapsed && isMobile ? 'collapsed' : ''} ${isDarkMode ? 'dark' : ''}`}>\n        <div className=\"sidebar-header\">\n          <div className=\"brand\">\n            <div className=\"brand-icon\"><TrendingUp size={32} /></div>\n            {(!isCollapsed || !isMobile) && (\n              <div className=\"brand-text\">\n                <h1>RUSH</h1>\n                <span>Dashboard</span>\n              </div>\n            )}\n          </div>\n          {isMobile && (\n            <button className=\"close-sidebar\" onClick={() => setIsCollapsed(true)}>\n              <X size={24} />\n            </button>\n          )}\n        </div>\n\n        <nav className=\"sidebar-nav\">\n          <div className=\"nav-section\">\n            <span className=\"section-title\">Principale</span>\n            {menuItems.slice(0, 4).map((item) => {\n              const Icon = item.icon;\n              const isActive = activeSection === item.id;\n              return (\n                <button key={item.id} className={`nav-item ${isActive ? 'active' : ''}`} onClick={() => handleItemClick(item.id)}>\n                  <div className={`nav-icon bg-gradient-to-r ${item.color}`}>\n                    <Icon size={20} />\n                  </div>\n                  {(!isCollapsed || !isMobile) && (\n                    <div className=\"nav-content\">\n                      <span className=\"nav-label\">{item.label}</span>\n                      <span className=\"nav-description\">{item.description}</span>\n                    </div>\n                  )}\n                  {isActive && <div className=\"active-indicator\" />}\n                </button>\n              );\n            })}\n          </div>\n          <div className=\"nav-section\">\n            <span className=\"section-title\">Analisi</span>\n            {menuItems.slice(4).map((item) => {\n              const Icon = item.icon;\n              const isActive = activeSection === item.id;\n              return (\n                <button key={item.id} className={`nav-item ${isActive ? 'active' : ''}`} onClick={() => handleItemClick(item.id)}>\n                  <div className={`nav-icon bg-gradient-to-r ${item.color}`}>\n                    <Icon size={20} />\n                  </div>\n                  {(!isCollapsed || !isMobile) && (\n                    <div className=\"nav-content\">\n                      <span className=\"nav-label\">{item.label}</span>\n                      <span className=\"nav-description\">{item.description}</span>\n                    </div>\n                  )}\n                  {isActive && <div className=\"active-indicator\" />}\n                </button>\n              );\n            })}\n          </div>\n\n          {(currentUser?.role === 'admin' || currentUser?.role === 'viewer') && (\n            <div className=\"nav-section\">\n              <span className=\"section-title\">Impostazioni</span>\n              {settingsMenuItems\n                .filter(item => {\n                  if (item.id === 'files') return true;\n                  if (item.id === 'settings') return currentUser.role === 'admin';\n                  return false;\n                })\n                .map((item) => {\n                  const Icon = item.icon;\n                  const isActive = activeSection === item.id;\n                  return (\n                    <button key={item.id} className={`nav-item ${isActive ? 'active' : ''}`} onClick={() => handleItemClick(item.id)}>\n                      <div className={`nav-icon bg-gradient-to-r ${item.color}`}>\n                        <Icon size={20} />\n                      </div>\n                      {(!isCollapsed || !isMobile) && (\n                        <div className=\"nav-content\">\n                          <span className=\"nav-label\">{item.label}</span>\n                          <span className=\"nav-description\">{item.description}</span>\n                        </div>\n                      )}\n                      {isActive && <div className=\"active-indicator\" />}\n                    </button>\n                  );\n                })}\n            </div>\n          )}\n        </nav>\n\n        <div className=\"sidebar-footer\">\n          <div className=\"user-section\">\n            <div className=\"user-avatar\"><User size={24} /></div>\n            {(!isCollapsed || !isMobile) && (\n              <div className=\"user-info\">\n                <span className=\"user-name\">{currentUser?.username || 'Admin'}</span>\n                <span className=\"user-role\">{currentUser?.role || 'Administrator'}</span>\n              </div>\n            )}\n          </div>\n          <div className=\"footer-actions\">\n            <button className=\"action-btn\" onClick={() => setIsDarkMode(!isDarkMode)}>\n              {isDarkMode ? <Sun size={20} /> : <Moon size={20} />}\n            </button>\n            <button className=\"action-btn logout\" onClick={onLogout}>\n              <LogOut size={20} />\n            </button>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ModernSidebar;\n","import React from 'react';\nimport { useData } from '../App';\nimport {\n  Menu, User, ChevronRight, Activity, Calendar, Home\n} from 'lucide-react';\n\nconst ModernTopbar = ({ activeSection, isMobile, isCollapsed, setIsCollapsed, currentUser, isDarkMode }) => {\n  const { data, selectedFileDate, setSelectedFileDate } = useData();\n  const sectionTitles = {\n    dashboard: 'Dashboard',\n    'sm-ranking': 'Classifica Sales Manager',\n    agents: 'Gestione Agenti',\n    products: 'Analisi Prodotti',\n    'new-clients': 'Nuovi Clienti',\n    fastweb: 'Fastweb Energia',\n    files: 'Gestione File'\n  };\n\n  return (\n    <header className={`modern-topbar ${isDarkMode ? 'dark' : ''}`}>\n      <div className=\"topbar-left\">\n        {isMobile && (\n          <button className=\"menu-toggle\" onClick={() => setIsCollapsed(!isCollapsed)}>\n            <Menu size={24} />\n          </button>\n        )}\n        <div className=\"breadcrumb\">\n          <Home size={16} />\n          <ChevronRight size={16} />\n          <span>{sectionTitles[activeSection] || 'Dashboard'}</span>\n        </div>\n      </div>\n      <div className=\"topbar-right\">\n        <div className=\"quick-stats\">\n          {data.uploadedFiles && data.uploadedFiles.length > 0 && (\n            <div className=\"period-selector\">\n              <select\n                id=\"period-select-topbar\"\n                value={selectedFileDate || (data.uploadedFiles[0]?.date || '')}\n                onChange={(e) => setSelectedFileDate(e.target.value)}\n              >\n                {data.uploadedFiles.map(file => (\n                  <option key={file.id} value={file.date}>\n                    {file.displayDate}\n                  </option>\n                ))}\n              </select>\n            </div>\n          )}\n          <div className=\"stat-item\">\n            <Calendar size={16} />\n            <span>{new Date().toLocaleDateString('it-IT')}</span>\n          </div>\n        </div>\n        <div className=\"user-menu\">\n          <div className=\"user-avatar-small\"><User size={18} /></div>\n          <div className=\"user-details\">\n            <span className=\"user-name-small\">{currentUser?.username || 'Admin'}</span>\n            <span className=\"user-status\">Online</span>\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n};\n\nexport default ModernTopbar;\n","import React, { useState, createContext, useContext, useEffect, useCallback } from 'react';\nimport { ThemeProvider, createTheme } from '@mui/material/styles';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport toast, { Toaster } from 'react-hot-toast';\n\n// Import dei servizi\nimport { apiService } from './services/apiService';\n// Import del parser Excel aggiornato\nimport { parseExcelFile, formatCurrency, formatNumber, sortFilesByDate } from './utils/excelParser';\nimport ConfirmationDialog from './components/ConfirmationDialog';\nimport ModernAgentsPage from './components/ModernAgentsPage'; // Importa la nuova pagina agenti\nimport ModernSMRanking from './components/ModernSMRanking'; // Importa la nuova pagina classifica SM\nimport ModernProductsAnalysis from './components/ModernProductsAnalysis'; // Importa la nuova pagina prodotti\nimport ModernNewClientsPage from './components/ModernNewClientsPage'; // Importa la nuova pagina clienti\nimport ModernFastwebPage from './components/ModernFastwebPage'; // Importa la nuova pagina Fastweb\nimport ModernHistoricalAnalysis from './components/ModernHistoricalAnalysis'; // Importa la pagina Analisi Storica\nimport ModernSettingsPage from './components/ModernSettingsPage'; // Importa la pagina Impostazioni\nimport TestPage from './components/TestPage'; // Importa il componente TestPage\nimport ModernDashboard from './components/ModernDashboard'; // Importa la nuova dashboard\nimport ModernSidebar from './components/ModernSidebar';\nimport ModernTopbar from './components/ModernTopbar';\nimport './App.css';\nimport './components/ModernDashboard.css'; // 💅 Importa i nuovi stili per la Dashboard\nimport './components/ModernLogin.css'; // ✨ Importa i nuovi stili per il Login\nimport './ModernAppLayout.css';\n\n\n// Context per la gestione dei dati - AGGIORNATO con caricamento globale\nconst DataContext = createContext();\n\nexport const useData = () => {\n  const context = useContext(DataContext);\n  if (!context) {\n    throw new Error('useData must be used within a DataProvider');\n  }\n  return context;\n};\n\n// 🆕 DATA PROVIDER CON CARICAMENTO GLOBALE\nconst DataProvider = ({ children, isAuthenticated }) => {\n  const [data, setData] = useState({\n    uploadedFiles: [],\n    processedData: {},\n    selectedSM: null,\n    selectedAgent: null\n  });\n  const [selectedFileDate, setSelectedFileDate] = useState(null);\n  const [globalLoading, setGlobalLoading] = useState(false);\n\n  // 🔧 FUNZIONE DI CARICAMENTO GLOBALE - Condivisa tra tutti i componenti\n  // 🔧 PATCH PER App.js - Sostituire la funzione loadFiles esistente\n\nconst loadFiles = useCallback(async () => {\n  if (!isAuthenticated) return; // Non caricare se non autenticato\n  \n  try {\n    setGlobalLoading(true);\n    console.log('🔄 Caricamento globale dati dal database...');\n    \n    const files = await apiService.loadFiles();\n    \n    if (!files || !Array.isArray(files) || files.length === 0) {\n      console.log('📁 Nessun file trovato nel database');\n      setData(prevData => ({\n        ...prevData,\n        uploadedFiles: [],\n        processedData: {}\n      }));\n      return;\n    }\n\n    console.log(`📁 ${files.length} file trovati nel database`);\n    \n    // Converte i dati dal formato database al formato app\n    const processedFiles = files.map((file) => {\n      try {\n        // ✅ FIX: Usa agents_data invece di file_data\n        let fileData = null;\n        \n        // Prima prova con file_data (nuovo formato)\n        if (file.file_data && file.file_data !== 'null') {\n          fileData = typeof file.file_data === 'string' \n            ? JSON.parse(file.file_data) \n            : file.file_data;\n        }\n        // Se non disponibile, ricostruisci dai campi separati (formato legacy)\n        else if (file.agents_data && file.agents_data !== 'null') {\n          const agents = typeof file.agents_data === 'string' \n            ? JSON.parse(file.agents_data) \n            : file.agents_data;\n          \n          const smRanking = file.sm_ranking && file.sm_ranking !== 'null'\n            ? (typeof file.sm_ranking === 'string' ? JSON.parse(file.sm_ranking) : file.sm_ranking)\n            : [];\n          \n          const existingMetadata = file.metadata && file.metadata !== 'null'\n            ? (typeof file.metadata === 'string' ? JSON.parse(file.metadata) : file.metadata)\n            : {};\n\n          // Ricostruisci file_data dal formato legacy\n          fileData = {\n            agents: agents,\n            smRanking: smRanking,\n            metadata: {\n              ...existingMetadata,\n              totalAgents: file.total_agents || agents.length || 0,\n              totalSMs: file.total_sms || 0,\n              totalRevenue: parseFloat(file.total_revenue || 0),\n              totalRush: parseFloat(file.total_inflow || file.total_rush || 0),\n              totalNewClients: file.total_new_clients || 0,\n              totalFastweb: file.total_fastweb || 0,\n            }\n          };\n          \n          console.log(`🔨 Ricostruito file_data per ${file.file_date} da campi legacy`);\n        }\n\n        // Se ancora non abbiamo dati, usa valori di fallback\n        if (!fileData) {\n          console.warn(`⚠️ Dati non disponibili per ${file.file_date} - uso fallback`);\n          fileData = {\n            agents: [],\n            smRanking: [],\n            metadata: {\n              totalAgents: 0,\n              totalSMs: 0,\n              totalRevenue: 0,\n              totalRush: 0,\n              totalNewClients: 0,\n              totalFastweb: 0\n            }\n          };\n        }\n\n        const metadataSource = fileData?.metadata ?? {};\n        const normalizedMetadata = {\n          ...metadataSource,\n          totalAgents: metadataSource.totalAgents ?? 0,\n          totalSMs: metadataSource.totalSMs ?? 0,\n          totalRevenue: metadataSource.totalRevenue ?? 0,\n          totalRush: metadataSource.totalRush ?? 0,\n          totalNewClients: metadataSource.totalNewClients ?? 0,\n          totalFastweb: metadataSource.totalFastweb ?? 0\n        };\n\n        return {\n          id: file.id,\n          name: file.file_name,\n          date: file.file_date,\n          displayDate: file.display_date,\n          uploadDate: file.upload_date,\n          size: file.file_size,\n          data: fileData, // ✅ Ora fileData è sempre popolato\n          metadata: normalizedMetadata\n        };\n      } catch (error) {\n        console.warn(`❌ Errore processamento file ${file.file_date}:`, error);\n        return {\n          id: file.id,\n          name: file.file_name,\n          date: file.file_date,\n          displayDate: file.display_date,\n          uploadDate: file.upload_date,\n          size: file.file_size,\n          data: {\n            agents: [],\n            smRanking: [],\n            metadata: { totalAgents: 0, totalSMs: 0, totalRevenue: 0, totalRush: 0, totalNewClients: 0, totalFastweb: 0 }\n          },\n          metadata: {\n            totalAgents: 0,\n            totalSMs: 0,\n            totalRevenue: 0,\n            totalRush: 0,\n            totalNewClients: 0,\n            totalFastweb: 0\n          }\n        };\n      }\n    });\n    \n    // Ordina i file per data\n    const sortedFiles = sortFilesByDate(processedFiles);\n    \n    // Crea il processedData per compatibilità\n    const processedData = {};\n    sortedFiles.forEach(file => {\n      if (file.data) {\n        processedData[file.date] = file.data;\n      }\n    });\n    \n    // Seleziona automaticamente il file più recente se non c'è selezione\n    const newSelectedFileDate = selectedFileDate && sortedFiles.find(f => f.date === selectedFileDate) \n      ? selectedFileDate \n      : (sortedFiles.length > 0 ? sortedFiles[0].date : null);\n    \n    setData(prevData => ({\n      ...prevData,\n      uploadedFiles: sortedFiles,\n      processedData: processedData\n    }));\n    \n    setSelectedFileDate(newSelectedFileDate);\n    \n    console.log(`✅ ${sortedFiles.length} file caricati con successo globalmente`);\n    console.log(`📊 File con dati: ${Object.keys(processedData).length}`);\n    \n    if (sortedFiles.length > 0 && newSelectedFileDate) {\n      console.log(`📋 File selezionato: ${sortedFiles.find(f => f.date === newSelectedFileDate)?.displayDate || 'N/A'}`);\n    }\n    \n  } catch (error) {\n    console.error('❌ Errore nel caricamento globale dei file:', error);\n    toast.error('Errore nel caricamento dei dati dal database');\n    \n    // Reset in caso di errore\n    setData(prevData => ({\n      ...prevData,\n      uploadedFiles: [],\n      processedData: {}\n    }));\n  } finally {\n    setGlobalLoading(false);\n  } \n}, [isAuthenticated, selectedFileDate]);\n\n  // 🚀 CARICAMENTO AUTOMATICO ALL'AUTENTICAZIONE\n  useEffect(() => {\n    if (isAuthenticated) {\n      console.log('🔐 Utente autenticato - Avvio caricamento dati...');\n      loadFiles();\n    } else {\n      // Reset dati se non autenticato\n      setData({\n        uploadedFiles: [],\n        processedData: {},\n        selectedSM: null,\n        selectedAgent: null\n      });\n      setSelectedFileDate(null);\n      setGlobalLoading(false);\n    }\n  }, [isAuthenticated, loadFiles]);\n\n  const contextValue = {\n    data,\n    setData,\n    selectedFileDate,\n    setSelectedFileDate,\n    loadFiles, // Esponi la funzione per ricaricare quando necessario\n    globalLoading\n  };\n\n  return (\n    <DataContext.Provider value={contextValue}>\n      {children}\n    </DataContext.Provider>\n  );\n};\n\n// Tema Material-UI personalizzato\nconst theme = createTheme({\n  palette: {\n    mode: 'light',\n    primary: {\n      main: '#1976d2',\n    },\n    secondary: {\n      main: '#dc004e',\n    },\n    background: {\n      default: '#f5f5f5',\n    },\n  },\n  typography: {\n    fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\n    h4: {\n      fontWeight: 600,\n    },\n  },\n});\n\n// ✨ Componente Login Moderno\nconst Login = ({ onLogin }) => {\n  const [credentials, setCredentials] = useState({ username: '', password: '' });\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    \n    try {\n      const result = await apiService.login(credentials.username, credentials.password);\n      \n      if (result.success) {\n        onLogin(result.user);\n        toast.success(`Benvenuto, ${result.user.full_name || result.user.username}!`);\n      } else {\n        toast.error(result.error || 'Credenziali non valide');\n      }\n    } catch (error) {\n      toast.error('Errore di connessione');\n      console.error('Login error:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"modern-login-container\">\n      <div className=\"modern-login-card\">\n        <div className=\"modern-login-header\">\n          <h1>🏆 RUSH</h1>\n          <p>Gara di Produzione Agenti</p>\n        </div>\n        \n        <form onSubmit={handleSubmit} className=\"modern-login-form\">\n          <div className=\"modern-form-group\">\n            <label htmlFor=\"username\">Username</label>\n            <input\n              id=\"username\"\n              type=\"text\"\n              value={credentials.username}\n              onChange={(e) => setCredentials({...credentials, username: e.target.value})}\n              placeholder=\"es. mario.rossi\"\n              required\n            />\n          </div>\n          \n          <div className=\"modern-form-group\">\n            <label htmlFor=\"password\">Password</label>\n            <input\n              id=\"password\"\n              type=\"password\"\n              value={credentials.password}\n              onChange={(e) => setCredentials({...credentials, password: e.target.value})}\n              placeholder=\"••••••••\"\n              required\n            />\n          </div>\n          \n          <button \n            type=\"submit\" \n            className={`modern-login-btn ${loading ? 'loading' : ''}`}\n            disabled={loading}\n          >\n            {loading ? 'Accesso...' : 'Accedi'}\n          </button>\n        </form>\n        \n      </div>\n    </div>\n  );\n};\n\n\n// Componente File Upload - SEMPLIFICATO (non più responsabile del caricamento globale)\nconst FileUpload = ({ openDialog, currentUser }) => {\n  const { data, loadFiles, globalLoading } = useData();\n  const [uploading, setUploading] = useState(false);\n  const isViewer = currentUser?.role === 'viewer';\n\n  // ⚠️ IMPORTANTE: Ora loadFiles è gestito globalmente, non qui\n\n  // *** AGGIORNATO: handleFileUpload per parser dinamico ***\n  const handleFileUpload = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    setUploading(true);\n    toast.loading('Parsing del file Excel...', { id: 'upload' });\n\n    try {\n      // Validazione tipo file\n      const validTypes = [\n        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n        'application/vnd.ms-excel'\n      ];\n      \n      if (!validTypes.includes(file.type) && !file.name.toLowerCase().endsWith('.xlsx')) {\n        toast.error('File non valido. Sono supportati solo file Excel (.xlsx, .xls)', { id: 'upload' });\n        return;\n      }\n\n      // *** NUOVO: Parsing dinamico con gestione anomalie ***\n      const parseResult = await parseExcelFile(file);\n      \n      if (!parseResult.success) {\n        if (parseResult.needsMapping) {\n          // 🆕 Gestisci mappatura manuale se necessaria\n          const userChoice = window.confirm(\n            `⚠️ ATTENZIONE: Alcune colonne non sono state trovate automaticamente.\\n\\n` +\n            `Colonne mancanti: ${parseResult.missingColumns.map(c => c.field).join(', ')}\\n\\n` +\n            `Colonne disponibili nel file: ${parseResult.availableColumns.slice(0, 10).join(', ')}${parseResult.availableColumns.length > 10 ? '...' : ''}\\n\\n` +\n            `Vuoi procedere comunque? I campi mancanti saranno impostati a 0.`\n          );\n          \n          if (!userChoice) {\n            toast.error('Caricamento annullato', { id: 'upload' });\n            return;\n          }\n          \n          // Per ora procediamo, in futuro si può implementare una mappatura manuale\n        } else {\n          toast.error(`❌ Errore nel parsing del file: ${parseResult.error}`, { id: 'upload' });\n          return;\n        }\n      }\n\n      // *** NUOVO: Gestione warnings per campi opzionali mancanti ***\n      if (parseResult.data?.metadata?.warnings && parseResult.data.metadata.warnings.length > 0) {\n        const warningCount = parseResult.data.metadata.warnings.length;\n        const warningFields = parseResult.data.metadata.warnings.map(w => w.field).join(', ');\n        \n        toast.success(\n          `⚡ File parsato con successo!\\n` +\n          `⚠️ ${warningCount} campi opzionali impostati a zero: ${warningFields}\\n` +\n          `Questo è normale per prodotti non disponibili in certi periodi.`,\n          { id: 'upload', duration: 6000 }\n        );\n      }\n\n      const { data: parsedData } = parseResult;\n      const fileDate = parsedData.metadata.dateInfo.dateString;\n\n      const uploadFile = async () => {\n        // *** AGGIORNATO: Usa la nuova struttura dati dal parser dinamico ***\n        const fileData = {\n          name: file.name,\n          date: fileDate,\n          displayDate: `${parsedData.metadata.dateInfo.month}/${parsedData.metadata.dateInfo.year}`,\n          size: file.size,\n          data: parsedData,\n          metadata: {\n            totalAgents: parsedData.metadata.totalAgents,\n            totalSMs: parsedData.metadata.totalSMs,\n            totalRevenue: parsedData.metadata.totalRevenue,\n            totalRush: parsedData.metadata.totalRush,\n            totalNewClients: parsedData.metadata.totalNewClients,\n            totalFastweb: parsedData.metadata.totalFastweb || 0,\n            parseDate: new Date().toISOString(),\n            warnings: parsedData.metadata.warnings\n          }\n        };\n\n        const result = await apiService.saveFile(fileData);\n\n        if (result.success) {\n          // Success feedback con dettagli migliorati\n          const agentsCount = parsedData.metadata.totalAgents;\n          const smCount = parsedData.metadata.totalSMs;\n          const totalFatturato = parsedData.metadata.totalRevenue;\n          const totalRush = parsedData.metadata.totalRush;\n          \n          const actionText = result.action === 'updated' ? 'aggiornato' : 'caricato';\n          toast.success(\n            `✅ File ${actionText} con successo!\\n` +\n            `👥 ${agentsCount} agenti importati\\n` +\n            `👔 ${smCount} coordinatori\\n` +\n            `💰 ${formatCurrency(totalFatturato)} fatturato\\n` +\n            `⚡ ${formatCurrency(totalRush)} Fatturato Rush`,\n            { id: 'upload', duration: 5000 }\n          );\n\n          // 🔧 FIX: Usa la funzione globale di caricamento\n          await loadFiles();\n        } else {\n          throw new Error(result.error || 'Errore sconosciuto durante il caricamento');\n        }\n      };\n\n      // Controlla duplicati basandosi sulla data nel nome file\n      const existingFile = data.uploadedFiles.find(f => f.date === fileDate);\n      \n      if (existingFile) {\n        toast.dismiss('upload');\n        const monthYear = `${parsedData.metadata.dateInfo.month}/${parsedData.metadata.dateInfo.year}`;\n        openDialog(\n          'Sovrascrivi file',\n          `⚠️ ATTENZIONE!\\n\\nEsiste già un file per ${monthYear}:\\n\"${existingFile.name}\"\\n\\nVuoi sovrascriverlo?`,\n          () => {\n            toast.loading('Aggiornamento file...', { id: 'upload' });\n            uploadFile();\n          }\n        );\n      } else {\n        toast.loading('Caricamento file sul server...', { id: 'upload' });\n        await uploadFile();\n      }\n\n    } catch (error) {\n      if (error?.statusCode === 403) {\n        toast.error('⛔ Accesso negato. Solo gli amministratori possono caricare o aggiornare file.', { id: 'upload', duration: 5000 });\n      } else {\n        toast.error(`❌ Errore: ${error.message || 'Caricamento fallito'}`, { id: 'upload' });\n      }\n      console.error('Upload error:', error);\n    } finally {\n      setUploading(false);\n      event.target.value = '';\n    }\n  };\n\n  const handleDeleteFile = async (fileDate, fileName) => {\n    openDialog(\n      'Conferma Eliminazione',\n      `Sei sicuro di voler eliminare il file ${fileName}?`,\n      async () => {\n        try {\n          toast.loading('Eliminazione file...', { id: 'delete' });\n\n          await apiService.deleteFile(fileDate);\n\n          toast.success('File eliminato con successo', { id: 'delete' });\n\n          // 🔧 FIX: Usa la funzione globale di ricaricamento\n          await loadFiles();\n\n        } catch (error) {\n          toast.error(`Errore nell'eliminazione: ${error.message}`, { id: 'delete' });\n          console.error('Delete error:', error);\n        }\n      }\n    );\n  };\n\n  // 🔧 FIX: Mostra loading globale invece di loading locale\n  if (globalLoading) {\n    return (\n      <div className=\"file-upload-section\">\n        <div className=\"loading-indicator\">\n          <div className=\"loading-spinner\"></div>\n          Caricamento file dal database...\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"file-upload-section\">\n      {isViewer ? (\n        <div className=\"viewer-message\">\n          <p>La funzione di caricamento ed eliminazione è disponibile solo per gli amministratori.</p>\n          <p>Contatta un amministratore per gestire i file.</p>\n        </div>\n      ) : (\n        <>\n          <h3>📁 Carica File Mensile</h3>\n          <div className=\"upload-area\">\n            <input\n              type=\"file\"\n              id=\"file-upload\"\n              accept=\".xlsx,.xls\"\n              onChange={handleFileUpload}\n              disabled={uploading}\n              className=\"file-input\"\n            />\n            <label htmlFor=\"file-upload\" className={`upload-label ${uploading ? 'uploading' : ''}`}>\n              {uploading ? '⏳ Caricamento...' : '📤 Seleziona File Excel'}\n            </label>\n          </div>\n\n          <div className=\"upload-info\">\n            <p>Formato file: <code>YYYY.MM.DD Piramis Gara RUSH Inflow Agenti.xlsx</code></p>\n            <p>File supportati: .xlsx, .xls</p>\n            <p className=\"parser-info\">\n              🧠 <strong>Parser Dinamico:</strong> Si adatta automaticamente alle variazioni tra file diversi\n            </p>\n          </div>\n        </>\n      )}\n      \n      <div className=\"uploaded-files\">\n        <h4>File Caricati ({data.uploadedFiles.length})</h4>\n        {data.uploadedFiles.length === 0 ? (\n          <p className=\"no-files\">Nessun file caricato sul server</p>\n        ) : (\n          <div className=\"files-list\">\n            {data.uploadedFiles.map(file => (\n              <div key={file.id} className=\"file-item\">\n                <div className=\"file-info\">\n                  <span className=\"file-name\">{file.name}</span>\n                  {file.metadata && (\n                    <div className=\"file-stats\">\n                      <span>{formatNumber(file.metadata.totalAgents)} agenti</span>\n                      <span>{formatNumber(file.metadata.totalSMs)} coordinatori</span>\n                      <span>{formatCurrency(file.metadata.totalRevenue)} fatturato</span>\n                      <span>{formatCurrency(file.metadata.totalRush)} Fatturato Rush</span>\n                      {file.metadata.totalFastweb > 0 && (\n                        <span className=\"fastweb-badge\">⚡ {formatNumber(file.metadata.totalFastweb)} Fastweb</span>\n                      )}\n                    </div>\n                  )}\n                </div>\n                <span className=\"file-date\">{file.displayDate}</span>\n                <div className=\"file-actions\">\n                  <span className=\"file-size\">{(file.size / 1024).toFixed(1)} KB</span>\n                  {!isViewer && (\n                    <button\n                      className=\"delete-file-btn\"\n                      onClick={() => handleDeleteFile(file.date, file.name)}\n                      title=\"Elimina file\"\n                    >\n                      🗑️\n                    </button>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n\n// Componente principale con routing - AGGIORNATO per usare DataProvider\nconst MainApp = ({ currentUser, onLogout, isAuthenticated }) => {\n  const [activeSection, setActiveSection] = useState('dashboard');\n  const [dialog, setDialog] = useState({ isOpen: false, title: '', message: '', onConfirm: () => {} });\n  const [isDarkMode, setIsDarkMode] = useState(false);\n  const [isMobile, setIsMobile] = useState(false);\n  const [isCollapsed, setIsCollapsed] = useState(false);\n\n  useEffect(() => {\n    const checkMobile = () => {\n      const mobile = window.innerWidth < 768;\n      setIsMobile(mobile);\n      if (mobile) {\n        setIsCollapsed(true);\n      }\n    };\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n\n  useEffect(() => {\n    document.body.classList.toggle('dark-mode', isDarkMode);\n    if (isDarkMode) {\n      document.documentElement.style.setProperty('color-scheme', 'dark');\n    } else {\n      document.documentElement.style.setProperty('color-scheme', 'light');\n    }\n  }, [isDarkMode]);\n\n  const openDialog = (title, message, onConfirm) => {\n    setDialog({\n      isOpen: true,\n      title,\n      message,\n      onConfirm: () => {\n        onConfirm();\n        handleCloseDialog();\n      }\n    });\n  };\n\n  const handleCloseDialog = () => {\n    setDialog({ ...dialog, isOpen: false });\n  };\n\n  const renderContent = () => {\n    switch (activeSection) {\n      case 'dashboard':\n        return <ModernDashboard />;\n      case 'files':\n        return <FileUpload openDialog={openDialog} currentUser={currentUser} />;\n      case 'sm-ranking':\n        return <ModernSMRanking />;\n      case 'agents':\n        return <ModernAgentsPage />;\n      case 'products':\n        return <ModernProductsAnalysis />;\n      case 'new-clients':\n        return <ModernNewClientsPage />;\n      case 'fastweb':\n        return <ModernFastwebPage />;\n      case 'historical-analysis':\n        return <ModernHistoricalAnalysis setActiveSection={setActiveSection} />;\n      case 'settings':\n        return <ModernSettingsPage />;\n      case 'test':\n        return <TestPage />;\n      default:\n        return <ModernDashboard />;\n    }\n  };\n\n  return (\n    <DataProvider isAuthenticated={isAuthenticated}>\n      <div className={`modern-app-container ${isDarkMode ? 'dark' : ''}`}>\n        <ModernSidebar\n          activeSection={activeSection}\n          setActiveSection={setActiveSection}\n          currentUser={currentUser}\n          onLogout={onLogout}\n          isMobile={isMobile}\n          isCollapsed={isCollapsed}\n          setIsCollapsed={setIsCollapsed}\n          isDarkMode={isDarkMode}\n          setIsDarkMode={setIsDarkMode}\n        />\n\n        <div className=\"main-app-area\">\n          <ModernTopbar\n            activeSection={activeSection}\n            isMobile={isMobile}\n            isCollapsed={isCollapsed}\n            setIsCollapsed={setIsCollapsed}\n            currentUser={currentUser}\n            isDarkMode={isDarkMode}\n          />\n\n          <main className={`modern-main-content ${isDarkMode ? 'dark' : ''}`}>\n            {renderContent()}\n          </main>\n        </div>\n\n        <ConfirmationDialog\n          open={dialog.isOpen}\n          onClose={handleCloseDialog}\n          onConfirm={dialog.onConfirm}\n          title={dialog.title}\n          message={dialog.message}\n        />\n      </div>\n    </DataProvider>\n  );\n};\n\n// App principale\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [initializing, setInitializing] = useState(true);\n\n  // Controlla autenticazione all'avvio\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        let user = null;\n\n        if (apiService.isAuthenticated()) {\n          user = apiService.getCurrentUser();\n\n          if (!user) {\n            const session = await apiService.restoreSession();\n            if (session.success) {\n              user = session.user;\n            }\n          }\n        } else {\n          const session = await apiService.restoreSession();\n          if (session.success) {\n            user = session.user;\n          }\n        }\n\n        if (user) {\n          setCurrentUser(user);\n          setIsAuthenticated(true);\n\n          // Test connessione API\n          try {\n            await apiService.healthCheck();\n            console.log('✅ Connessione API verificata');\n          } catch (error) {\n            console.warn('⚠️ Problema connessione API:', error);\n            toast.warning('Connessione al server instabile');\n          }\n        } else {\n          setCurrentUser(null);\n          setIsAuthenticated(false);\n        }\n      } catch (error) {\n        console.error('Errore verifica autenticazione:', error);\n      } finally {\n        setInitializing(false);\n      }\n    };\n\n    checkAuth();\n  }, []);\n\n  const handleLogin = (user) => {\n    setCurrentUser(user);\n    setIsAuthenticated(true);\n  };\n\n  const handleLogout = async () => {\n    try {\n      await apiService.logout();\n      setCurrentUser(null);\n      setIsAuthenticated(false);\n      toast.success('Logout effettuato con successo');\n    } catch (error) {\n      console.error('Errore durante logout:', error);\n      // Logout locale comunque\n      setCurrentUser(null);\n      setIsAuthenticated(false);\n    }\n  };\n\n  // Loading iniziale\n  if (initializing) {\n    return (\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <div className=\"App\">\n          <div className=\"loading-container\">\n            <div className=\"loading-spinner\"></div>\n            <p>Inizializzazione RUSH Dashboard...</p>\n          </div>\n          <Toaster position=\"top-right\" />\n        </div>\n      </ThemeProvider>\n    );\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <div className=\"App\">\n        {!isAuthenticated ? (\n          <Login onLogin={handleLogin} />\n        ) : (\n          <MainApp \n            currentUser={currentUser} \n            onLogout={handleLogout}\n            isAuthenticated={isAuthenticated}\n          />\n        )}\n        <Toaster \n          position=\"top-right\"\n          toastOptions={{\n            duration: 4000,\n            style: {\n              background: '#363636',\n              color: '#fff',\n              maxWidth: '500px', // ← Più spazio per i messaggi dettagliati\n            },\n            success: {\n              duration: 3000,\n              iconTheme: {\n                primary: '#4aed88',\n              },\n            },\n            error: {\n              duration: 5000,\n              iconTheme: {\n                primary: '#ff6b6b',\n              },\n            },\n          }}\n        />\n      </div>\n    </ThemeProvider>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"names":["runtimeEnv","resolveRuntimeEnv","error","process","env","MODE","VITE_API_BASE_URL","mode","API_BASE_URL","_runtimeEnv$VITE_API_","isProduction","SENSITIVE_KEYS","Set","sanitizeForLogging","value","seen","arguments","length","undefined","WeakSet","depth","Date","toISOString","Error","name","message","stack","has","add","Array","isArray","map","item","Object","entries","reduce","acc","_ref","key","val","normalizedKey","String","toLowerCase","delete","createLogger","method","_len","args","_key","sanitizedArgs","arg","logDebug","console","log","bind","logError","logWarn","warn","SESSION_STORAGE_KEY","ApiError","constructor","statusCode","details","super","this","apiService","token","currentUser","expiresAt","sessionActive","baseURL","concat","loadStoredSession","makeRequest","endpoint","options","url","replace","skipAuthErrorHandling","headers","customHeaders","credentials","requestedCredentials","fetchOptions","_objectWithoutProperties","_excluded","isFormData","body","FormData","_objectSpread","getAuthHeaders","window","URL","location","href","origin","config","response","fetch","status","statusText","contentType","get","rawBody","text","trimmedBody","trim","shouldAttemptJsonParse","includes","startsWith","data","JSON","parse","parseError","ok","clearSession","handleAuthError","errorMessage","errorDetails","raw","TypeError","shouldReload","reload","localStorage","removeItem","setToken","saveSessionToStorage","sessionData","setItem","stringify","storedData","getItem","Boolean","removeError","login","username","password","_response$user","success","user","expires_at","logout","isAuthenticated","getCurrentUser","restoreSession","profile","changePassword","currentPassword","newPassword","current_password","new_password","loadFiles","_response$files","files","getFileData","fileDate","saveFile","fileData","_response$action","date","action","_response$statusCode","result","deleteFile","uploadFile","file","parsedData","formData","append","getDashboardStats","getStatsForPeriod","startDate","endDate","getSMRanking","getAgentsDetails","getProductsAnalysis","getNewClientsData","getFastwebData","getUserProfile","updateUserProfile","profileData","healthCheck","getSystemInfo","cleanup","exportData","_this$getCurrentUser","fullData","filePromises","async","file_date","fileInfo","file_name","displayDate","display_date","uploadDate","upload_date","size","file_size","fileResults","Promise","all","exportDate","version","metadata","totalFiles","exportedBy","blob","Blob","type","createObjectURL","link","document","createElement","download","split","appendChild","click","removeChild","revokeObjectURL","importData","backupFile","getActivityLogs","limit","offset","search","query","filters","getUsers","users","updateUserRole","userId","role","adminUpdateUserPassword","createUser","userData","deleteUser","batchOperation","operation","fileIds","DYNAMIC_FIELD_PATTERNS","patterns","required","description","parseAgentRow","worksheet","row","mapping","getColumnValue","fieldKey","expectedType","column","cellRef","cell","v","toString","parsed","parseFloat","isNaN","cleanCellValue","agent","nome","sm","distretto","fatturatoRush","bonusRisultati","fatturato","complessivo","simVoce","adsl","simDati","fibra","fibraBusiness","fastwebEnergia","nuovoCliente","station","mnp","totalePezzi","numero","easyRent","linkOu","linkOa","linkOaStart","interniOa","fatturatoVoce","fatturatoDati","fatturatoEasyRent","fatturatoOu","fatturatoOa","fatturatoEasyDeal","fatturatoAltro","fatturatoServiziDigitali","fatturatoCustom","sdm","fatturatoSdm","ssc","fatturatoSsc","yourBackup","fatturatoYourBackup","cloudNas","fatturatoCloudNas","easyGdpr","fatturatoEasyGdpr","miia","fatturatoMiia","fatturatoNuovoCliente","bsalesMobile","pdaDigitale","totaleVoce","totaleDati","totaleFastweb","fatturatoProdotti","columnToIndex","i","charCodeAt","extractDateFromFilename","filename","dateMatch","match","year","parseInt","month","day","dateString","formatCurrency","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","formatNumber","open","onClose","onConfirm","title","_jsxs","Dialog","children","_jsx","DialogTitle","id","DialogContent","DialogContentText","DialogActions","Button","onClick","color","autoFocus","formatAgentName","part","charAt","toUpperCase","slice","join","_agent$fatturato","topProducts","agentData","filter","p","sort","a","b","str","performanceClass","Stat","_ref2","icon","label","className","User","DollarSign","TrendingUp","Award","Package","EmptyState","StatItem","isCurrency","Icon","formattedValue","KpiTrend","_ref3","currentValue","historicalValues","dataKey","lastMonthData","previousValue","percentageChange","Math","abs","toFixed","_ref4","_agent$fatturato2","allData","activeSection","setActiveSection","useState","toggleSection","sectionId","useEffect","handleEsc","event","keyCode","addEventListener","removeEventListener","historicalData","useMemo","uploadedFiles","_file$data","_agentData$fatturato","agents","find","originalNome","rush","reverse","getProductCount","category","ReactDOM","e","stopPropagation","colors","getAvatarColor","MapPin","Calendar","X","ResponsiveContainer","width","height","LineChart","CartesianGrid","strokeDasharray","stroke","XAxis","YAxis","yAxisId","orientation","Tooltip","contentStyle","backgroundColor","border","borderRadius","boxShadow","Legend","Line","strokeWidth","dot","fill","r","BarChart3","ChevronDown","Phone","Globe","Smartphone","Shield","Zap","toLocaleDateString","jsx","getElementById","SLIDER_DISPLAY_MAX","ModernAgentsPage","_stats$topPerformer","selectedFileDate","globalLoading","useData","selectedAgent","setSelectedAgent","refreshing","setRefreshing","setFilters","searchTerm","selectedSm","fatturatoRushRange","activePreset","params","URLSearchParams","newFilters","Number","set","history","replaceState","pathname","smList","maxFatturatoRush","allAgentsInPeriod","f","agentsWithId","index","uniqueSmList","trueMaxRush","max","handleFilterChange","min","prev","handlePresetFilter","preset","stats","totalAgents","avgRush","sum","topPerformer","totalRevenue","marks","Users","disabled","RefreshCw","toLocaleString","Filter","Search","placeholder","onChange","target","Slider","newValue","valueLabelDisplay","step","valueLabelFormat","sx","mt","AgentCard","AgentModal","ModernSMRanking","sortBy","setSortBy","sortOrder","setSortOrder","selectedMetric","setSelectedMetric","expandedSM","setExpandedSM","smData","_data$uploadedFiles","agentsBySM","forEach","smName","team","totalRush","totalNewClients","push","values","sortedSMData","aVal","bVal","handleSort","field","handleMetricChange","metric","getRankIcon","Crown","Trophy","Medal","getMetricColor","totalStats","totalSMs","avgTeamSize","Target","ChevronUp","_Fragment","Star","agentIndex","ModernProductsAnalysis","selectedCategory","setSelectedCategory","viewMode","setViewMode","chartType","setChartType","chartMetric","setChartMetric","CHART_COLORS","productCategories","products","productsData","_data$processedData$s","processedData","productMapping","revenueKeyMapping","easyDeal","altro","serviziDigitali","custom","keys","revenueKey","agentsWithProduct","volume","displayName","topAgents","filteredProducts","_productCategories$se","categoryProducts","fromEntries","sortedProducts","totalVolume","totalProducts","getProductIcon","productName","Wifi","getProductColor","filteredProductsArray","productData","formatChartValue","useCallback","numericValue","includeUnit","formatted","unit","formatCount","chartData","product","originalName","Activity","PieChart","_ref5","_ref6","productKey","background","_ref7","_product$topAgents$","RechartsPieChart","Pie","nameKey","cx","cy","outerRadius","_ref8","labelLine","entry","Cell","formatter","BarChart","angle","textAnchor","interval","fontSize","tickFormatter","Bar","LabelList","position","AreaChart","Area","fillOpacity","NewClientAgentCard","performance","clientCount","avatarName","n","substring","UserPlus","PerformerCard","rank","rankClass","ModernNewClientsPage","setSort","by","order","topPerformers","emptyState","totalClients","avgClientsPerAgent","topSm","clients","allAgents","filteredAgents","valA","valB","smPerformance","topSmEntry","handleSortChange","newSortBy","Handshake","Building","ArrowDown","ArrowUp","resetFilters","Briefcase","ModernFastwebPage","activeView","setActiveView","isRefreshing","setIsRefreshing","fastwebData","agentsWithFastweb","totalContracts","avgContracts","topAgent","smRanking","period","smMap","Map","current","contracts","agentList","from","gridColumn","Frown","setTimeout","Eye","UserCheck","formatPercentage","TrendIndicator","isPositive","isNegative","trendClass","TrendingDown","InsightCard","insight","CustomTooltip","active","payload","TrendCard","cardClass","loading","setLoading","hasData","historicalStats","_files","_files2","monthlyData","latest","previous","calcTrend","revenueTrend","averageRevenue","clientTrend","bestMonth","best","comparisonData","rows","totalRevenuePeriod","totalRushPeriod","totalNewClientsPeriod","averageAgentsPeriod","kpis","revenue","summary","averageAgents","trends","insights","BarChart2","LoadingState","NoDataState","FileText","History","handleRefresh","Lightbulb","margin","top","right","left","bottom","tick","content","activeDot","header","UserModal","onSave","setUserData","full_name","confirmPassword","handleChange","titles","create","handleSave","toast","ModernSettingsPage","setUsers","setError","modalState","setModalState","isOpen","dialog","setDialog","fetchUsers","fetchedUsers","err","openModal","closeModal","handleCloseDialog","created_at","Edit","KeyRound","openDialog","handleDeleteUser","Trash","ConfirmationDialog","TestPage","agentKeys","firstTenAgents","ModernDashboard","_stats$topAgent$fattu","setSelectedFileDate","totalFastweb","topSM","recentFiles","currentPeriod","onLogout","isMobile","isCollapsed","setIsCollapsed","isDarkMode","setIsDarkMode","menuItems","settingsMenuItems","Upload","Settings","handleItemClick","itemId","isActive","Sun","Moon","LogOut","_data$uploadedFiles$","Menu","Home","ChevronRight","dashboard","fastweb","DataContext","createContext","context","useContext","DataProvider","setData","selectedSM","setGlobalLoading","prevData","sortedFiles","dateA","dateB","localeCompare","sortFilesByDate","_fileData$metadata","_fileData","_metadataSource$total","_metadataSource$total2","_metadataSource$total3","_metadataSource$total4","_metadataSource$total5","_metadataSource$total6","file_data","agents_data","sm_ranking","total_agents","total_sms","total_revenue","total_inflow","total_rush","total_new_clients","total_fastweb","metadataSource","normalizedMetadata","newSelectedFileDate","_sortedFiles$find","contextValue","Provider","theme","createTheme","palette","primary","main","secondary","default","typography","fontFamily","h4","fontWeight","Login","onLogin","setCredentials","onSubmit","preventDefault","htmlFor","FileUpload","uploading","setUploading","isViewer","accept","_parseResult$data","endsWith","parseResult","dateInfo","arrayBuffer","workbook","XLSX","SheetNames","Sheets","headerRow","range","decode_range","headerKeywords","bestRow","bestScore","score","cellCount","col","c","encode_cell","cellText","keyword","normalizedScore","findHeaderRow","missingColumns","warnings","availableColumns","totalColumns","colLetter","encode_col","headerText","normalized","mappedHeaders","fieldConfig","pattern","bestMatch","normalizedPattern","createIntelligentMapping","criticalMissing","needsMapping","smStats","agentCol","agentCell","agenti","fatturatoTotale","totals","parsedRows","parseExcelFile","confirm","warningCount","warningFields","w","duration","parseDate","agentsCount","smCount","totalFatturato","actionText","existingFile","dismiss","monthYear","fileName","handleDeleteFile","MainApp","setIsMobile","checkMobile","mobile","innerWidth","classList","toggle","documentElement","setProperty","ModernSidebar","ModernTopbar","renderContent","ModernHistoricalAnalysis","setIsAuthenticated","setCurrentUser","initializing","setInitializing","session","warning","checkAuth","ThemeProvider","CssBaseline","Toaster","toastOptions","maxWidth","iconTheme","onPerfEntry","render","React","App","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB"],"sourceRoot":""}